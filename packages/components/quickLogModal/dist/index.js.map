{"version":3,"file":"index.js","sources":["../../../../node_modules/style-inject/dist/style-inject.es.js","../src/quickLogModal/quickLogModal.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useEffect } from 'react';\nimport { Control, useController, useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { FormField, useConfirmDeleteModal } from '@bloobirds-it/bobjects';\nimport {\n  Button,\n  Icon,\n  IconButton,\n  Item,\n  Modal,\n  ModalFooter,\n  ModalHeader,\n  Select,\n} from '@bloobirds-it/flamingo-ui';\nimport { useQuickLogActivity, useDataModel } from '@bloobirds-it/hooks';\nimport {\n  ACTIVITY_FIELDS_LOGIC_ROLE,\n  Bobject,\n  BobjectFieldDataModel,\n  BobjectTypes,\n  DataModelResponse,\n  LEAD_FIELDS_LOGIC_ROLE,\n  MIXPANEL_EVENTS,\n} from '@bloobirds-it/types';\nimport {\n  getFieldByLogicRole,\n  getTextFromLogicRole,\n  recoverScrollOfBox,\n  removeScrollOfBox,\n} from '@bloobirds-it/utils';\nimport mixpanel from 'mixpanel-browser';\n\nimport styles from './quickLogModal.module.css';\n\ninterface FormValues {\n  fields: {\n    [id: string]: any;\n  };\n}\n\nconst LeadSelector = ({\n  control,\n  leadFieldId,\n  leads,\n  required,\n}: {\n  control: Control<FormValues>;\n  leadFieldId: string;\n  leads: Bobject[];\n  required: boolean;\n}) => {\n  const { t } = useTranslation('translation', { keyPrefix: 'quickLogModal.leadSelector' });\n  const {\n    field: { value, onChange },\n    fieldState: { error },\n  } = useController({\n    control,\n    name: `fields.${leadFieldId}`,\n    rules: {\n      required: {\n        value: required,\n        message: t('required'),\n      },\n    },\n  });\n\n  return (\n    <Select\n      placeholder={t('placeholder', { required: required ? ' *' : '' })}\n      width=\"100%\"\n      value={value}\n      onChange={onChange}\n      error={error?.message}\n    >\n      {!required && (\n        <Item value=\"\">\n          <em>{t('none')}</em>\n        </Item>\n      )}\n      {leads?.map((lead, idx) => (\n        <Item key={lead?.id.value + '-' + idx} value={lead?.id.value}>\n          {\n            // @ts-ignore\n            lead?.fullName || getTextFromLogicRole(lead, LEAD_FIELDS_LOGIC_ROLE.FULL_NAME)\n          }\n        </Item>\n      ))}\n    </Select>\n  );\n};\n\nexport const QuickLogModalContent = ({\n  isOpen,\n  modalData,\n  logCustomActivity,\n  editCustomActivity,\n  closeQuickLogModal,\n}) => {\n  const { customTask, leads, selectedBobject, activity, isEdition } = modalData || {};\n  const dataModel: DataModelResponse = useDataModel();\n  const { openDeleteModal } = useConfirmDeleteModal();\n  const dateField = dataModel?.findFieldByLogicRole(ACTIVITY_FIELDS_LOGIC_ROLE.DATETIME);\n  const leadField = dataModel?.findFieldByLogicRole(ACTIVITY_FIELDS_LOGIC_ROLE.LEAD);\n  const noteField = dataModel?.findFieldByLogicRole(ACTIVITY_FIELDS_LOGIC_ROLE.NOTE);\n  const customActivityFields = customTask?.fields.map(field => ({\n    [field.bobjectFieldId]: activity?.raw?.contents?.[field.bobjectFieldId],\n  }));\n\n  const activityLead = getFieldByLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.LEAD)\n    ?.referencedBobject;\n  const activityNote = getTextFromLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.NOTE);\n\n  const { t } = useTranslation('translation', { keyPrefix: 'quickLogModal' });\n\n  const {\n    control,\n    handleSubmit,\n    formState: { isSubmitting },\n    setValue,\n    watch,\n    reset,\n  } = useForm<FormValues>({\n    defaultValues: {\n      fields: {},\n    },\n  });\n\n  useEffect(() => {\n    if (isOpen) {\n      removeScrollOfBox();\n    }\n\n    if (!isOpen) {\n      recoverScrollOfBox();\n    }\n\n    return () => {\n      recoverScrollOfBox();\n      reset();\n    };\n  }, [isOpen]);\n\n  useEffect(() => {\n    const fields = watch('fields');\n    let defaultFieldValues = fields;\n\n    if (customActivityFields) {\n      defaultFieldValues = {\n        ...defaultFieldValues,\n        ...customActivityFields.reduce((acc, f) => {\n          const [key] = Object.keys(f);\n          if (fields?.[key] === undefined) {\n            return { ...acc, ...f };\n          }\n        }, defaultFieldValues),\n      };\n    }\n\n    if (dateField && fields[dateField.id] === undefined) {\n      defaultFieldValues = { ...defaultFieldValues, [dateField.id]: new Date() };\n    }\n\n    if (leadField && fields[leadField.id] === undefined) {\n      if (activityLead) {\n        defaultFieldValues = { ...defaultFieldValues, [leadField.id]: activityLead?.id?.value };\n      } else if (!activityLead && selectedBobject?.id?.typeName === BobjectTypes.Lead) {\n        defaultFieldValues = { ...defaultFieldValues, [leadField.id]: selectedBobject?.id?.value };\n      } else if (!activityLead && !selectedBobject && leadField?.required && leads?.length > 0) {\n        defaultFieldValues = { ...defaultFieldValues, [leadField.id]: leads[0]?.id.value };\n      }\n    }\n\n    if (noteField && fields[noteField.id] === undefined) {\n      defaultFieldValues = { ...defaultFieldValues, [noteField.id]: activityNote };\n    }\n\n    if (Object.keys(defaultFieldValues)?.length !== 0) {\n      setValue('fields', defaultFieldValues);\n    }\n  }, [\n    dateField,\n    leadField,\n    selectedBobject,\n    activityLead,\n    noteField,\n    customActivityFields?.length,\n    leads,\n  ]);\n\n  const fields =\n    dataModel && customTask\n      ? customTask?.fields\n          .map(f => ({\n            ...dataModel?.findFieldById(f.bobjectFieldId),\n            required: f.required,\n          }))\n          .sort((f1, f2) => f2.ordering - f1.ordering)\n      : [];\n\n  const finalFields: BobjectFieldDataModel[] = [\n    { ...dateField, required: true },\n    ...fields,\n    noteField,\n  ]\n    .filter(f => f?.isEnabled)\n    .map(f => ({ ...f, type: f?.fieldType }))\n    .map(f => {\n      if (f?.fieldType === 'PICKLIST' || f?.fieldType === 'MULTIPICKLIST') {\n        return {\n          ...f,\n          values: dataModel.findValuesByFieldId(f.id).map(v => ({ ...v, enabled: v.isEnabled })),\n        };\n      }\n      return f;\n    });\n\n  const submitForm = (values: FormValues) => {\n    if (!isEdition) {\n      logCustomActivity(modalData, values?.fields, cleanAndClose, true);\n    } else {\n      editCustomActivity(activity, modalData, values?.fields, cleanAndClose);\n    }\n  };\n\n  const cleanAndClose = () => {\n    reset();\n    setValue('fields', {});\n    closeQuickLogModal();\n  };\n\n  const handleDelete = () => {\n    openDeleteModal(\n      activity,\n      false,\n      () => {},\n      () => {\n        modalData?.onSubmit?.();\n        closeQuickLogModal?.();\n      },\n    );\n  };\n\n  return (\n    <Modal className={styles.modal} open onClose={cleanAndClose} width={342}>\n      <ModalHeader className={styles.header}>\n        <div className={styles.title}>\n          <Icon name={customTask?.icon} size={24} color=\"peanut\" />\n          {isEdition\n            ? t('editTitle', { customTask: customTask?.name })\n            : t('logTitle', { customTask: customTask?.name })}\n        </div>\n\n        <IconButton name=\"cross\" color=\"bloobirds\" size={24} onClick={cleanAndClose} />\n      </ModalHeader>\n      <form onSubmit={handleSubmit(submitForm)}>\n        <main className={styles.content}>\n          <LeadSelector\n            control={control}\n            leadFieldId={leadField?.id}\n            leads={leads}\n            required={leadField?.required}\n          />\n          {finalFields.map((field, idx) => {\n            return (\n              <div key={field.id + '-' + idx}>\n                {/*@ts-ignore*/}\n                <FormField control={control} {...field} size=\"medium\" />\n              </div>\n            );\n          })}\n        </main>\n        <ModalFooter>\n          <div className={styles.footer_buttons}>\n            <Button\n              size=\"small\"\n              uppercase={false}\n              variant=\"clear\"\n              color=\"tomato\"\n              onClick={\n                isEdition\n                  ? () => {\n                      handleDelete();\n                      mixpanel.track(MIXPANEL_EVENTS.CLICK_ON_DELETE_CUSTOM_ACTIVITY);\n                    }\n                  : cleanAndClose\n              }\n            >\n              {isEdition ? t('delete') : t('cancel')}\n            </Button>\n            <Button size=\"small\" uppercase={false} type=\"submit\" disabled={isSubmitting}>\n              {isEdition ? t('save') : t('create')}\n            </Button>\n          </div>\n        </ModalFooter>\n      </form>\n    </Modal>\n  );\n};\n\nexport const QuickLogModal = () => {\n  const { isOpen, ...rest } = useQuickLogActivity();\n  return isOpen ? <QuickLogModalContent isOpen={isOpen} {...rest} /> : <></>;\n};\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","LeadSelector","_ref","control","leadFieldId","leads","required","_useTranslation","useTranslation","keyPrefix","t","_useController","useController","name","concat","rules","value","message","_useController$field","field","onChange","error","fieldState","_jsxs","Select","placeholder","width","children","_jsx","Item","map","lead","idx","id","fullName","getTextFromLogicRole","LEAD_FIELDS_LOGIC_ROLE","FULL_NAME","QuickLogModalContent","_ref2","_getFieldByLogicRole","isOpen","modalData","logCustomActivity","editCustomActivity","closeQuickLogModal","_ref3","customTask","selectedBobject","activity","isEdition","dataModel","useDataModel","_useConfirmDeleteModa","useConfirmDeleteModal","openDeleteModal","dateField","findFieldByLogicRole","ACTIVITY_FIELDS_LOGIC_ROLE","DATETIME","leadField","LEAD","noteField","NOTE","customActivityFields","fields","_activity$raw","_activity$raw$content","_defineProperty","bobjectFieldId","raw","contents","activityLead","getFieldByLogicRole","referencedBobject","activityNote","_useTranslation2","_useForm","useForm","defaultValues","handleSubmit","isSubmitting","formState","setValue","watch","reset","useEffect","removeScrollOfBox","recoverScrollOfBox","_Object$keys3","defaultFieldValues","_objectSpread","reduce","acc","f","_Object$keys","Object","keys","_Object$keys2","_slicedToArray","key","undefined","Date","_selectedBobject$id","_activityLead$id","typeName","BobjectTypes","Lead","_selectedBobject$id2","length","_leads$","findFieldById","sort","f1","f2","ordering","finalFields","_toConsumableArray","filter","isEnabled","fieldType","values","findValuesByFieldId","v","enabled","submitForm","cleanAndClose","handleDelete","_modalData$onSubmit","onSubmit","call","Modal","className","styles","modal","open","onClose","ModalHeader","header","title","Icon","icon","size","color","IconButton","onClick","content","FormField","ModalFooter","footer_buttons","Button","uppercase","variant","mixpanel","track","MIXPANEL_EVENTS","CLICK_ON_DELETE_CUSTOM_ACTIVITY","disabled","QuickLogModal","_useQuickLogActivity","useQuickLogActivity","rest","_objectWithoutProperties","_excluded","_Fragment"],"mappings":"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"}