{"version":3,"file":"index.js","sources":["../../../../node_modules/style-inject/dist/style-inject.es.js","../src/components/transition/transition.tsx","../src/components/virtualInfiniteScroll/virtualInfiniteScroll.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport styles from './transition.module.css';\n\nconst classNames: any = {\n  fade: {\n    appear: styles._fade_enter,\n    appearActive: styles._fade_enter_active,\n    enter: styles._fade_enter,\n    enterActive: styles._fade_enter_active,\n    exit: styles._fade_exit,\n    exitActive: styles._fade_exit_active,\n  },\n};\n\ninterface TransitionProps {\n  children: React.ReactNode;\n  visible: boolean;\n  type: string;\n}\n\nconst Transition = ({ children, visible, type }: TransitionProps) => (\n  <CSSTransition appear in={visible} unmountOnExit timeout={300} classNames={classNames[type]}>\n    {children}\n  </CSSTransition>\n);\n\nexport default Transition;\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { Skeleton } from '@bloobirds-it/flamingo-ui';\nimport { recoverScrollOfBox, removeScrollOfBox } from '@bloobirds-it/utils';\nimport { useVirtualizer } from '@tanstack/react-virtual';\n\nimport Transition from '../transition/transition';\n\ntype VirtualInfiniteScrollProps = {\n  rows: any[];\n  totalRows: number;\n  isFetchingData?: boolean;\n  fetchNextPage?: () => void;\n  children: (data: any, hasNext: boolean, isFirst: boolean, selected?: boolean) => any;\n  hasNextItem?: (index: number) => boolean;\n  parentRef: React.RefObject<HTMLDivElement>;\n  footer?: (scrollToTop: () => void) => React.ReactNode;\n  contentSkeleton?: () => React.ReactNode;\n  loaderSkeleton?: () => React.ReactNode;\n  estimateSize?: number;\n  estimatedSkeletonHeight?: number;\n  fixedHeight?: boolean;\n  enabledArrowNavigation?: boolean;\n  onNavigation?: (data: any, redirect: false) => void;\n  enableSelectedBackground?: boolean;\n  rowsLength?: number;\n};\n\nconst VirtualInfiniteScroll = ({\n  rows,\n  totalRows,\n  isFetchingData,\n  fetchNextPage,\n  children,\n  hasNextItem,\n  parentRef,\n  footer,\n  contentSkeleton,\n  loaderSkeleton = () => (\n    <Skeleton variant=\"rect\" key={'skeletonItem'} width=\"100%\" height=\"40px\" />\n  ),\n  estimateSize = 40,\n  estimatedSkeletonHeight = 40,\n  fixedHeight = false,\n  enabledArrowNavigation,\n  onNavigation,\n  enableSelectedBackground = false,\n  rowsLength,\n}: VirtualInfiniteScrollProps) => {\n  const prevRows = useRef(rows?.length || 0);\n  const [loading, setLoading] = useState(false);\n  const [selectedItemIndex, setSelectedItemIndex] = useState(null);\n\n  rowsLength = rowsLength ?? rows?.length;\n\n  const hasNextPage = useMemo(() => {\n    return !(rowsLength === totalRows);\n  }, [rowsLength, totalRows]);\n  const dataCount = hasNextPage ? rowsLength + 1 : rowsLength;\n\n  const rowVirtualizer = useVirtualizer({\n    count: dataCount,\n    getScrollElement: () => parentRef?.current,\n    estimateSize: () => estimateSize,\n    overscan: 3,\n  });\n\n  function handleItemClick(index) {\n    setSelectedItemIndex(index); // Actualiza el índice del elemento seleccionado\n  }\n\n  function handleKeyDown(event) {\n    switch (event.key) {\n      case 'ArrowUp': {\n        const targetIndex = Math.max(0, selectedItemIndex - 1);\n        rowVirtualizer?.scrollToIndex(targetIndex ?? 0);\n        setSelectedItemIndex(targetIndex);\n\n        onNavigation?.(rows[targetIndex], false);\n        break;\n      }\n      case 'ArrowDown': {\n        // Determinar índice objetivo\n        const virtualItems = rowVirtualizer.getVirtualItems();\n        const currentIndex = virtualItems.findIndex(item => item.index === selectedItemIndex);\n        const targetIndex =\n          currentIndex < virtualItems.length - 1 ? virtualItems[currentIndex + 1].index : null;\n        if (targetIndex !== null && targetIndex < dataCount) {\n          rowVirtualizer.scrollToIndex((targetIndex ?? 0) + 1);\n          setSelectedItemIndex(targetIndex);\n\n          onNavigation?.(rows[targetIndex], false);\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  useEffect(() => {\n    if (enabledArrowNavigation && selectedItemIndex !== null) {\n      document.addEventListener('keydown', handleKeyDown);\n      //removeScrollOfBox();\n    }\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n      //recoverScrollOfBox();\n    };\n  }, [enabledArrowNavigation, selectedItemIndex]); // Asegúrate de volver a suscribir el evento cuando cambie el índice del elemento seleccionado\n\n  useEffect(() => {\n    const [lastItem] = [...rowVirtualizer.getVirtualItems()].reverse();\n    if (!lastItem) {\n      return;\n    }\n    if (lastItem.index >= rows?.length - 1 && hasNextPage && !isFetchingData && !loading) {\n      setLoading(true);\n      fetchNextPage?.();\n    }\n  }, [\n    hasNextPage,\n    fetchNextPage,\n    rows?.length,\n    isFetchingData,\n    rowVirtualizer.getVirtualItems(),\n    loading,\n    totalRows,\n  ]);\n\n  useEffect(() => {\n    if (rows?.length > prevRows?.current) {\n      setLoading(false);\n      prevRows.current = rows?.length;\n    }\n  }, [rows?.length]);\n\n  const scrollHeight = parentRef?.current?.scrollHeight;\n  if (contentSkeleton && (isFetchingData || scrollHeight === undefined || scrollHeight === 0)) {\n    return (\n      <Transition type=\"fade\" visible={true}>\n        {contentSkeleton()}\n      </Transition>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        height: rowVirtualizer.getTotalSize() + (loading ? estimatedSkeletonHeight || 100 : 0),\n        width: '100%',\n        position: 'relative',\n      }}\n      onMouseEnter={removeScrollOfBox}\n      onMouseLeave={recoverScrollOfBox}\n    >\n      {rowVirtualizer.getVirtualItems().map(virtualItem => {\n        const isLoaderRow = virtualItem.index > rows?.length - 1;\n        const data = rows[virtualItem.index];\n        const showNext =\n          (hasNextItem && hasNextItem(virtualItem.index)) ?? !!rows[virtualItem.index + 1];\n\n        return (\n          <div\n            key={virtualItem.key}\n            data-index={virtualItem.index}\n            ref={fixedHeight ? undefined : rowVirtualizer.measureElement}\n            style={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              width: '100%',\n              height: fixedHeight ? `${virtualItem.size}px` : undefined,\n              transform: `translateY(${virtualItem.start}px)`,\n              background:\n                virtualItem.index === selectedItemIndex && enableSelectedBackground\n                  ? 'var(--softGray)'\n                  : 'transparent',\n            }}\n            onClick={() => handleItemClick(virtualItem.index)}\n          >\n            {isLoaderRow ? (\n              hasNextPage ? (\n                <div style={{ height: `${estimateSize}px` }}>\n                  <Transition type=\"fade\" visible={true}>\n                    {loaderSkeleton()}\n                  </Transition>\n                </div>\n              ) : (\n                footer && (\n                  <div style={{ height: `${estimateSize}px` }}>\n                    {footer(() => rowVirtualizer.scrollToIndex(0))}\n                  </div>\n                )\n              )\n            ) : (\n              children(\n                data,\n                showNext,\n                virtualItem.index === 0,\n                virtualItem.index === selectedItemIndex,\n              )\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default VirtualInfiniteScroll;\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","classNames","fade","appear","styles","_fade_enter","appearActive","_fade_enter_active","enter","enterActive","exit","_fade_exit","exitActive","_fade_exit_active","Transition","_ref","children","visible","_jsx","CSSTransition","unmountOnExit","timeout","VirtualInfiniteScroll","_rowsLength","_parentRef$current","rows","totalRows","isFetchingData","fetchNextPage","hasNextItem","parentRef","footer","contentSkeleton","_ref$loaderSkeleton","loaderSkeleton","Skeleton","variant","width","height","_ref$estimateSize","estimateSize","_ref$estimatedSkeleto","estimatedSkeletonHeight","_ref$fixedHeight","fixedHeight","enabledArrowNavigation","onNavigation","_ref$enableSelectedBa","enableSelectedBackground","rowsLength","prevRows","useRef","length","_useState","useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","selectedItemIndex","setSelectedItemIndex","hasNextPage","useMemo","dataCount","rowVirtualizer","useVirtualizer","count","getScrollElement","current","overscan","handleItemClick","index","handleKeyDown","event","key","targetIndex","Math","max","scrollToIndex","virtualItems","getVirtualItems","currentIndex","findIndex","item","useEffect","addEventListener","removeEventListener","_reverse","_toConsumableArray","reverse","_reverse2","lastItem","scrollHeight","undefined","getTotalSize","position","onMouseEnter","removeScrollOfBox","onMouseLeave","recoverScrollOfBox","map","virtualItem","_ref2","isLoaderRow","data","showNext","measureElement","top","left","concat","size","transform","start","background","onClick"],"mappings":"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"}