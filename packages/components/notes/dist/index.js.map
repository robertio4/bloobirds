{"version":3,"file":"index.js","sources":["../../../../node_modules/style-inject/dist/style-inject.es.js","../src/components/noteForm/noteForm.utils.ts","../src/components/noteForm/noteForm.tsx","../src/components/note/note.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import {\n  BobjectTypes,\n  COMPANY_FIELDS_LOGIC_ROLE,\n  LEAD_FIELDS_LOGIC_ROLE,\n  OPPORTUNITY_FIELDS_LOGIC_ROLE,\n} from '@bloobirds-it/types';\nimport { getTextFromLogicRole } from '@bloobirds-it/utils';\n\nexport function onBobjectChange(bobject, relatedOnChange, setNameSelected) {\n  relatedOnChange(bobject?.rawBobject?.id);\n  if (bobject?.bobjectType === BobjectTypes.Company) {\n    setNameSelected(\n      bobject?.companyName || getTextFromLogicRole(bobject, COMPANY_FIELDS_LOGIC_ROLE.NAME),\n    );\n  } else if (bobject?.bobjectType === BobjectTypes.Lead) {\n    setNameSelected(\n      bobject?.fullName || getTextFromLogicRole(bobject, LEAD_FIELDS_LOGIC_ROLE.FULL_NAME),\n    );\n  } else if (bobject?.bobjectType === BobjectTypes.Opportunity) {\n    setNameSelected(\n      bobject?.name || getTextFromLogicRole(bobject, OPPORTUNITY_FIELDS_LOGIC_ROLE.NAME),\n    );\n  }\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useController, useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { BobjectSelector } from '@bloobirds-it/bobjects';\nimport { CopilotSummary } from '@bloobirds-it/copilot';\nimport { Button, Icon, IconButton, Spinner, Text, useToasts } from '@bloobirds-it/flamingo-ui';\nimport { useCopilotEnabled, useDebouncedCallback } from '@bloobirds-it/hooks';\nimport {\n  deserialize,\n  EditorToolbar,\n  EditorToolbarControlsSection,\n  EditorToolbarFontStylesSection,\n  EditorToolbarListsSection,\n  EditorToolbarTextMarksSection,\n  MyEditor,\n  RichTextEditor,\n  serialize,\n  useRichTextEditorPlugins,\n} from '@bloobirds-it/rich-text-editor';\nimport {\n  ACTIVITY_FIELDS_LOGIC_ROLE,\n  ACTIVITY_MAIN_NOTE_VALUES_LOGIC_ROLE,\n  ACTIVITY_TYPES_VALUES_LOGIC_ROLE,\n  ActivityInsights,\n  BOBJECT_TYPES,\n  BobjectId,\n  COMPANY_FIELDS_LOGIC_ROLE,\n  LEAD_FIELDS_LOGIC_ROLE,\n  OPPORTUNITY_FIELDS_LOGIC_ROLE,\n} from '@bloobirds-it/types';\nimport { api, isHtml, createParagraph } from '@bloobirds-it/utils';\nimport { insertNodes, removeNodes } from '@udecode/plate';\nimport clsx from 'clsx';\nimport { TFunction } from 'i18next';\nimport useSWR from 'swr';\n\nimport styles from './noteForm.module.css';\nimport { onBobjectChange } from './noteForm.utils';\n\nconst mainNoteField = {\n  [BOBJECT_TYPES.COMPANY]: [COMPANY_FIELDS_LOGIC_ROLE.MAIN_NOTE],\n  [BOBJECT_TYPES.LEAD]: [LEAD_FIELDS_LOGIC_ROLE.MAIN_NOTE],\n  [BOBJECT_TYPES.OPPORTUNITY]: [OPPORTUNITY_FIELDS_LOGIC_ROLE.MAIN_NOTE],\n};\n\nconst defaultNewNoteValueTitle = (t: TFunction) => [\n  {\n    type: 'h2',\n    children: [\n      {\n        text: t('newNote'),\n      },\n    ],\n  },\n];\n\nexport interface NoteFormProps {\n  activityId: BobjectId;\n  title?: string;\n  content?: any;\n  mainNote?: string;\n  related?: string;\n  relatedName?: string;\n  accountId: string;\n  onSave?: (id?: string) => void;\n  bodyPlaceholder?: string;\n  activityType?: string;\n  alternativeFooter?: JSX.Element;\n  showFooter?: boolean;\n  fitAllHeight?: boolean;\n  copilotAnalysis?: string;\n  setIsLoading?: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport const NoteForm = (props: NoteFormProps) => {\n  const {\n    activityId,\n    title: noteTitle,\n    content: noteContent,\n    mainNote: noteMainNoteValue,\n    related,\n    relatedName,\n    accountId,\n    onSave,\n    bodyPlaceholder,\n    activityType,\n    alternativeFooter,\n    showFooter = true,\n    fitAllHeight,\n    setIsLoading,\n    copilotAnalysis,\n  } = props;\n  const { t } = useTranslation('translation', { keyPrefix: 'notes' });\n\n  const { control, getValues, handleSubmit, watch } = useForm();\n  const [nameSelected, setNameSelected] = useState<string>(relatedName);\n  const [hasChanges, setHasChanges] = useState<boolean>(false);\n  const isEditionModal = useRef(!!activityId);\n\n  const isNote =\n    activityType !== ACTIVITY_TYPES_VALUES_LOGIC_ROLE.MEETING &&\n    activityType !== ACTIVITY_TYPES_VALUES_LOGIC_ROLE.CALL;\n\n  const isCall = activityType === ACTIVITY_TYPES_VALUES_LOGIC_ROLE.CALL;\n  const isMeeting = activityType === ACTIVITY_TYPES_VALUES_LOGIC_ROLE.MEETING;\n\n  const isAnActivityFieldNote = isMeeting || isCall;\n\n  const { createToast } = useToasts();\n  const [isSubmitting, setIsSubmitting] = useState<boolean>();\n\n  useEffect(() => {\n    if (setIsLoading) {\n      setIsLoading(isSubmitting);\n    }\n  }, [isSubmitting]);\n\n  const titlePlugins = useRichTextEditorPlugins({\n    singleLine: true,\n  });\n\n  const plugins = useRichTextEditorPlugins({\n    images: false,\n    replaceParagraphs: true,\n  });\n\n  function getTitle() {\n    if (isHtml(noteTitle)) {\n      if (noteTitle && typeof noteTitle === 'string') {\n        return deserialize(noteTitle, {\n          format: 'HTML',\n          plugins: titlePlugins,\n        });\n      } else {\n        return defaultNewNoteValueTitle(t);\n      }\n    } else {\n      if (noteTitle && typeof noteTitle === 'string') {\n        return !isNote ? noteTitle : createParagraph(noteTitle);\n      } else {\n        return defaultNewNoteValueTitle(t);\n      }\n    }\n  }\n\n  const defaultValues = {\n    title: getTitle(),\n    body:\n      noteContent && typeof noteContent === 'string'\n        ? isHtml(noteContent)\n          ? deserialize(noteContent, {\n              format: 'HTML',\n              plugins: plugins,\n            })\n          : createParagraph(noteContent)\n        : null,\n    mainNote: noteMainNoteValue === 'Main note Yes',\n  };\n\n  const {\n    field: { value: title, onChange: titleOnChange },\n  } = useController({\n    control,\n    name: ACTIVITY_FIELDS_LOGIC_ROLE.TITLE,\n    defaultValue: defaultValues.title,\n  });\n\n  const {\n    field: { value: mainNote, onChange: mainNoteOnChange },\n  } = useController({\n    control,\n    name: ACTIVITY_FIELDS_LOGIC_ROLE.MAIN_NOTE,\n    defaultValue: defaultValues.mainNote,\n  });\n\n  const {\n    field: { value: note, onChange: noteOnChange },\n  } = useController({\n    control,\n    name: ACTIVITY_FIELDS_LOGIC_ROLE.NOTE,\n    defaultValue: defaultValues.body,\n  });\n\n  const {\n    field: { onChange: relatedOnChange },\n  } = useController({\n    control,\n    name: 'related',\n    defaultValue: related,\n  });\n\n  const titleValue = watch(ACTIVITY_FIELDS_LOGIC_ROLE.TITLE);\n  const noteValue = watch(ACTIVITY_FIELDS_LOGIC_ROLE.NOTE);\n\n  useEffect(() => {\n    if (!hasChanges && (titleValue || noteValue)) {\n      if (\n        JSON.stringify(defaultValues.title) !== JSON.stringify(titleValue) ||\n        JSON.stringify(defaultValues.body) !== JSON.stringify(noteValue)\n      ) {\n        setHasChanges(true);\n      }\n    }\n  }, [titleValue, noteValue]);\n\n  const onSubmit = () => {\n    setIsSubmitting(true);\n    const { related, ...rest } = getValues();\n    const isMainNote = rest[ACTIVITY_FIELDS_LOGIC_ROLE.MAIN_NOTE];\n    const dataToCreate = {\n      [ACTIVITY_FIELDS_LOGIC_ROLE.NOTE]: rest[ACTIVITY_FIELDS_LOGIC_ROLE.NOTE]\n        ? serialize(rest[ACTIVITY_FIELDS_LOGIC_ROLE.NOTE], {\n            format: 'AST',\n            plugins,\n          })\n        : null,\n    };\n    if (isNote) {\n      dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.TITLE] = rest[ACTIVITY_FIELDS_LOGIC_ROLE.TITLE]\n        ? serialize(rest[ACTIVITY_FIELDS_LOGIC_ROLE.TITLE], {\n            format: 'AST',\n            plugins,\n          })\n        : null;\n\n      dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.MAIN_NOTE] = isMainNote\n        ? ACTIVITY_MAIN_NOTE_VALUES_LOGIC_ROLE.YES\n        : ACTIVITY_MAIN_NOTE_VALUES_LOGIC_ROLE.NO;\n\n      dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.TYPE] = ACTIVITY_TYPES_VALUES_LOGIC_ROLE.NOTE;\n    }\n    let relatedBobjectType: string;\n    if (related && isNote) {\n      if (related?.includes('Lead')) {\n        relatedBobjectType = BOBJECT_TYPES.LEAD;\n        dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.LEAD] = related;\n        dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.COMPANY] = null;\n        dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.OPPORTUNITY] = null;\n      } else if (related?.includes('Company')) {\n        relatedBobjectType = BOBJECT_TYPES.COMPANY;\n        dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.COMPANY] = related;\n        dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.LEAD] = null;\n        dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.OPPORTUNITY] = null;\n      } else if (related?.includes('Opportunity')) {\n        relatedBobjectType = BOBJECT_TYPES.OPPORTUNITY;\n        dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.OPPORTUNITY] = related;\n        dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.COMPANY] = null;\n        dataToCreate[ACTIVITY_FIELDS_LOGIC_ROLE.LEAD] = null;\n      }\n    }\n\n    const params = { duplicateValidation: true };\n    if (!isEditionModal.current) {\n      api\n        .post(`/bobjects/${accountId}/Activity`, {\n          contents: { ...dataToCreate },\n          params,\n        })\n        .then(activityCreated => {\n          setIsSubmitting(false);\n          //createToast({ message: 'Note created successfully', type: 'success' });\n          if (isMainNote && related && relatedBobjectType && activityCreated?.data) {\n            api.patch(`/bobjects/${related}/raw`, {\n              contents: {\n                [mainNoteField[relatedBobjectType]]: [activityCreated?.data?.value],\n              },\n              params,\n            });\n          } else if (!isMainNote && related && relatedBobjectType) {\n            api.patch(`/bobjects/${related}/raw`, {\n              contents: {\n                [mainNoteField[relatedBobjectType]]: null,\n              },\n              params,\n            });\n          }\n          onSave?.(activityCreated?.data?.value);\n        })\n        .catch(() => {\n          setIsSubmitting(false);\n          createToast({ message: t('toasts.errorCreating'), type: 'error' });\n        });\n    } else {\n      api\n        .patch(`/bobjects/${activityId?.value}/raw`, {\n          contents: dataToCreate,\n          params: {},\n        })\n        .then(() => {\n          setIsSubmitting(false);\n          //createToast({ message: 'Note updated successfully.', type: 'success' });\n          if (isMainNote && related && relatedBobjectType) {\n            api.patch(`/bobjects/${related}/raw`, {\n              contents: {\n                [mainNoteField[relatedBobjectType]]: [activityId?.value],\n              },\n            });\n          } else if (!isMainNote && related && relatedBobjectType) {\n            api.patch(`/bobjects/${related}/raw`, {\n              contents: {\n                [mainNoteField[relatedBobjectType]]: null,\n              },\n            });\n          }\n          onSave?.(activityId?.value);\n        })\n        .catch(() => {\n          setIsSubmitting(false);\n          createToast({ message: t('toasts.errorUpdating'), type: 'error' });\n        });\n    }\n  };\n\n  const saveNote = useDebouncedCallback(\n    () => {\n      onSubmit();\n      isEditionModal.current = true;\n    },\n    500,\n    [onSubmit],\n  );\n\n  useEffect(() => {\n    if (hasChanges) {\n      saveNote();\n    }\n  }, [JSON.stringify(noteValue)]);\n\n  const alternativeFooterComponent = alternativeFooter\n    ? React.cloneElement(alternativeFooter, {\n        onSubmit: handleSubmit(onSubmit),\n      })\n    : null;\n\n  const containerClass = clsx(styles.container, {\n    [styles.fullHeight]: fitAllHeight,\n  });\n\n  function getBackgroundColor() {\n    if (isMeeting) return 'var(--lightestMeeting)';\n    if (isCall) return 'var(--lightestCall)';\n    return 'var(--banana)';\n  }\n\n  const isCopilotEnabled = useCopilotEnabled(accountId);\n\n  const hasAi = !!copilotAnalysis;\n\n  const { data: activityInsights } = useSWR(\n    hasAi && `/copilot/transcript/insights/${activityId.objectId}`,\n    key => api.get<ActivityInsights>(key).then(res => res.data),\n  );\n\n  const copyToNote = (value: string) => {\n    if (noteValue.length === 1 && noteValue[0].children[0].text === '') {\n      removeNodes(bodyEditor, { at: [0] });\n      insertNodes(bodyEditor, createParagraph(value)?.[0], { at: [0] });\n    } else {\n      removeNodes(bodyEditor, { at: [0] });\n      insertNodes(bodyEditor, [...noteValue, ...createParagraph(''), ...createParagraph(value)], {\n        at: [0],\n      });\n    }\n  };\n\n  const [bodyEditor, setBodyEditor] = useState<MyEditor>(null);\n\n  return (\n    <div className={containerClass}>\n      <div className={styles.detail_content_container}>\n        <div className={styles.editor}>\n          <span className={styles.title_container}>\n            {!isCall && (\n              <div\n                className={styles.noteIcon}\n                style={{\n                  backgroundColor: getBackgroundColor(),\n                }}\n              >\n                {isMeeting && <Icon name=\"calendar\" color=\"extraMeeting\" size={16} />}\n                {isNote && <Icon name=\"noteAction\" color=\"peanut\" size={16} />}\n              </div>\n            )}\n            {isAnActivityFieldNote ? (\n              <Text weight=\"bold\" className={styles.title}>\n                {noteTitle}\n              </Text>\n            ) : (\n              <RichTextEditor\n                id={'note-detail-title'}\n                defaultValue={title}\n                placeholder={t('titlePlaceholder')}\n                plugins={titlePlugins}\n                onChange={titleOnChange}\n                style={{\n                  padding: '4px 12px',\n                }}\n              />\n            )}\n            {isSubmitting && (\n              <div className={styles.isSavingContainer}>\n                <Spinner size={11} name=\"loadingCircle\" color=\"softPeanut\" />\n                <Text size=\"xs\" color=\"softPeanut\">\n                  {t('saving')}\n                </Text>\n              </div>\n            )}\n          </span>\n          {isCopilotEnabled && activityInsights && (\n            <CopilotSummary\n              summary={activityInsights.summary}\n              activityId={activityId}\n              buttonIcon=\"arrowDown\"\n              copyToNote={copyToNote}\n              isInPreview={true}\n            />\n          )}\n          {!isCopilotEnabled || (!activityInsights && <span className={styles.divider} />)}\n          <RichTextEditor\n            id={'note-detail-body'}\n            defaultValue={note}\n            setEditor={setBodyEditor}\n            plugins={plugins}\n            placeholder={bodyPlaceholder || t('placeholder')}\n            onChange={noteOnChange}\n            style={{\n              padding: '12px 28px 4px 28px',\n            }}\n          >\n            {editor => (\n              <>\n                <div className={styles.body_wrapper}>{editor}</div>\n                <div className={styles.toolbar}>\n                  {/* @ts-ignore */}\n                  <EditorToolbar backgroundColor=\"var(--peanut) !important\">\n                    <EditorToolbarControlsSection color=\"peanut\" />\n                    <EditorToolbarFontStylesSection color=\"peanut\" />\n                    <EditorToolbarTextMarksSection color=\"peanut\" />\n                    <EditorToolbarListsSection color=\"peanut\" />\n                  </EditorToolbar>\n                </div>\n              </>\n            )}\n          </RichTextEditor>\n        </div>\n        {showFooter && (\n          <div>\n            <div\n              className={clsx(styles.bottom_bar, {\n                [styles.bottom_bar_alternative]: !!alternativeFooter,\n              })}\n            >\n              <span className={styles.record_related}>\n                {isNote && (\n                  <div className={styles.bobject_selector}>\n                    <BobjectSelector\n                      accountId={accountId}\n                      selected={nameSelected}\n                      id={activityId?.value}\n                      onBobjectChange={bobject =>\n                        onBobjectChange(bobject, relatedOnChange, setNameSelected)\n                      }\n                    />\n                  </div>\n                )}\n              </span>\n              {alternativeFooter ? (\n                alternativeFooterComponent\n              ) : (\n                <span>\n                  {isNote && (\n                    <IconButton\n                      name={mainNote ? 'starChecked' : 'starUnchecked'}\n                      onClick={() => {\n                        mainNoteOnChange(!mainNote);\n                      }}\n                      color=\"bloobirds\"\n                      size={24}\n                      className={styles.mainNote}\n                    />\n                  )}\n                  <Button\n                    size=\"small\"\n                    onClick={() => {\n                      handleSubmit(onSubmit)();\n                    }}\n                    disabled={isSubmitting || !hasChanges}\n                  >\n                    {isSubmitting ? <Spinner name=\"loadingCircle\" size={12} /> : t('save')}\n                  </Button>\n                </span>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { useEffect, useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Spinner } from '@bloobirds-it/flamingo-ui';\nimport {\n  ACTIVITY_FIELDS_LOGIC_ROLE,\n  ACTIVITY_TYPES_VALUES_LOGIC_ROLE,\n  Bobject,\n  COMPANY_FIELDS_LOGIC_ROLE,\n  LEAD_FIELDS_LOGIC_ROLE,\n  OPPORTUNITY_FIELDS_LOGIC_ROLE,\n} from '@bloobirds-it/types';\nimport { getFieldByLogicRole, getTextFromLogicRole } from '@bloobirds-it/utils';\n\nimport { NoteForm } from '../noteForm/noteForm';\nimport styles from './note.module.css';\n\nexport interface NoteProps {\n  activity?: Bobject;\n  title?: string;\n  content?: any;\n  mainNote?: string;\n  relatedCompany?: Bobject;\n  relatedLead?: Bobject;\n  relatedOpportunity?: Bobject;\n  accountId: string;\n  onSave?: (id?: string) => void;\n  bodyPlaceholder?: string;\n  alternativeFooter?: JSX.Element;\n}\n\n/**\n * This is the main note wrapper that will take the data and initialize the noteForm\n * You must send an activity if you want to be on edition mode.\n * @constructor\n */\nexport const Note = (props: NoteProps) => {\n  const {\n    activity: propsActivity,\n    title,\n    content,\n    mainNote,\n    relatedCompany: defaultRelatedCompany,\n    relatedLead: defaultRelatedLead,\n    relatedOpportunity: defaultRelatedOpportunity,\n    bodyPlaceholder,\n    accountId,\n    onSave,\n    alternativeFooter,\n  } = props;\n\n  const activity = useMemo(() => propsActivity, [propsActivity]);\n  const { t } = useTranslation('translation', { keyPrefix: 'notes' });\n  const [unmountNote, setUnmountNote] = useState(false);\n  const getTitle = () => {\n    if (activityType === ACTIVITY_TYPES_VALUES_LOGIC_ROLE.CALL) {\n      const direction = getTextFromLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.DIRECTION);\n      return direction === 'Outgoing' ? t('outgoingCall') : t('incomingCall');\n    } else {\n      return getTextFromLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.TITLE);\n    }\n  };\n\n  const noteContent = content || getTextFromLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.NOTE);\n  const noteMainNoteValue =\n    mainNote || getTextFromLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.MAIN_NOTE);\n\n  const relatedCompany = !activity\n    ? defaultRelatedCompany\n    : getFieldByLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.COMPANY)?.referencedBobject;\n  const relatedCompanyName = getTextFromLogicRole(relatedCompany, COMPANY_FIELDS_LOGIC_ROLE.NAME);\n\n  const relatedLead = !activity\n    ? defaultRelatedLead\n    : getFieldByLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.LEAD)?.referencedBobject;\n  const relatedLeadName = getTextFromLogicRole(relatedLead, LEAD_FIELDS_LOGIC_ROLE.FULL_NAME);\n\n  const relatedOpportunity = !activity\n    ? defaultRelatedOpportunity\n    : getFieldByLogicRole(activity, OPPORTUNITY_FIELDS_LOGIC_ROLE.NAME)?.referencedBobject;\n  const relatedOpportunityName = getTextFromLogicRole(\n    relatedOpportunity,\n    OPPORTUNITY_FIELDS_LOGIC_ROLE.NAME,\n  );\n\n  const defaultRelated = relatedLead\n    ? relatedLead?.id?.value\n    : relatedCompany\n    ? relatedCompany?.id?.value\n    : relatedOpportunity\n    ? relatedOpportunity?.id?.value\n    : null;\n  const defaultName = relatedLead\n    ? // @ts-ignore\n      relatedLead?.fullName || relatedLeadName || t('untitledLead')\n    : relatedCompany\n    ? // @ts-ignore\n      relatedCompany?.name || relatedCompanyName || t('untitledCompany')\n    : relatedOpportunity\n    ? // @ts-ignore\n      relatedOpportunity?.name || relatedOpportunityName || t('untitledOpportunity')\n    : null;\n\n  useEffect(() => {\n    setUnmountNote(true);\n    setTimeout(() => {\n      setUnmountNote(false);\n    }, 1);\n  }, [activity]);\n\n  //Check if the activity is a meeting and if it has a note\n  const activityType = getFieldByLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.TYPE)\n    ?.valueLogicRole;\n  const noteTitle = title || getTitle();\n\n  const copilotAnalysis = getTextFromLogicRole(activity, ACTIVITY_FIELDS_LOGIC_ROLE.COPILOT_ANALYSIS);\n\n  return !unmountNote ? (\n    <NoteForm\n      activityType={activityType}\n      accountId={accountId}\n      title={noteTitle}\n      content={noteContent}\n      mainNote={noteMainNoteValue}\n      activityId={activity?.id}\n      related={defaultRelated}\n      relatedName={defaultName}\n      onSave={onSave}\n      bodyPlaceholder={bodyPlaceholder}\n      alternativeFooter={alternativeFooter}\n      copilotAnalysis={copilotAnalysis}\n    />\n  ) : (\n    <div className={styles.loading}>\n      <Spinner name=\"loadingCircle\" />\n    </div>\n  );\n};\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","onBobjectChange","bobject","relatedOnChange","setNameSelected","_bobject$rawBobject","rawBobject","id","bobjectType","BobjectTypes","Company","companyName","getTextFromLogicRole","COMPANY_FIELDS_LOGIC_ROLE","NAME","Lead","fullName","LEAD_FIELDS_LOGIC_ROLE","FULL_NAME","Opportunity","name","OPPORTUNITY_FIELDS_LOGIC_ROLE","mainNoteField","_defineProperty","BOBJECT_TYPES","COMPANY","MAIN_NOTE","LEAD","OPPORTUNITY","defaultNewNoteValueTitle","t","children","text","NoteForm","props","activityId","noteTitle","title","noteContent","content","noteMainNoteValue","mainNote","related","relatedName","accountId","onSave","bodyPlaceholder","activityType","alternativeFooter","_props$showFooter","showFooter","fitAllHeight","setIsLoading","copilotAnalysis","_useTranslation","useTranslation","keyPrefix","_useForm","useForm","control","getValues","handleSubmit","watch","_useState","useState","_useState2","_slicedToArray","nameSelected","_useState3","_useState4","hasChanges","setHasChanges","isEditionModal","useRef","isNote","ACTIVITY_TYPES_VALUES_LOGIC_ROLE","MEETING","CALL","isCall","isMeeting","isAnActivityFieldNote","_useToasts","useToasts","createToast","_useState5","_useState6","isSubmitting","setIsSubmitting","useEffect","titlePlugins","useRichTextEditorPlugins","singleLine","plugins","images","replaceParagraphs","getTitle","isHtml","deserialize","format","createParagraph","defaultValues","body","_useController","useController","ACTIVITY_FIELDS_LOGIC_ROLE","TITLE","defaultValue","_useController$field","field","value","titleOnChange","onChange","_useController2","_useController2$field","mainNoteOnChange","_useController3","NOTE","_useController3$field","note","noteOnChange","_useController4","titleValue","noteValue","JSON","stringify","onSubmit","_getValues","rest","_objectWithoutProperties","_excluded","isMainNote","dataToCreate","serialize","ACTIVITY_MAIN_NOTE_VALUES_LOGIC_ROLE","YES","NO","TYPE","relatedBobjectType","includes","params","duplicateValidation","current","api","post","concat","contents","_objectSpread","then","activityCreated","_activityCreated$data2","data","_activityCreated$data","patch","message","saveNote","useDebouncedCallback","alternativeFooterComponent","React","cloneElement","containerClass","clsx","styles","container","fullHeight","getBackgroundColor","isCopilotEnabled","useCopilotEnabled","hasAi","_useSWR","useSWR","objectId","key","get","res","activityInsights","copyToNote","length","_createParagraph","removeNodes","bodyEditor","at","insertNodes","_toConsumableArray","_useState7","_useState8","setBodyEditor","_jsx","className","_jsxs","detail_content_container","editor","title_container","noteIcon","backgroundColor","Icon","color","size","Text","weight","RichTextEditor","placeholder","padding","isSavingContainer","Spinner","CopilotSummary","summary","buttonIcon","isInPreview","divider","setEditor","_Fragment","body_wrapper","toolbar","EditorToolbar","EditorToolbarControlsSection","EditorToolbarFontStylesSection","EditorToolbarTextMarksSection","EditorToolbarListsSection","bottom_bar","bottom_bar_alternative","record_related","bobject_selector","BobjectSelector","selected","IconButton","onClick","Button","disabled","Note","_getFieldByLogicRole","_getFieldByLogicRole2","_getFieldByLogicRole3","_relatedLead$id","_relatedCompany$id","_relatedOpportunity$i","_getFieldByLogicRole4","propsActivity","activity","defaultRelatedCompany","relatedCompany","defaultRelatedLead","relatedLead","defaultRelatedOpportunity","relatedOpportunity","useMemo","unmountNote","setUnmountNote","direction","DIRECTION","getFieldByLogicRole","referencedBobject","relatedCompanyName","relatedLeadName","relatedOpportunityName","defaultRelated","defaultName","setTimeout","valueLogicRole","COPILOT_ANALYSIS","loading"],"mappings":"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"}