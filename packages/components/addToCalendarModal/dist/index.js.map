{"version":3,"file":"index.js","sources":["../src/addToCalendarModal.constants.ts","../../../../node_modules/style-inject/dist/style-inject.es.js","../src/addToCalendarModal.utils.ts","../src/addToCalendarModal.view.tsx"],"sourcesContent":["export enum methods {\n  METHOD_GOOGLE = 'GOOGLE',\n  METHOD_OUTLOOK = 'OUTLOOK',\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { transformCalendarEventDate } from '@bloobirds-it/utils';\n\nimport { methods } from './addToCalendarModal.constants';\n\nconst formatCalendarDate = (dateTime, method = methods.METHOD_GOOGLE) => {\n  const isMethodGoogle = method === methods.METHOD_GOOGLE;\n  const {\n    year,\n    monthStr: month,\n    hourStr: hour,\n    minStr: min,\n    dayStr: day,\n  } = transformCalendarEventDate(dateTime, isMethodGoogle);\n  return isMethodGoogle\n    ? `${year}${month}${day}T${hour}${min}00Z`\n    : `${year}-${month}-${day}T${hour}:${min}:00`;\n};\n\nexport const buildCalendarLink = (\n  { title, fromDate, toDate, guests },\n  method = methods.METHOD_GOOGLE,\n) => {\n  const fromString = formatCalendarDate(fromDate, method);\n  const toString = formatCalendarDate(toDate, method);\n  const encodedTitle = encodeURI(title);\n  const guestList = Array.isArray(guests) && guests.length > 0 ? guests.join(',') : null;\n  let params;\n\n  const baseUrl =\n    method === methods.METHOD_GOOGLE\n      ? 'https://calendar.google.com/calendar/render'\n      : 'https://outlook.office.com/calendar/deeplink/compose';\n\n  if (method === methods.METHOD_GOOGLE) {\n    params = `action=TEMPLATE&text=${encodedTitle}&dates=${fromString}/${toString}`;\n\n    if (guestList) {\n      params = `${params}&add=${guestList}`;\n    }\n  } else {\n    params = `subject=${encodedTitle}&startdt=${fromString}&enddt=${toString}`;\n\n    if (guestList) {\n      params = `${params}&to=${guestList}`;\n    }\n  }\n\n  return `${baseUrl}?${params}`;\n};\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport {\n  Button,\n  Modal,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalTitle,\n  Spinner,\n  Text,\n} from '@bloobirds-it/flamingo-ui';\nimport { useActiveUserSettings, useAddToCalendar, useDataModel } from '@bloobirds-it/hooks';\nimport {\n  ACTIVITY_FIELDS_LOGIC_ROLE,\n  Bobject,\n  COMPANY_FIELDS_LOGIC_ROLE,\n  LEAD_FIELDS_LOGIC_ROLE,\n  OPPORTUNITY_FIELDS_LOGIC_ROLE,\n} from '@bloobirds-it/types';\nimport { addMinutes, api, formatDate, getValueFromLogicRole } from '@bloobirds-it/utils';\n\nimport { methods } from './addToCalendarModal.constants';\nimport styles from './addToCalendarModal.module.css';\nimport { buildCalendarLink } from './addToCalendarModal.utils';\n\nconst getBobjectData = (id: string) => {\n  return api.get(`/bobjects/${id}/form`).then(response => {\n    return response.data;\n  });\n};\n\nconst AddToCalendarModal = () => {\n  const { closeAddToCalendarModal, addToCalendarState } = useAddToCalendar();\n  const {\n    leadId,\n    companyId,\n    opportunityId,\n    title,\n    dateTime,\n    accountExecutiveId,\n    bobjectType,\n  } = addToCalendarState;\n  const { settings } = useActiveUserSettings();\n  const { t } = useTranslation();\n  const isOutlook = settings?.settings.calendarLinksType !== 'GOOGLE_CALENDAR';\n  const [lead, setLead] = useState<Bobject>(null);\n  const [company, setCompany] = useState<Bobject>(null);\n  const [opportunity, setOpportunity] = useState<Bobject>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const dataModel = useDataModel();\n  const eventTitle = title || t('common.untitledEvent');\n\n  useEffect(() => {\n    if (leadId && (!lead || lead.id.value !== leadId)) {\n      setLoading(true);\n      getBobjectData(leadId).then(response => {\n        setLead(response);\n        setLoading(false);\n      });\n    }\n  }, [leadId, lead]);\n\n  useEffect(() => {\n    if (companyId && (!company || company?.id.value !== companyId)) {\n      setLoading(true);\n      getBobjectData(companyId).then(response => {\n        setCompany(response);\n        setLoading(false);\n      });\n    }\n  }, [companyId, company]);\n\n  useEffect(() => {\n    if (opportunityId && (!opportunity || opportunity?.id.value !== opportunityId)) {\n      setLoading(true);\n      getBobjectData(opportunityId).then(response => {\n        setOpportunity(response);\n        setLoading(false);\n      });\n    }\n  }, [opportunityId, opportunity]);\n\n  const name = useMemo(() => {\n    if (opportunity) {\n      return getValueFromLogicRole(opportunity, OPPORTUNITY_FIELDS_LOGIC_ROLE.NAME);\n    }\n    if (lead) {\n      return getValueFromLogicRole(lead, LEAD_FIELDS_LOGIC_ROLE.FULL_NAME);\n    }\n    if (company) {\n      return getValueFromLogicRole(company, COMPANY_FIELDS_LOGIC_ROLE.NAME);\n    }\n    return '';\n  }, [company, lead, opportunity]);\n\n  const url = useMemo(() => {\n    const eventLeadName = name && `${t('addToCalendarModal.with')} ${name}`;\n    const calendarEventTitle = `${eventTitle}${eventLeadName}`;\n    const leadEmail = getValueFromLogicRole(lead, 'LEAD__EMAIL');\n    const guests = [];\n\n    if (leadEmail && bobjectType === 'Activity') {\n      guests.push(leadEmail);\n    }\n    if (accountExecutiveId && bobjectType === 'Activity') {\n      guests.push(\n        dataModel\n          .findFieldByLogicRole(ACTIVITY_FIELDS_LOGIC_ROLE.ACCOUNT_EXECUTIVE)\n          ?.values?.find(ae => ae.id === accountExecutiveId).name,\n      );\n    }\n\n    return (\n      dateTime &&\n      buildCalendarLink(\n        {\n          title: calendarEventTitle,\n          fromDate: dateTime,\n          toDate: addMinutes(dateTime as number, 30),\n          guests,\n        },\n        isOutlook ? methods.METHOD_OUTLOOK : methods.METHOD_GOOGLE,\n      )\n    );\n  }, [name, title, dateTime, settings, lead]);\n\n  const openLink = () => {\n    window.open(url, '_blank');\n    closeAddToCalendarModal();\n  };\n\n  return (\n    <Modal open onClose={closeAddToCalendarModal} width={500}>\n      <ModalHeader>\n        <ModalTitle>{t('addToCalendarModal.title')}</ModalTitle>\n      </ModalHeader>\n      <ModalContent>\n        <Text color=\"softPeanut\" size=\"m\" align=\"center\">\n          {t('addToCalendarModal.header')}\n        </Text>\n        <div className={styles._main}>\n          <div className={styles._calendar}>\n            <header>\n              <Text align=\"center\" size=\"m\" weight=\"bold\" color=\"white\">\n                {formatDate(dateTime, 'MMM').toUpperCase()}\n              </Text>\n            </header>\n            <div>\n              <Text align=\"center\" size=\"xxl\" weight=\"bold\" color=\"peanut\">\n                {(dateTime as Date)?.getDate()}\n              </Text>\n              <Text align=\"center\" size=\"s\" color=\"peanut\">\n                {formatDate(dateTime, 'hh:mm a').toLowerCase()}\n              </Text>\n            </div>\n          </div>\n          <div className={styles._text}>\n            <Text size=\"l\" weight=\"bold\" color=\"peanut\">\n              {eventTitle}\n            </Text>\n            {loading ? (\n              <Spinner name=\"dots\" />\n            ) : (\n              name && (\n                <Text size=\"m\" color=\"peanut\">\n                  {t('common.with')} {name}\n                </Text>\n              )\n            )}\n          </div>\n        </div>\n      </ModalContent>\n      <ModalFooter>\n        <Button dataTest=\"Form-Close\" onClick={closeAddToCalendarModal} variant=\"tertiary\">\n          {t('common.close')}\n        </Button>\n        <Button onClick={openLink} variant=\"primary\">\n          {t('addToCalendarModal.addToCalendar')}\n        </Button>\n      </ModalFooter>\n    </Modal>\n  );\n};\n\nexport default AddToCalendarModal;\n"],"names":["methods","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","formatCalendarDate","dateTime","method","arguments","length","undefined","METHOD_GOOGLE","isMethodGoogle","_transformCalendarEve","transformCalendarEventDate","year","month","monthStr","hour","hourStr","min","minStr","day","dayStr","concat","buildCalendarLink","_ref","title","fromDate","toDate","guests","fromString","toString","encodedTitle","encodeURI","guestList","Array","isArray","join","params","baseUrl","getBobjectData","id","api","get","then","response","data","AddToCalendarModal","_useAddToCalendar","useAddToCalendar","closeAddToCalendarModal","addToCalendarState","leadId","companyId","opportunityId","accountExecutiveId","bobjectType","_useActiveUserSetting","useActiveUserSettings","settings","_useTranslation","useTranslation","t","isOutlook","calendarLinksType","_useState","useState","_useState2","_slicedToArray","lead","setLead","_useState3","_useState4","company","setCompany","_useState5","_useState6","opportunity","setOpportunity","_useState7","_useState8","loading","setLoading","dataModel","useDataModel","eventTitle","useEffect","value","name","useMemo","getValueFromLogicRole","OPPORTUNITY_FIELDS_LOGIC_ROLE","NAME","LEAD_FIELDS_LOGIC_ROLE","FULL_NAME","COMPANY_FIELDS_LOGIC_ROLE","url","eventLeadName","calendarEventTitle","leadEmail","push","_dataModel$findFieldB","_dataModel$findFieldB2","findFieldByLogicRole","ACTIVITY_FIELDS_LOGIC_ROLE","ACCOUNT_EXECUTIVE","values","find","ae","addMinutes","METHOD_OUTLOOK","openLink","window","open","_jsxs","Modal","onClose","width","children","_jsx","ModalHeader","ModalTitle","ModalContent","Text","color","size","align","className","styles","_main","_calendar","weight","formatDate","toUpperCase","getDate","toLowerCase","_text","Spinner","ModalFooter","Button","dataTest","onClick","variant"],"mappings":"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"}