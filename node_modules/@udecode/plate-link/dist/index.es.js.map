{"version":3,"file":"index.es.js","sources":["../src/utils/createLinkNode.ts","../src/components/LaunchIcon.tsx","../src/components/Link.tsx","../src/components/LinkIcon.tsx","../src/components/LinkOffIcon.tsx","../src/components/ShortTextIcon.tsx","../src/components/FloatingLink/floatingLinkStore.ts","../src/utils/triggerFloatingLinkEdit.ts","../src/components/FloatingLink/FloatingLinkEditButton.tsx","../src/components/FloatingLink/FloatingLinkNewTabInput.tsx","../src/components/FloatingLink/FloatingLinkTextInput.tsx","../src/components/FloatingLink/FloatingLinkUrlInput.tsx","../src/components/FloatingLink/OpenLinkButton.tsx","../src/components/FloatingLink/UnlinkButton.tsx","../../../../node_modules/rollup-plugin-node-globals/src/global.js","../../../../node_modules/process-es6/browser.js","../../../../node_modules/@floating-ui/core/dist/floating-ui.core.esm.js","../../../../node_modules/@floating-ui/dom/dist/floating-ui.dom.esm.js","../../../../node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.esm.js","../../../../node_modules/@floating-ui/react-dom-interactions/dist/floating-ui.react-dom-interactions.esm.js","../../../floating/dist/index.es.js","../src/transforms/submitFloatingLink.ts","../src/components/FloatingLink/useFloatingLinkEnter.ts","../src/components/FloatingLink/useFloatingLinkEscape.ts","../src/components/FloatingLink/useVirtualFloatingLink.ts","../src/components/FloatingLink/useFloatingLinkEdit.ts","../src/utils/triggerFloatingLinkInsert.ts","../src/components/FloatingLink/useFloatingLinkInsert.ts","../src/components/FloatingLink/FloatingLink.tsx","../src/utils/triggerFloatingLink.ts","../src/transforms/insertLink.ts","../src/transforms/unwrapLink.ts","../src/transforms/upsertLinkText.ts","../src/transforms/wrapLink.ts","../src/transforms/upsertLink.ts","../src/withLink.ts","../src/createLinkPlugin.ts"],"sourcesContent":["import { getPluginType, PlateEditor, TText, Value } from '@udecode/plate-core';\nimport { ELEMENT_LINK } from '../createLinkPlugin';\nimport { TLinkElement } from '../types';\n\nexport interface CreateLinkNodeOptions {\n  url: string;\n  text?: string;\n  target?: string;\n  children?: TText[];\n}\n\nexport const createLinkNode = <V extends Value>(\n  editor: PlateEditor<V>,\n  { url, text = '', target, children }: CreateLinkNodeOptions\n): TLinkElement => {\n  const type = getPluginType(editor, ELEMENT_LINK);\n\n  return {\n    type,\n    url,\n    target,\n    children: children ?? [{ text }],\n  };\n};\n","import React, { SVGProps } from 'react';\n\nexport const LaunchIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    viewBox=\"0 0 24 24\"\n    focusable=\"false\"\n    role=\"img\"\n    fill=\"currentColor\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n    <path d=\"M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\" />\n  </svg>\n);\n","import {\n  createComponentAs,\n  createElementAs,\n  HTMLPropsAs,\n  PlateRenderElementProps,\n  useElementProps,\n  Value,\n} from '@udecode/plate-core';\nimport { TLinkElement } from '../types';\n\nexport type LinkRootProps = PlateRenderElementProps<Value, TLinkElement> &\n  HTMLPropsAs<'a'>;\n\nexport const useLink = (props: LinkRootProps): HTMLPropsAs<'a'> => {\n  const _props = useElementProps<TLinkElement, 'a'>({\n    ...props,\n    elementToAttributes: (element) => ({\n      href: element.url,\n      target: element.target,\n    }),\n  });\n\n  return {\n    ..._props,\n    // quick fix: hovering <a> with href loses the editor focus\n    onMouseOver: (e) => {\n      e.stopPropagation();\n    },\n  };\n};\n\nexport const LinkRoot = createComponentAs<LinkRootProps>((props) => {\n  const htmlProps = useLink(props);\n\n  return createElementAs('a', htmlProps);\n});\n\nexport const Link = {\n  Root: LinkRoot,\n};\n","import React, { SVGProps } from 'react';\n\nexport const LinkIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    viewBox=\"0 0 24 24\"\n    focusable=\"false\"\n    role=\"img\"\n    fill=\"currentColor\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n    <path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\" />\n  </svg>\n);\n","import React, { SVGProps } from 'react';\n\nexport const LinkOffIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    viewBox=\"0 0 24 24\"\n    focusable=\"false\"\n    role=\"img\"\n    fill=\"currentColor\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n    <path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11A4.991 4.991 0 002 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\" />\n    <path fill=\"none\" d=\"M0 24V0\" />\n  </svg>\n);\n","import React, { SVGProps } from 'react';\n\nexport const ShortTextIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    viewBox=\"0 0 24 24\"\n    focusable=\"false\"\n    role=\"img\"\n    fill=\"currentColor\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <rect width={24} height={24} fill=\"none\" />\n    <path d=\"M4 9h16v2H4V9zm0 4h10v2H4v-2z\" />\n  </svg>\n);\n","import { createStore } from '@udecode/plate-core';\n\nexport type FloatingLinkMode = '' | 'insert' | 'edit';\n\nexport const floatingLinkStore = createStore('floatingLink')({\n  openEditorId: null as null | string,\n  mouseDown: false,\n  updated: false,\n  url: '',\n  text: '',\n  newTab: false,\n  mode: '' as FloatingLinkMode,\n  isEditing: false,\n})\n  .extendActions((set) => ({\n    reset: () => {\n      set.url('');\n      set.text('');\n      set.newTab(false);\n      set.mode('');\n      set.isEditing(false);\n    },\n  }))\n  .extendActions((set) => ({\n    show: (mode: FloatingLinkMode, editorId: string) => {\n      set.mode(mode);\n      set.isEditing(false);\n      set.openEditorId(editorId);\n    },\n    hide: () => {\n      set.openEditorId(null);\n      set.reset();\n    },\n  }))\n  .extendSelectors((state) => ({\n    isOpen: (editorId: string) => state.openEditorId === editorId,\n  }));\n\nexport const floatingLinkActions = floatingLinkStore.set;\nexport const floatingLinkSelectors = floatingLinkStore.get;\nexport const useFloatingLinkSelectors = () => floatingLinkStore.use;\n","import {\n  findNode,\n  getEditorString,\n  getPluginType,\n  PlateEditor,\n  Value,\n} from '@udecode/plate-core';\nimport { floatingLinkActions } from '../components/FloatingLink/floatingLinkStore';\nimport { ELEMENT_LINK } from '../createLinkPlugin';\nimport { TLinkElement } from '../types';\n\nexport const triggerFloatingLinkEdit = <V extends Value>(\n  editor: PlateEditor<V>\n) => {\n  const entry = findNode<TLinkElement>(editor, {\n    match: { type: getPluginType(editor, ELEMENT_LINK) },\n  });\n  if (!entry) return;\n\n  const [link, path] = entry;\n\n  let text = getEditorString(editor, path);\n\n  floatingLinkActions.url(link.url);\n\n  floatingLinkActions.newTab(link.target === undefined);\n\n  if (text === link.url) {\n    text = '';\n  }\n\n  floatingLinkActions.text(text);\n\n  floatingLinkActions.isEditing(true);\n\n  return true;\n};\n","import { useCallback } from 'react';\nimport {\n  AsProps,\n  createComponentAs,\n  createElementAs,\n  HTMLPropsAs,\n  useEditorRef,\n} from '@udecode/plate-core';\nimport { triggerFloatingLinkEdit } from '../../utils/triggerFloatingLinkEdit';\n\nexport const useFloatingLinkEditButton = (\n  props: HTMLPropsAs<'button'>\n): HTMLPropsAs<'button'> => {\n  const editor = useEditorRef();\n\n  return {\n    onClick: useCallback(() => {\n      triggerFloatingLinkEdit(editor);\n    }, [editor]),\n    ...props,\n  };\n};\n\nexport const FloatingLinkEditButton = createComponentAs<AsProps<'button'>>(\n  (props) => {\n    const htmlProps = useFloatingLinkEditButton(props);\n\n    return createElementAs('button', htmlProps);\n  }\n);\n","import {\n  ChangeEventHandler,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  AsProps,\n  createComponentAs,\n  createElementAs,\n  HTMLPropsAs,\n  mergeProps,\n  useComposedRef,\n} from '@udecode/plate-core';\nimport {\n  floatingLinkActions,\n  floatingLinkSelectors,\n  useFloatingLinkSelectors,\n} from './floatingLinkStore';\n\nexport const useFloatingLinkNewTabInput = (\n  props: HTMLPropsAs<'input'>\n): HTMLPropsAs<'input'> => {\n  const updated = useFloatingLinkSelectors().updated();\n  const ref = useRef<HTMLInputElement>(null);\n  const [checked, setChecked] = useState<boolean>(\n    floatingLinkSelectors.newTab()\n  );\n\n  useEffect(() => {\n    if (ref.current && updated) {\n      setTimeout(() => {\n        ref.current?.focus();\n      }, 0);\n    }\n  }, [updated]);\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback((e) => {\n    setChecked(e.target.checked);\n    floatingLinkActions.newTab(e.target.checked);\n  }, []);\n\n  return mergeProps(\n    {\n      onChange,\n      checked,\n      type: 'checkbox',\n    },\n    { ...props, ref: useComposedRef<HTMLInputElement>(props.ref, ref) }\n  );\n};\n\nexport const FloatingLinkNewTabInput = createComponentAs<AsProps<'input'>>(\n  (props) => {\n    const htmlProps = useFloatingLinkNewTabInput(props);\n\n    return createElementAs('input', htmlProps);\n  }\n);\n","import { ChangeEventHandler, useCallback } from 'react';\nimport {\n  AsProps,\n  createComponentAs,\n  createElementAs,\n  HTMLPropsAs,\n  mergeProps,\n} from '@udecode/plate-core';\nimport {\n  floatingLinkActions,\n  floatingLinkSelectors,\n} from './floatingLinkStore';\n\nexport const useFloatingLinkTextInput = (\n  props: HTMLPropsAs<'input'>\n): HTMLPropsAs<'input'> => {\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback((e) => {\n    floatingLinkActions.text(e.target.value);\n  }, []);\n\n  return mergeProps(\n    {\n      onChange,\n      defaultValue: floatingLinkSelectors.text(),\n    },\n    props\n  );\n};\n\nexport const FloatingLinkTextInput = createComponentAs<AsProps<'input'>>(\n  (props) => {\n    const htmlProps = useFloatingLinkTextInput(props);\n\n    return createElementAs('input', htmlProps);\n  }\n);\n","import { ChangeEventHandler, useCallback, useEffect, useRef } from 'react';\nimport {\n  AsProps,\n  createComponentAs,\n  createElementAs,\n  HTMLPropsAs,\n  mergeProps,\n  useComposedRef,\n} from '@udecode/plate-core';\nimport {\n  floatingLinkActions,\n  floatingLinkSelectors,\n  useFloatingLinkSelectors,\n} from './floatingLinkStore';\n\nexport const useFloatingLinkUrlInput = (\n  props: HTMLPropsAs<'input'>\n): HTMLPropsAs<'input'> => {\n  const updated = useFloatingLinkSelectors().updated();\n  const ref = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (ref.current && updated) {\n      setTimeout(() => {\n        ref.current?.focus();\n      }, 0);\n    }\n  }, [updated]);\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback((e) => {\n    floatingLinkActions.url(e.target.value);\n  }, []);\n\n  return mergeProps(\n    {\n      onChange,\n      defaultValue: floatingLinkSelectors.url(),\n    },\n    { ...props, ref: useComposedRef<HTMLInputElement>(props.ref, ref) }\n  );\n};\n\nexport const FloatingLinkUrlInput = createComponentAs<AsProps<'input'>>(\n  (props) => {\n    const htmlProps = useFloatingLinkUrlInput(props);\n\n    return createElementAs('input', htmlProps);\n  }\n);\n","import { useMemo } from 'react';\nimport {\n  AsProps,\n  createComponentAs,\n  createElementAs,\n  findNode,\n  getPluginType,\n  HTMLPropsAs,\n  useEditorRef,\n  usePlateSelection,\n} from '@udecode/plate-core';\nimport { ELEMENT_LINK } from '../../createLinkPlugin';\nimport { TLinkElement } from '../../types';\n\nexport const useOpenLinkButton = (\n  props: HTMLPropsAs<'a'>\n): HTMLPropsAs<'a'> => {\n  const editor = useEditorRef();\n  const selection = usePlateSelection();\n\n  const entry = useMemo(\n    () =>\n      findNode<TLinkElement>(editor, {\n        match: { type: getPluginType(editor, ELEMENT_LINK) },\n      }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [editor, selection]\n  );\n\n  if (!entry) {\n    return {};\n  }\n\n  const [link] = entry;\n\n  return {\n    'aria-label': 'Open link in a new tab',\n    target: '_blank',\n    href: link.url,\n    onMouseOver: (e) => {\n      e.stopPropagation();\n    },\n    ...props,\n  };\n};\n\nexport const OpenLinkButton = createComponentAs<AsProps<'a'>>((props) => {\n  const htmlProps = useOpenLinkButton(props);\n\n  return createElementAs('a', htmlProps);\n});\n","import { useCallback } from 'react';\nimport { Button } from '@udecode/plate-button';\nimport {\n  AsProps,\n  createComponentAs,\n  createElementAs,\n  focusEditor,\n  HTMLPropsAs,\n  useEditorRef,\n} from '@udecode/plate-core';\nimport { unwrapLink } from '../../transforms/index';\n\nexport const useUnlinkButton = (\n  props: HTMLPropsAs<'button'>\n): HTMLPropsAs<'button'> => {\n  const editor = useEditorRef();\n\n  return {\n    onClick: useCallback(() => {\n      unwrapLink(editor);\n      focusEditor(editor, editor.selection!);\n    }, [editor]),\n    ...props,\n  };\n};\n\nexport const UnlinkButton = createComponentAs<AsProps<'button'>>((props) => {\n  const htmlProps = useUnlinkButton(props);\n\n  return createElementAs(Button, htmlProps);\n});\n","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","function getSide(placement) {\n  return placement.split('-')[0];\n}\n\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\n\nfunction getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].includes(getSide(placement)) ? 'x' : 'y';\n}\n\nfunction getLengthFromAxis(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const mainAxis = getMainAxisFromPlacement(placement);\n  const length = getLengthFromAxis(mainAxis);\n  const commonAlign = reference[length] / 2 - floating[length] / 2;\n  const side = getSide(placement);\n  const isVertical = mainAxis === 'x';\n  let coords;\n\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[mainAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n\n    case 'end':\n      coords[mainAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a reference element when it is given a certain positioning strategy.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\n\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (platform == null) {\n      console.error(['Floating UI: `platform` property was not passed to config. If you', 'want to use Floating UI on the web, install @floating-ui/dom', 'instead of the /core package. Otherwise, you can create your own', '`platform`: https://floating-ui.com/docs/platform'].join(' '));\n    }\n\n    if (middleware.filter(_ref => {\n      let {\n        name\n      } = _ref;\n      return name === 'autoPlacement' || name === 'flip';\n    }).length > 1) {\n      throw new Error(['Floating UI: duplicate `flip` and/or `autoPlacement`', 'middleware detected. This will lead to an infinite loop. Ensure only', 'one of either has been passed to the `middleware` array.'].join(' '));\n    }\n  }\n\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n\n  for (let i = 0; i < middleware.length; i++) {\n    const {\n      name,\n      fn\n    } = middleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = { ...middlewareData,\n      [name]: { ...middlewareData[name],\n        ...data\n      }\n    };\n\n    if (process.env.NODE_ENV !== \"production\") {\n      if (resetCount > 50) {\n        console.warn(['Floating UI: The middleware lifecycle appears to be running in an', 'infinite loop. This is usually caused by a `reset` continually', 'being returned without a break condition.'].join(' '));\n      }\n    }\n\n    if (reset && resetCount <= 50) {\n      resetCount++;\n\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n\n      i = -1;\n      continue;\n    }\n  }\n\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\n\nfunction getSideObjectFromPadding(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\n\nfunction rectToClientRect(rect) {\n  return { ...rect,\n    top: rect.y,\n    left: rect.x,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(middlewareArguments, options) {\n  var _await$platform$isEle;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = middlewareArguments;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = options;\n  const paddingObject = getSideObjectFromPadding(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    rect: elementContext === 'floating' ? { ...rects.floating,\n      x,\n      y\n    } : rects.reference,\n    offsetParent: await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating)),\n    strategy\n  }) : rects[elementContext]);\n  return {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n}\n\nconst min = Math.min;\nconst max = Math.max;\n\nfunction within(min$1, value, max$1) {\n  return max(min$1, min(value, max$1));\n}\n\n/**\n * Positions an inner element of the floating element such that it is centered\n * to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n\n  async fn(middlewareArguments) {\n    // Since `element` is required, we don't Partial<> the type\n    const {\n      element,\n      padding = 0\n    } = options != null ? options : {};\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform\n    } = middlewareArguments;\n\n    if (element == null) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.warn('Floating UI: No `element` was passed to the `arrow` middleware.');\n      }\n\n      return {};\n    }\n\n    const paddingObject = getSideObjectFromPadding(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getMainAxisFromPlacement(placement);\n    const alignment = getAlignment(placement);\n    const length = getLengthFromAxis(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const minProp = axis === 'y' ? 'top' : 'left';\n    const maxProp = axis === 'y' ? 'bottom' : 'right';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n\n    if (clientSize === 0) {\n      clientSize = rects.floating[length];\n    }\n\n    const centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds\n\n    const min = paddingObject[minProp];\n    const max = clientSize - arrowDimensions[length] - paddingObject[maxProp];\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = within(min, center, max); // Make sure that arrow points at the reference\n\n    const alignmentPadding = alignment === 'start' ? paddingObject[minProp] : paddingObject[maxProp];\n    const shouldAddOffset = alignmentPadding > 0 && center !== offset && rects.reference[length] <= rects.floating[length];\n    const alignmentOffset = shouldAddOffset ? center < min ? min - center : max - center : 0;\n    return {\n      [axis]: coords[axis] - alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset\n      }\n    };\n  }\n\n});\n\nconst hash$1 = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, matched => hash$1[matched]);\n}\n\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n\n  const alignment = getAlignment(placement);\n  const mainAxis = getMainAxisFromPlacement(placement);\n  const length = getLengthFromAxis(mainAxis);\n  let mainAlignmentSide = mainAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n\n  return {\n    main: mainAlignmentSide,\n    cross: getOppositePlacement(mainAlignmentSide)\n  };\n}\n\nconst hash = {\n  start: 'end',\n  end: 'start'\n};\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, matched => hash[matched]);\n}\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst allPlacements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-start\", side + \"-end\"), []);\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n\n    return true;\n  });\n}\n\n/**\n * Automatically chooses the `placement` which has the most space available.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return {\n    name: 'autoPlacement',\n    options,\n\n    async fn(middlewareArguments) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _middlewareData$autoP3, _middlewareData$autoP4, _placementsSortedByLe;\n\n      const {\n        x,\n        y,\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = middlewareArguments;\n      const {\n        alignment = null,\n        allowedPlacements = allPlacements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = options;\n      const placements = getPlacementList(alignment, autoAlignment, allowedPlacements);\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const currentIndex = (_middlewareData$autoP = (_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.index) != null ? _middlewareData$autoP : 0;\n      const currentPlacement = placements[currentIndex];\n\n      if (currentPlacement == null) {\n        return {};\n      }\n\n      const {\n        main,\n        cross\n      } = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))); // Make `computeCoords` start from the right place\n\n      if (placement !== currentPlacement) {\n        return {\n          x,\n          y,\n          reset: {\n            placement: placements[0]\n          }\n        };\n      }\n\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[main], overflow[cross]];\n      const allOverflows = [...((_middlewareData$autoP3 = (_middlewareData$autoP4 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP4.overflows) != null ? _middlewareData$autoP3 : []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements[currentIndex + 1]; // There are more placements to check\n\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n\n      const placementsSortedByLeastOverflow = allOverflows.slice().sort((a, b) => a.overflows[0] - b.overflows[0]);\n      const placementThatFitsOnAllSides = (_placementsSortedByLe = placementsSortedByLeastOverflow.find(_ref => {\n        let {\n          overflows\n        } = _ref;\n        return overflows.every(overflow => overflow <= 0);\n      })) == null ? void 0 : _placementsSortedByLe.placement;\n      const resetPlacement = placementThatFitsOnAllSides != null ? placementThatFitsOnAllSides : placementsSortedByLeastOverflow[0].placement;\n\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n\n      return {};\n    }\n\n  };\n};\n\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\n\n/**\n * Changes the placement of the floating element to one that will fit if the\n * initially specified `placement` does not.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return {\n    name: 'flip',\n    options,\n\n    async fn(middlewareArguments) {\n      var _middlewareData$flip;\n\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = middlewareArguments;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = options;\n      const side = getSide(placement);\n      const isBasePlacement = side === initialPlacement;\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n\n      if (checkCrossAxis) {\n        const {\n          main,\n          cross\n        } = getAlignmentSides(placement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n        overflows.push(overflow[main], overflow[cross]);\n      }\n\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }]; // One or more sides is overflowing\n\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip$, _middlewareData$flip2;\n\n        const nextIndex = ((_middlewareData$flip$ = (_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) != null ? _middlewareData$flip$ : 0) + 1;\n        const nextPlacement = placements[nextIndex];\n\n        if (nextPlacement) {\n          // Try next placement and re-run the lifecycle\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              placement: nextPlacement\n            }\n          };\n        }\n\n        let resetPlacement = 'bottom';\n\n        switch (fallbackStrategy) {\n          case 'bestFit':\n            {\n              var _overflowsData$map$so;\n\n              const placement = (_overflowsData$map$so = overflowsData.map(d => [d, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$map$so[0].placement;\n\n              if (placement) {\n                resetPlacement = placement;\n              }\n\n              break;\n            }\n\n          case 'initialPlacement':\n            resetPlacement = initialPlacement;\n            break;\n        }\n\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n\n      return {};\n    }\n\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (_temp) {\n  let {\n    strategy = 'referenceHidden',\n    ...detectOverflowOptions\n  } = _temp === void 0 ? {} : _temp;\n  return {\n    name: 'hide',\n\n    async fn(middlewareArguments) {\n      const {\n        rects\n      } = middlewareArguments;\n\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(middlewareArguments, { ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(middlewareArguments, { ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n\n        default:\n          {\n            return {};\n          }\n      }\n    }\n\n  };\n};\n\nasync function convertValueToCoords(middlewareArguments, value) {\n  const {\n    placement,\n    platform,\n    elements\n  } = middlewareArguments;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getMainAxisFromPlacement(placement) === 'x';\n  const mainAxisMulti = ['left', 'top'].includes(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = typeof value === 'function' ? value(middlewareArguments) : value; // eslint-disable-next-line prefer-const\n\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: 0,\n    crossAxis: 0,\n    alignmentAxis: null,\n    ...rawValue\n  };\n\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n/**\n * Displaces the floating element from its reference element.\n * @see https://floating-ui.com/docs/offset\n */\n\nconst offset = function (value) {\n  if (value === void 0) {\n    value = 0;\n  }\n\n  return {\n    name: 'offset',\n    options: value,\n\n    async fn(middlewareArguments) {\n      const {\n        x,\n        y\n      } = middlewareArguments;\n      const diffCoords = await convertValueToCoords(middlewareArguments, value);\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: diffCoords\n      };\n    }\n\n  };\n};\n\nfunction getCrossAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\n\n/**\n * Shifts the floating element in order to keep it in view when it will overflow\n * a clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return {\n    name: 'shift',\n    options,\n\n    async fn(middlewareArguments) {\n      const {\n        x,\n        y,\n        placement\n      } = middlewareArguments;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = options;\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const mainAxis = getMainAxisFromPlacement(getSide(placement));\n      const crossAxis = getCrossAxis(mainAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = within(min, mainAxisCoord, max);\n      }\n\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = within(min, crossAxisCoord, max);\n      }\n\n      const limitedCoords = limiter.fn({ ...middlewareArguments,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return { ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y\n        }\n      };\n    }\n\n  };\n};\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return {\n    options,\n\n    fn(middlewareArguments) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = middlewareArguments;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = options;\n      const coords = {\n        x,\n        y\n      };\n      const mainAxis = getMainAxisFromPlacement(placement);\n      const crossAxis = getCrossAxis(mainAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = typeof offset === 'function' ? offset({ ...rects,\n        placement\n      }) : offset;\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2, _middlewareData$offse3, _middlewareData$offse4;\n\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = ['top', 'left'].includes(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? (_middlewareData$offse = (_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) != null ? _middlewareData$offse : 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : (_middlewareData$offse3 = (_middlewareData$offse4 = middlewareData.offset) == null ? void 0 : _middlewareData$offse4[crossAxis]) != null ? _middlewareData$offse3 : 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n\n  };\n};\n\n/**\n * Provides data to change the size of the floating element. For instance,\n * prevent it from overflowing its clipping boundary or match the width of the\n * reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return {\n    name: 'size',\n    options,\n\n    async fn(middlewareArguments) {\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = middlewareArguments;\n      const {\n        apply,\n        ...detectOverflowOptions\n      } = options;\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      let heightSide;\n      let widthSide;\n\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n\n      const xMin = max(overflow.left, 0);\n      const xMax = max(overflow.right, 0);\n      const yMin = max(overflow.top, 0);\n      const yMax = max(overflow.bottom, 0);\n      const dimensions = {\n        availableHeight: rects.floating.height - (['left', 'right'].includes(placement) ? 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom)) : overflow[heightSide]),\n        availableWidth: rects.floating.width - (['top', 'bottom'].includes(placement) ? 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right)) : overflow[widthSide])\n      };\n      const prevDimensions = await platform.getDimensions(elements.floating);\n      apply == null ? void 0 : apply({ ...middlewareArguments,\n        ...dimensions\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n\n      if (prevDimensions.width !== nextDimensions.width || prevDimensions.height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n\n      return {};\n    }\n\n  };\n};\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return {\n    name: 'inline',\n    options,\n\n    async fn(middlewareArguments) {\n      var _await$platform$getCl;\n\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = middlewareArguments; // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n\n      const {\n        padding = 2,\n        x,\n        y\n      } = options;\n      const fallback = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n        rect: rects.reference,\n        offsetParent: await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating)),\n        strategy\n      }) : rects.reference);\n      const clientRects = (_await$platform$getCl = await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) != null ? _await$platform$getCl : [];\n      const paddingObject = getSideObjectFromPadding(padding);\n\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          var _clientRects$find;\n\n          // Find the first rect in which the point is fully inside\n          return (_clientRects$find = clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom)) != null ? _clientRects$find : fallback;\n        } // There are 2 or more connected rects\n\n\n        if (clientRects.length >= 2) {\n          if (getMainAxisFromPlacement(placement) === 'x') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n\n        return fallback;\n      }\n\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n\n      return {};\n    }\n\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, rectToClientRect, shift, size };\n","import { rectToClientRect, computePosition as computePosition$1 } from '@floating-ui/core';\nexport { arrow, autoPlacement, detectOverflow, flip, hide, inline, limitShift, offset, shift, size } from '@floating-ui/core';\n\nfunction isWindow(value) {\n  return value && value.document && value.location && value.alert && value.setInterval;\n}\nfunction getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (!isWindow(node)) {\n    const ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}\n\nfunction getComputedStyle$1(element) {\n  return getWindow(element).getComputedStyle(element);\n}\n\nfunction getNodeName(node) {\n  return isWindow(node) ? '' : node ? (node.nodeName || '').toLowerCase() : '';\n}\n\nfunction getUAString() {\n  const uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands) {\n    return uaData.brands.map(item => item.brand + \"/\" + item.version).join(' ');\n  }\n\n  return navigator.userAgent;\n}\n\nfunction isHTMLElement(value) {\n  return value instanceof getWindow(value).HTMLElement;\n}\nfunction isElement(value) {\n  return value instanceof getWindow(value).Element;\n}\nfunction isNode(value) {\n  return value instanceof getWindow(value).Node;\n}\nfunction isShadowRoot(node) {\n  // Browsers without `ShadowRoot` support\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  const OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  const {\n    overflow,\n    overflowX,\n    overflowY\n  } = getComputedStyle$1(element);\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].includes(getNodeName(element));\n}\nfunction isContainingBlock(element) {\n  // TODO: Try and use feature detection here instead\n  const isFirefox = /firefox/i.test(getUAString());\n  const css = getComputedStyle$1(element); // This is non-exhaustive but covers the most common CSS properties that\n  // create a containing block.\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n  return css.transform !== 'none' || css.perspective !== 'none' || // @ts-ignore (TS 4.1 compat)\n  css.contain === 'paint' || ['transform', 'perspective'].includes(css.willChange) || isFirefox && css.willChange === 'filter' || isFirefox && (css.filter ? css.filter !== 'none' : false);\n}\nfunction isLayoutViewport() {\n  // Not Safari\n  return !/^((?!chrome|android).)*safari/i.test(getUAString()); // Feature detection for this fails in various ways\n  //  Always-visible scrollbar or not\n  //  Width of <html>, etc.\n  // const vV = win.visualViewport;\n  // return vV ? Math.abs(win.innerWidth / vV.scale - vV.width) < 0.5 : true;\n}\n\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  var _win$visualViewport$o, _win$visualViewport, _win$visualViewport$o2, _win$visualViewport2;\n\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  const clientRect = element.getBoundingClientRect();\n  let scaleX = 1;\n  let scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  const win = isElement(element) ? getWindow(element) : window;\n  const addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  const x = (clientRect.left + (addVisualOffsets ? (_win$visualViewport$o = (_win$visualViewport = win.visualViewport) == null ? void 0 : _win$visualViewport.offsetLeft) != null ? _win$visualViewport$o : 0 : 0)) / scaleX;\n  const y = (clientRect.top + (addVisualOffsets ? (_win$visualViewport$o2 = (_win$visualViewport2 = win.visualViewport) == null ? void 0 : _win$visualViewport2.offsetTop) != null ? _win$visualViewport$o2 : 0 : 0)) / scaleY;\n  const width = clientRect.width / scaleX;\n  const height = clientRect.height / scaleY;\n  return {\n    width,\n    height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x,\n    y\n  };\n}\n\nfunction getDocumentElement(node) {\n  return ((isNode(node) ? node.ownerDocument : node.document) || window.document).documentElement;\n}\n\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n\n  return {\n    scrollLeft: element.pageXOffset,\n    scrollTop: element.pageYOffset\n  };\n}\n\nfunction getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  return getBoundingClientRect(getDocumentElement(element)).left + getNodeScroll(element).scrollLeft;\n}\n\nfunction isScaled(element) {\n  const rect = getBoundingClientRect(element);\n  return round(rect.width) !== element.offsetWidth || round(rect.height) !== element.offsetHeight;\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const rect = getBoundingClientRect(element, // @ts-ignore - checked above (TS 4.1 compat)\n  isOffsetParentAnElement && isScaled(offsetParent), strategy === 'fixed');\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && strategy !== 'fixed') {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent, true);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // @ts-ignore\n    node.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    node.parentNode || ( // DOM Element detected\n    isShadowRoot(node) ? node.host : null) || // ShadowRoot detected\n    getDocumentElement(node) // fallback\n\n  );\n}\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n}\n\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && !['html', 'body'].includes(getNodeName(currentNode))) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nfunction getOffsetParent(element) {\n  const window = getWindow(element);\n  let offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static' && !isContainingBlock(offsetParent))) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}\n\nfunction getDimensions(element) {\n  if (isHTMLElement(element)) {\n    return {\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    };\n  }\n\n  const rect = getBoundingClientRect(element);\n  return {\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n\n  if (offsetParent === documentElement) {\n    return rect;\n  }\n\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && strategy !== 'fixed') {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent, true);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } // This doesn't appear to be need to be negated.\n    // else if (documentElement) {\n    //   offsets.x = getWindowScrollBarX(documentElement);\n    // }\n\n  }\n\n  return { ...rect,\n    x: rect.x - scroll.scrollLeft + offsets.x,\n    y: rect.y - scroll.scrollTop + offsets.y\n  };\n}\n\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nfunction getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  const width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  const height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n\n  if (getComputedStyle$1(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n\n  if (['html', 'body', '#document'].includes(getNodeName(parentNode))) {\n    // @ts-ignore assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n\n  return getNearestOverflowAncestor(parentNode);\n}\n\nfunction getOverflowAncestors(node, list) {\n  var _node$ownerDocument;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.body);\n  const win = getWindow(scrollableAncestor);\n  const target = isBody ? [win].concat(win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : []) : scrollableAncestor;\n  const updatedList = list.concat(target);\n  return isBody ? updatedList : // @ts-ignore: isBody tells us target will be an HTMLElement here\n  updatedList.concat(getOverflowAncestors(target));\n}\n\nfunction contains(parent, child) {\n  const rootNode = child.getRootNode == null ? void 0 : child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n    let next = child;\n\n    do {\n      // use `===` replace node.isSameNode()\n      if (next && parent === next) {\n        return true;\n      } // @ts-ignore: need a better way to handle this...\n\n\n      next = next.parentNode || next.host;\n    } while (next);\n  }\n\n  return false;\n}\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, false, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  return {\n    top,\n    left,\n    x: left,\n    y: top,\n    right: left + element.clientWidth,\n    bottom: top + element.clientHeight,\n    width: element.clientWidth,\n    height: element.clientHeight\n  };\n}\n\nfunction getClientRectFromClippingAncestor(element, clippingParent, strategy) {\n  if (clippingParent === 'viewport') {\n    return rectToClientRect(getViewportRect(element, strategy));\n  }\n\n  if (isElement(clippingParent)) {\n    return getInnerBoundingClientRect(clippingParent, strategy);\n  }\n\n  return rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping ancestor\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingAncestors(element) {\n  const clippingAncestors = getOverflowAncestors(element);\n  const canEscapeClipping = ['absolute', 'fixed'].includes(getComputedStyle$1(element).position);\n  const clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // @ts-ignore isElement check ensures we return Array<Element>\n\n\n  return clippingAncestors.filter(clippingAncestors => isElement(clippingAncestors) && contains(clippingAncestors, clipperElement) && getNodeName(clippingAncestors) !== 'body');\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors\n\n\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const mainClippingAncestors = boundary === 'clippingAncestors' ? getClippingAncestors(element) : [].concat(boundary);\n  const clippingAncestors = [...mainClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nconst platform = {\n  getClippingRect,\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  isElement,\n  getDimensions,\n  getOffsetParent,\n  getDocumentElement,\n  getElementRects: _ref => {\n    let {\n      reference,\n      floating,\n      strategy\n    } = _ref;\n    return {\n      reference: getRectRelativeToOffsetParent(reference, getOffsetParent(floating), strategy),\n      floating: { ...getDimensions(floating),\n        x: 0,\n        y: 0\n      }\n    };\n  },\n  getClientRects: element => Array.from(element.getClientRects()),\n  isRTL: element => getComputedStyle$1(element).direction === 'rtl'\n};\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  const {\n    ancestorScroll: _ancestorScroll = true,\n    ancestorResize: _ancestorResize = true,\n    elementResize = true,\n    animationFrame = false\n  } = options;\n  const ancestorScroll = _ancestorScroll && !animationFrame;\n  const ancestorResize = _ancestorResize && !animationFrame;\n  const ancestors = ancestorScroll || ancestorResize ? [...(isElement(reference) ? getOverflowAncestors(reference) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  let observer = null;\n\n  if (elementResize) {\n    let initialUpdate = true;\n    observer = new ResizeObserver(() => {\n      if (!initialUpdate) {\n        update();\n      }\n\n      initialUpdate = false;\n    });\n    isElement(reference) && !animationFrame && observer.observe(reference);\n    observer.observe(floating);\n  }\n\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n\n  if (animationFrame) {\n    frameLoop();\n  }\n\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n\n  update();\n  return () => {\n    var _observer;\n\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    (_observer = observer) == null ? void 0 : _observer.disconnect();\n    observer = null;\n\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a reference element when it is given a certain CSS positioning\n * strategy.\n */\n\nconst computePosition = (reference, floating, options) => computePosition$1(reference, floating, {\n  platform,\n  ...options\n});\n\nexport { autoUpdate, computePosition, getOverflowAncestors };\n","import { computePosition, arrow as arrow$1 } from '@floating-ui/dom';\nexport * from '@floating-ui/dom';\nimport * as React from 'react';\nimport { useLayoutEffect, useEffect } from 'react';\nimport * as ReactDOM from 'react-dom';\n\nvar index = typeof document !== 'undefined' ? useLayoutEffect : useEffect;\n\n// Fork of `fast-deep-equal` that only does the comparisons we need and compares\n// functions\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (typeof a !== typeof b) {\n    return false;\n  }\n\n  if (typeof a === 'function' && a.toString() === b.toString()) {\n    return true;\n  }\n\n  let length, i, keys;\n\n  if (a && b && typeof a == 'object') {\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!deepEqual(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    keys = Object.keys(a);\n    length = keys.length;\n\n    if (length !== Object.keys(b).length) {\n      return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) {\n        return false;\n      }\n    }\n\n    for (i = length; i-- !== 0;) {\n      const key = keys[i];\n\n      if (key === '_owner' && a.$$typeof) {\n        continue;\n      }\n\n      if (!deepEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n\nfunction useLatestRef(value) {\n  const ref = React.useRef(value);\n  index(() => {\n    ref.current = value;\n  });\n  return ref;\n}\n\nfunction useFloating(_temp) {\n  let {\n    middleware,\n    placement = 'bottom',\n    strategy = 'absolute',\n    whileElementsMounted\n  } = _temp === void 0 ? {} : _temp;\n  const reference = React.useRef(null);\n  const floating = React.useRef(null);\n  const whileElementsMountedRef = useLatestRef(whileElementsMounted);\n  const cleanupRef = React.useRef(null);\n  const [data, setData] = React.useState({\n    // Setting these to `null` will allow the consumer to determine if\n    // `computePosition()` has run yet\n    x: null,\n    y: null,\n    strategy,\n    placement,\n    middlewareData: {}\n  });\n  const [latestMiddleware, setLatestMiddleware] = React.useState(middleware);\n\n  if (!deepEqual(latestMiddleware == null ? void 0 : latestMiddleware.map(_ref => {\n    let {\n      options\n    } = _ref;\n    return options;\n  }), middleware == null ? void 0 : middleware.map(_ref2 => {\n    let {\n      options\n    } = _ref2;\n    return options;\n  }))) {\n    setLatestMiddleware(middleware);\n  }\n\n  const update = React.useCallback(() => {\n    if (!reference.current || !floating.current) {\n      return;\n    }\n\n    computePosition(reference.current, floating.current, {\n      middleware: latestMiddleware,\n      placement,\n      strategy\n    }).then(data => {\n      if (isMountedRef.current) {\n        ReactDOM.flushSync(() => {\n          setData(data);\n        });\n      }\n    });\n  }, [latestMiddleware, placement, strategy]);\n  index(() => {\n    // Skip first update\n    if (isMountedRef.current) {\n      update();\n    }\n  }, [update]);\n  const isMountedRef = React.useRef(false);\n  index(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n  const runElementMountCallback = React.useCallback(() => {\n    if (typeof cleanupRef.current === 'function') {\n      cleanupRef.current();\n      cleanupRef.current = null;\n    }\n\n    if (reference.current && floating.current) {\n      if (whileElementsMountedRef.current) {\n        const cleanupFn = whileElementsMountedRef.current(reference.current, floating.current, update);\n        cleanupRef.current = cleanupFn;\n      } else {\n        update();\n      }\n    }\n  }, [update, whileElementsMountedRef]);\n  const setReference = React.useCallback(node => {\n    reference.current = node;\n    runElementMountCallback();\n  }, [runElementMountCallback]);\n  const setFloating = React.useCallback(node => {\n    floating.current = node;\n    runElementMountCallback();\n  }, [runElementMountCallback]);\n  const refs = React.useMemo(() => ({\n    reference,\n    floating\n  }), []);\n  return React.useMemo(() => ({ ...data,\n    update,\n    refs,\n    reference: setReference,\n    floating: setFloating\n  }), [data, update, refs, setReference, setFloating]);\n}\n\n/**\n * Positions an inner element of the floating element such that it is centered\n * to the reference element.\n * This wraps the core `arrow` middleware to allow React refs as the element.\n * @see https://floating-ui.com/docs/arrow\n */\n\nconst arrow = options => {\n  const {\n    element,\n    padding\n  } = options;\n\n  function isRef(value) {\n    return Object.prototype.hasOwnProperty.call(value, 'current');\n  }\n\n  return {\n    name: 'arrow',\n    options,\n\n    fn(args) {\n      if (isRef(element)) {\n        if (element.current != null) {\n          return arrow$1({\n            element: element.current,\n            padding\n          }).fn(args);\n        }\n\n        return {};\n      } else if (element) {\n        return arrow$1({\n          element,\n          padding\n        }).fn(args);\n      }\n\n      return {};\n    }\n\n  };\n};\n\nexport { arrow, useFloating };\n","import { useFloating as useFloating$1, getOverflowAncestors } from '@floating-ui/react-dom';\nexport * from '@floating-ui/react-dom';\nimport * as React from 'react';\nimport { useLayoutEffect, useEffect, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { hideOthers } from 'aria-hidden';\n\nvar index = typeof document !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction createPubSub() {\n  const map = new Map();\n  return {\n    emit(event, data) {\n      var _map$get;\n\n      (_map$get = map.get(event)) == null ? void 0 : _map$get.forEach(handler => handler(data));\n    },\n\n    on(event, listener) {\n      map.set(event, [...(map.get(event) || []), listener]);\n    },\n\n    off(event, listener) {\n      map.set(event, (map.get(event) || []).filter(l => l !== listener));\n    }\n\n  };\n}\n\nlet serverHandoffComplete = false;\nlet count = 0;\n\nconst genId = () => \"floating-ui-\" + count++;\n\nfunction useFloatingId() {\n  const [id, setId] = React.useState(() => serverHandoffComplete ? genId() : undefined);\n  index(() => {\n    if (id == null) {\n      setId(genId());\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  React.useEffect(() => {\n    if (!serverHandoffComplete) {\n      serverHandoffComplete = true;\n    }\n  }, []);\n  return id;\n} // `toString()` prevents bundlers from trying to `import { useId } from 'react'`\n\n\nconst useReactId = React[/*#__PURE__*/'useId'.toString()];\n/**\n * Uses React 18's built-in `useId()` when available, or falls back to a\n * slightly less performant (requiring a double render) implementation for\n * earlier React versions.\n * @see https://floating-ui.com/docs/useId\n */\n\nconst useId = useReactId != null ? useReactId : useFloatingId;\n\nconst FloatingNodeContext = /*#__PURE__*/React.createContext(null);\nconst FloatingTreeContext = /*#__PURE__*/React.createContext(null);\nconst useFloatingParentNodeId = () => {\n  var _React$useContext$id, _React$useContext;\n\n  return (_React$useContext$id = (_React$useContext = React.useContext(FloatingNodeContext)) == null ? void 0 : _React$useContext.id) != null ? _React$useContext$id : null;\n};\nconst useFloatingTree = () => React.useContext(FloatingTreeContext);\n/**\n * Registers a node into the floating tree, returning its id.\n */\n\nconst useFloatingNodeId = () => {\n  const id = useId();\n  const tree = useFloatingTree();\n  const parentId = useFloatingParentNodeId();\n  index(() => {\n    const node = {\n      id,\n      parentId\n    };\n    tree == null ? void 0 : tree.addNode(node);\n    return () => {\n      tree == null ? void 0 : tree.removeNode(node);\n    };\n  }, [tree, id, parentId]);\n  return id;\n};\n/**\n * Provides parent node context for nested floating elements.\n * @see https://floating-ui.com/docs/FloatingTree\n */\n\nconst FloatingNode = _ref => {\n  let {\n    children,\n    id\n  } = _ref;\n  const parentId = useFloatingParentNodeId();\n  return /*#__PURE__*/React.createElement(FloatingNodeContext.Provider, {\n    value: React.useMemo(() => ({\n      id,\n      parentId\n    }), [id, parentId])\n  }, children);\n};\n/**\n * Provides context for nested floating elements when they are not children of\n * each other on the DOM (i.e. portalled to a common node, rather than their\n * respective parent).\n * @see https://floating-ui.com/docs/FloatingTree\n */\n\nconst FloatingTree = _ref2 => {\n  let {\n    children\n  } = _ref2;\n  const nodesRef = React.useRef([]);\n  const addNode = React.useCallback(node => {\n    nodesRef.current = [...nodesRef.current, node];\n  }, []);\n  const removeNode = React.useCallback(node => {\n    nodesRef.current = nodesRef.current.filter(n => n !== node);\n  }, []);\n  const events = React.useState(() => createPubSub())[0];\n  return /*#__PURE__*/React.createElement(FloatingTreeContext.Provider, {\n    value: React.useMemo(() => ({\n      nodesRef,\n      addNode,\n      removeNode,\n      events\n    }), [nodesRef, addNode, removeNode, events])\n  }, children);\n};\n\nfunction getDocument(floating) {\n  var _floating$ownerDocume;\n\n  return (_floating$ownerDocume = floating == null ? void 0 : floating.ownerDocument) != null ? _floating$ownerDocume : document;\n}\n\nfunction getWindow(value) {\n  var _getDocument$defaultV;\n\n  return (_getDocument$defaultV = getDocument(value).defaultView) != null ? _getDocument$defaultV : window;\n}\n\nfunction isElement(value) {\n  return value ? value instanceof getWindow(value).Element : false;\n}\nfunction isHTMLElement(value) {\n  return value ? value instanceof getWindow(value).HTMLElement : false;\n}\n\nfunction useFloating(_temp) {\n  let {\n    open = false,\n    onOpenChange = () => {},\n    whileElementsMounted,\n    placement,\n    middleware,\n    strategy,\n    nodeId\n  } = _temp === void 0 ? {} : _temp;\n  const tree = useFloatingTree();\n  const domReferenceRef = React.useRef(null);\n  const dataRef = React.useRef({});\n  const events = React.useState(() => createPubSub())[0];\n  const floating = useFloating$1({\n    placement,\n    middleware,\n    strategy,\n    whileElementsMounted\n  });\n  const refs = React.useMemo(() => ({ ...floating.refs,\n    domReference: domReferenceRef\n  }), [floating.refs]);\n  const context = React.useMemo(() => ({ ...floating,\n    refs,\n    dataRef,\n    nodeId,\n    events,\n    open,\n    onOpenChange\n  }), [floating, nodeId, events, open, onOpenChange, refs]);\n  index(() => {\n    const node = tree == null ? void 0 : tree.nodesRef.current.find(node => node.id === nodeId);\n\n    if (node) {\n      node.context = context;\n    }\n  });\n  const {\n    reference\n  } = floating;\n  const setReference = React.useCallback(node => {\n    if (isElement(node) || node === null) {\n      context.refs.domReference.current = node;\n    }\n\n    reference(node);\n  }, [reference, context.refs]);\n  return React.useMemo(() => ({ ...floating,\n    context,\n    refs,\n    reference: setReference\n  }), [floating, refs, context, setReference]);\n}\n\nfunction mergeProps(userProps, propsList, elementKey) {\n  const map = new Map();\n  return { ...(elementKey === 'floating' && {\n      tabIndex: -1\n    }),\n    ...userProps,\n    ...propsList.map(value => value ? value[elementKey] : null).concat(userProps).reduce((acc, props) => {\n      if (!props) {\n        return acc;\n      }\n\n      Object.entries(props).forEach(_ref => {\n        let [key, value] = _ref;\n\n        if (key.indexOf('on') === 0) {\n          if (!map.has(key)) {\n            map.set(key, []);\n          }\n\n          if (typeof value === 'function') {\n            var _map$get;\n\n            (_map$get = map.get(key)) == null ? void 0 : _map$get.push(value);\n          }\n\n          acc[key] = function () {\n            var _map$get2;\n\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            (_map$get2 = map.get(key)) == null ? void 0 : _map$get2.forEach(fn => fn(...args));\n          };\n        } else {\n          acc[key] = value;\n        }\n      });\n      return acc;\n    }, {})\n  };\n}\n\nconst useInteractions = function (propsList) {\n  if (propsList === void 0) {\n    propsList = [];\n  }\n\n  return {\n    getReferenceProps: userProps => mergeProps(userProps, propsList, 'reference'),\n    getFloatingProps: userProps => mergeProps(userProps, propsList, 'floating'),\n    getItemProps: userProps => mergeProps(userProps, propsList, 'item')\n  };\n};\n\nfunction getChildren(nodes, id) {\n  var _nodes$filter;\n\n  let allChildren = (_nodes$filter = nodes.filter(node => {\n    var _node$context;\n\n    return node.parentId === id && ((_node$context = node.context) == null ? void 0 : _node$context.open);\n  })) != null ? _nodes$filter : [];\n  let currentChildren = allChildren;\n\n  while (currentChildren.length) {\n    var _nodes$filter2;\n\n    currentChildren = (_nodes$filter2 = nodes.filter(node => {\n      var _currentChildren;\n\n      return (_currentChildren = currentChildren) == null ? void 0 : _currentChildren.some(n => {\n        var _node$context2;\n\n        return node.parentId === n.id && ((_node$context2 = node.context) == null ? void 0 : _node$context2.open);\n      });\n    })) != null ? _nodes$filter2 : [];\n    allChildren = allChildren.concat(currentChildren);\n  }\n\n  return allChildren;\n}\n\nfunction isPointInPolygon(point, polygon) {\n  const [x, y] = point;\n  let isInside = false;\n  const length = polygon.length;\n\n  for (let i = 0, j = length - 1; i < length; j = i++) {\n    const [xi, yi] = polygon[i] || [0, 0];\n    const [xj, yj] = polygon[j] || [0, 0];\n    const intersect = yi >= y !== yj >= y && x <= (xj - xi) * (y - yi) / (yj - yi) + xi;\n\n    if (intersect) {\n      isInside = !isInside;\n    }\n  }\n\n  return isInside;\n}\n\nfunction safePolygon(_temp) {\n  let {\n    restMs = 0,\n    buffer = 0.5,\n    debug = null\n  } = _temp === void 0 ? {} : _temp;\n  let timeoutId;\n  let polygonIsDestroyed = false;\n  return _ref => {\n    let {\n      x,\n      y,\n      placement,\n      refs,\n      onClose,\n      nodeId,\n      tree,\n      leave = false\n    } = _ref;\n    return function onPointerMove(event) {\n      var _refs$domReference$cu, _refs$floating$curren;\n\n      clearTimeout(timeoutId);\n\n      function close() {\n        clearTimeout(timeoutId);\n        onClose();\n      }\n\n      if (event.pointerType && event.pointerType !== 'mouse') {\n        return;\n      }\n\n      const {\n        clientX,\n        clientY\n      } = event;\n      const target = 'composedPath' in event ? event.composedPath()[0] : event.target;\n      const targetNode = target; // If the pointer is over the reference or floating element already, there\n      // is no need to run the logic.\n\n      if (event.type === 'pointermove' && (_refs$domReference$cu = refs.domReference.current) != null && _refs$domReference$cu.contains(targetNode)) {\n        return;\n      } // If any nested child is open, abort.\n\n\n      if (tree && getChildren(tree.nodesRef.current, nodeId).some(_ref2 => {\n        let {\n          context\n        } = _ref2;\n        return context == null ? void 0 : context.open;\n      })) {\n        return;\n      } // The cursor landed, so we destroy the polygon logic\n\n\n      if ((_refs$floating$curren = refs.floating.current) != null && _refs$floating$curren.contains(targetNode) && !leave) {\n        polygonIsDestroyed = true;\n        return;\n      }\n\n      if (!refs.domReference.current || !refs.floating.current || placement == null || x == null || y == null) {\n        return;\n      }\n\n      const refRect = refs.domReference.current.getBoundingClientRect();\n      const rect = refs.floating.current.getBoundingClientRect();\n      const side = placement.split('-')[0];\n      const cursorLeaveFromRight = x > rect.right - rect.width / 2;\n      const cursorLeaveFromBottom = y > rect.bottom - rect.height / 2; // If the pointer is leaving from the opposite side, the \"buffer\" logic\n      // creates a point where the floating element remains open, but should be\n      // ignored.\n      // A constant of 1 handles floating point rounding errors.\n\n      if (side === 'top' && y >= refRect.bottom - 1 || side === 'bottom' && y <= refRect.top + 1 || side === 'left' && x >= refRect.right - 1 || side === 'right' && x <= refRect.left + 1) {\n        return close();\n      } // Ignore when the cursor is within the rectangular trough between the\n      // two elements. Since the triangle is created from the cursor point,\n      // which can start beyond the ref element's edge, traversing back and\n      // forth from the ref to the floating element can cause it to close. This\n      // ensures it always remains open in that case.\n\n\n      switch (side) {\n        case 'top':\n          if (clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= refRect.top + 1) {\n            return;\n          }\n\n          break;\n\n        case 'bottom':\n          if (clientX >= rect.left && clientX <= rect.right && clientY >= refRect.bottom - 1 && clientY <= rect.bottom) {\n            return;\n          }\n\n          break;\n\n        case 'left':\n          if (clientX >= rect.left && clientX <= refRect.left + 1 && clientY >= rect.top && clientY <= rect.bottom) {\n            return;\n          }\n\n          break;\n\n        case 'right':\n          if (clientX >= refRect.right - 1 && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom) {\n            return;\n          }\n\n          break;\n      }\n\n      if (polygonIsDestroyed) {\n        return close();\n      }\n\n      function getPolygon(_ref3) {\n        let [x, y] = _ref3;\n        const isFloatingWider = rect.width > refRect.width;\n        const isFloatingTaller = rect.height > refRect.height;\n\n        switch (side) {\n          case 'top':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.bottom - buffer : isFloatingWider ? rect.bottom - buffer : rect.top], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.bottom - buffer : rect.top : rect.bottom - buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n\n          case 'bottom':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.top + buffer : isFloatingWider ? rect.top + buffer : rect.bottom], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.top + buffer : rect.bottom : rect.top + buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n\n          case 'left':\n            {\n              const cursorPointOne = [x + buffer + 1, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x + buffer + 1, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.right - buffer : isFloatingTaller ? rect.right - buffer : rect.left, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.right - buffer : rect.left : rect.right - buffer, rect.bottom]];\n              return [...commonPoints, cursorPointOne, cursorPointTwo];\n            }\n\n          case 'right':\n            {\n              const cursorPointOne = [x - buffer, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x - buffer, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.left + buffer : isFloatingTaller ? rect.left + buffer : rect.right, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.left + buffer : rect.right : rect.left + buffer, rect.bottom]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n        }\n      }\n\n      const poly = getPolygon([x, y]);\n\n      if (process.env.NODE_ENV !== \"production\") {\n        debug == null ? void 0 : debug(poly.slice(0, 4).join(', '));\n      }\n\n      if (!isPointInPolygon([clientX, clientY], poly)) {\n        close();\n      } else if (restMs) {\n        timeoutId = setTimeout(onClose, restMs);\n      }\n    };\n  };\n}\n\nconst DEFAULT_ID = 'floating-ui-root';\nconst useFloatingPortalNode = function (_temp) {\n  let {\n    id = DEFAULT_ID,\n    enabled = true\n  } = _temp === void 0 ? {} : _temp;\n  const [portalEl, setPortalEl] = React.useState(null);\n  index(() => {\n    if (!enabled) {\n      return;\n    }\n\n    const rootNode = document.getElementById(id);\n\n    if (rootNode) {\n      setPortalEl(rootNode);\n    } else {\n      const newPortalEl = document.createElement('div');\n      newPortalEl.id = id;\n      setPortalEl(newPortalEl);\n\n      if (!document.body.contains(newPortalEl)) {\n        document.body.appendChild(newPortalEl);\n      }\n    }\n  }, [id, enabled]);\n  return portalEl;\n};\n/**\n * Portals your floating element outside of the main app node.\n * @see https://floating-ui.com/docs/FloatingPortal\n */\n\nconst FloatingPortal = _ref => {\n  let {\n    children,\n    id = DEFAULT_ID,\n    root = null\n  } = _ref;\n  const portalNode = useFloatingPortalNode({\n    id,\n    enabled: !root\n  });\n\n  if (root) {\n    return /*#__PURE__*/createPortal(children, root);\n  }\n\n  if (portalNode) {\n    return /*#__PURE__*/createPortal(children, portalNode);\n  }\n\n  return null;\n};\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nconst identifier = 'data-floating-ui-scroll-lock';\n// Avoid Chrome DevTools blue warning\nfunction getPlatform() {\n  const uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.platform) {\n    return uaData.platform;\n  }\n\n  return navigator.platform;\n}\n/**\n * Provides base styling for a fixed overlay element to dim content or block\n * pointer events behind a floating element.\n * It's a regular `<div>`, so it can be styled via any CSS solution you prefer.\n * @see https://floating-ui.com/docs/FloatingOverlay\n */\n\nconst FloatingOverlay = /*#__PURE__*/React.forwardRef(function FloatingOverlay(_ref, ref) {\n  let {\n    lockScroll = false,\n    ...rest\n  } = _ref;\n  index(() => {\n    var _window$visualViewpor, _window$visualViewpor2, _window$visualViewpor3, _window$visualViewpor4;\n\n    if (!lockScroll) {\n      return;\n    }\n\n    const alreadyLocked = document.body.hasAttribute(identifier);\n\n    if (alreadyLocked) {\n      return;\n    }\n\n    document.body.setAttribute(identifier, ''); // RTL <body> scrollbar\n\n    const scrollbarX = Math.round(document.documentElement.getBoundingClientRect().left) + document.documentElement.scrollLeft;\n    const paddingProp = scrollbarX ? 'paddingLeft' : 'paddingRight';\n    const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth; // Only iOS doesn't respect `overflow: hidden` on document.body, and this\n    // technique has fewer side effects.\n\n    if (!/iP(hone|ad|od)|iOS/.test(getPlatform())) {\n      Object.assign(document.body.style, {\n        overflow: 'hidden',\n        [paddingProp]: scrollbarWidth + \"px\"\n      });\n      return () => {\n        document.body.removeAttribute(identifier);\n        Object.assign(document.body.style, {\n          overflow: '',\n          [paddingProp]: ''\n        });\n      };\n    } // iOS 12 does not support `visuaViewport`.\n\n\n    const offsetLeft = (_window$visualViewpor = (_window$visualViewpor2 = window.visualViewport) == null ? void 0 : _window$visualViewpor2.offsetLeft) != null ? _window$visualViewpor : 0;\n    const offsetTop = (_window$visualViewpor3 = (_window$visualViewpor4 = window.visualViewport) == null ? void 0 : _window$visualViewpor4.offsetTop) != null ? _window$visualViewpor3 : 0;\n    const scrollX = window.pageXOffset;\n    const scrollY = window.pageYOffset;\n    Object.assign(document.body.style, {\n      position: 'fixed',\n      overflow: 'hidden',\n      top: -(scrollY - Math.floor(offsetTop)) + \"px\",\n      left: -(scrollX - Math.floor(offsetLeft)) + \"px\",\n      right: '0',\n      [paddingProp]: scrollbarWidth + \"px\"\n    });\n    return () => {\n      Object.assign(document.body.style, {\n        position: '',\n        overflow: '',\n        top: '',\n        left: '',\n        right: '',\n        [paddingProp]: ''\n      });\n      document.body.removeAttribute(identifier);\n      window.scrollTo(scrollX, scrollY);\n    };\n  }, [lockScroll]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, rest, {\n    style: {\n      position: 'fixed',\n      overflow: 'auto',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      ...rest.style\n    }\n  }));\n});\n\n/**\n * Find the real active element. Traverses into shadowRoots.\n */\nfunction activeElement(doc) {\n  let activeElement = doc.activeElement;\n\n  while (((_activeElement = activeElement) == null ? void 0 : (_activeElement$shadow = _activeElement.shadowRoot) == null ? void 0 : _activeElement$shadow.activeElement) != null) {\n    var _activeElement, _activeElement$shadow;\n\n    activeElement = activeElement.shadowRoot.activeElement;\n  }\n\n  return activeElement;\n}\n\nfunction getAncestors(nodes, id) {\n  var _nodes$find;\n\n  let allAncestors = [];\n  let currentParentId = (_nodes$find = nodes.find(node => node.id === id)) == null ? void 0 : _nodes$find.parentId;\n\n  while (currentParentId) {\n    const currentNode = nodes.find(node => node.id === currentParentId);\n    currentParentId = currentNode == null ? void 0 : currentNode.parentId;\n\n    if (currentNode) {\n      allAncestors = allAncestors.concat(currentNode);\n    }\n  }\n\n  return allAncestors;\n}\n\nconst TYPEABLE_SELECTOR = \"input:not([type='hidden']):not([disabled]),\" + \"[contenteditable]:not([contenteditable='false']),textarea:not([disabled])\";\nfunction isTypeableElement(element) {\n  return isHTMLElement(element) && element.matches(TYPEABLE_SELECTOR);\n}\n\nfunction stopEvent(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nfunction useLatestRef(value) {\n  const ref = useRef(value);\n  index(() => {\n    ref.current = value;\n  });\n  return ref;\n}\n\nfunction focus(el) {\n  // `pointerDown` clicks occur before `focus`, so the button will steal the\n  // focus unless we wait a frame.\n  requestAnimationFrame(() => {\n    el == null ? void 0 : el.focus();\n  });\n}\n\nconst SELECTOR = 'select:not([disabled]),a[href],button:not([disabled]),[tabindex],' + 'iframe,object,embed,area[href],audio[controls],video[controls],' + TYPEABLE_SELECTOR;\nconst FocusGuard = /*#__PURE__*/React.forwardRef(function FocusGuard(props, ref) {\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, props, {\n    ref: ref,\n    tabIndex: 0,\n    style: {\n      position: 'fixed',\n      opacity: '0',\n      pointerEvents: 'none',\n      outline: '0'\n    }\n  }));\n});\n\n/**\n * Provides focus management for the floating element.\n * @see https://floating-ui.com/docs/FloatingFocusManager\n */\nfunction FloatingFocusManager(_ref) {\n  let {\n    context: {\n      refs,\n      nodeId,\n      onOpenChange,\n      dataRef,\n      events\n    },\n    children,\n    order = ['content'],\n    endGuard = true,\n    preventTabbing = false,\n    initialFocus = 0,\n    returnFocus = true,\n    modal = true\n  } = _ref;\n  const orderRef = useLatestRef(order);\n  const onOpenChangeRef = useLatestRef(onOpenChange);\n  const tree = useFloatingTree();\n  const getTabbableElements = React.useCallback(() => {\n    return orderRef.current.map(type => {\n      if (type === 'reference') {\n        return refs.domReference.current;\n      }\n\n      if (refs.floating.current && type === 'floating') {\n        return refs.floating.current;\n      }\n\n      if (type === 'content') {\n        var _refs$floating$curren, _refs$floating$curren2;\n\n        return Array.from((_refs$floating$curren = (_refs$floating$curren2 = refs.floating.current) == null ? void 0 : _refs$floating$curren2.querySelectorAll(SELECTOR)) != null ? _refs$floating$curren : []);\n      }\n\n      return null;\n    }).flat().filter(el => {\n      if (el === refs.floating.current || el === refs.domReference.current) {\n        return true;\n      }\n\n      if (isHTMLElement(el)) {\n        var _el$getAttribute;\n\n        const tabIndex = (_el$getAttribute = el.getAttribute('tabindex')) != null ? _el$getAttribute : '0';\n        return tabIndex[0].trim() !== '-';\n      }\n    });\n  }, [orderRef, refs]);\n  React.useEffect(() => {\n    if (!modal) {\n      return;\n    } // If the floating element has no focusable elements inside it, fallback\n    // to focusing the floating element and preventing tab navigation\n\n\n    const noTabbableContentElements = getTabbableElements().filter(el => el !== refs.floating.current && el !== refs.domReference.current).length === 0;\n\n    function onKeyDown(event) {\n      if (event.key === 'Tab') {\n        if (preventTabbing || noTabbableContentElements) {\n          stopEvent(event);\n        }\n\n        const els = getTabbableElements();\n        const target = 'composedPath' in event ? event.composedPath()[0] : // TS thinks `event` is of type never as it assumes all browsers\n        // support composedPath, but browsers without shadow dom don't\n        event.target;\n\n        if (orderRef.current[0] === 'reference' && target === refs.domReference.current) {\n          stopEvent(event);\n\n          if (event.shiftKey) {\n            focus(els[els.length - 1]);\n          } else {\n            focus(els[1]);\n          }\n        }\n\n        if (orderRef.current[1] === 'floating' && target === refs.floating.current && event.shiftKey) {\n          stopEvent(event);\n          focus(els[0]);\n        }\n      }\n    }\n\n    const doc = getDocument(refs.floating.current);\n    doc.addEventListener('keydown', onKeyDown);\n    return () => {\n      doc.removeEventListener('keydown', onKeyDown);\n    };\n  }, [preventTabbing, modal, getTabbableElements, orderRef, refs]);\n  React.useEffect(() => {\n    function onFocusOut(event) {\n      var _refs$floating$curren3, _getAncestors;\n\n      const relatedTarget = event.relatedTarget;\n      const focusMovedOutsideFloating = !((_refs$floating$curren3 = refs.floating.current) != null && _refs$floating$curren3.contains(relatedTarget));\n      const focusMovedOutsideReference = isElement(refs.domReference.current) && !refs.domReference.current.contains(relatedTarget);\n      const isChildOpen = tree && getChildren(tree.nodesRef.current, nodeId).length > 0;\n      const isParentRelated = tree && event.currentTarget === refs.domReference.current && ((_getAncestors = getAncestors(tree.nodesRef.current, nodeId)) == null ? void 0 : _getAncestors.some(node => {\n        var _node$context, _node$context$refs$fl;\n\n        return (_node$context = node.context) == null ? void 0 : (_node$context$refs$fl = _node$context.refs.floating.current) == null ? void 0 : _node$context$refs$fl.contains(relatedTarget);\n      }));\n\n      if (focusMovedOutsideFloating && focusMovedOutsideReference && !isChildOpen && !isParentRelated) {\n        onOpenChangeRef.current(false);\n      }\n    }\n\n    const floating = refs.floating.current;\n    const reference = refs.domReference.current;\n\n    if (floating && isHTMLElement(reference)) {\n      !modal && floating.addEventListener('focusout', onFocusOut);\n      !modal && reference.addEventListener('focusout', onFocusOut);\n      let cleanup;\n\n      if (modal) {\n        if (orderRef.current.includes('reference')) {\n          cleanup = hideOthers([reference, floating]);\n        } else {\n          cleanup = hideOthers(floating);\n        }\n      }\n\n      return () => {\n        !modal && floating.removeEventListener('focusout', onFocusOut);\n        !modal && reference.removeEventListener('focusout', onFocusOut);\n        cleanup == null ? void 0 : cleanup();\n      };\n    }\n  }, [nodeId, tree, modal, onOpenChangeRef, orderRef, dataRef, getTabbableElements, refs]);\n  React.useEffect(() => {\n    if (preventTabbing) {\n      return;\n    }\n\n    let returnFocusValue = returnFocus;\n    const floating = refs.floating.current;\n    const previouslyFocusedElement = activeElement(getDocument(floating));\n\n    if (typeof initialFocus === 'number') {\n      var _getTabbableElements$;\n\n      focus((_getTabbableElements$ = getTabbableElements()[initialFocus]) != null ? _getTabbableElements$ : floating);\n    } else if (isHTMLElement(initialFocus == null ? void 0 : initialFocus.current)) {\n      var _initialFocus$current;\n\n      focus((_initialFocus$current = initialFocus.current) != null ? _initialFocus$current : floating);\n    } // Dismissing via outside `pointerdown` should always ignore `returnFocus`\n    // to prevent unwanted scrolling. The `esc` key will continue to focus the\n    // reference.\n\n\n    function onDismiss() {\n      returnFocusValue = false;\n    }\n\n    events.on('dismiss', onDismiss);\n    return () => {\n      events.off('dismiss', onDismiss);\n\n      if (returnFocusValue && isHTMLElement(previouslyFocusedElement)) {\n        focus(previouslyFocusedElement);\n      }\n    };\n  }, [preventTabbing, getTabbableElements, initialFocus, returnFocus, refs, events]);\n\n  const isTypeableCombobox = () => {\n    var _refs$domReference$cu;\n\n    return ((_refs$domReference$cu = refs.domReference.current) == null ? void 0 : _refs$domReference$cu.getAttribute('role')) === 'combobox' && isTypeableElement(refs.domReference.current);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, modal && /*#__PURE__*/React.createElement(FocusGuard, {\n    onFocus: event => {\n      if (isTypeableCombobox()) {\n        return;\n      }\n\n      stopEvent(event);\n      const els = getTabbableElements();\n\n      if (order[0] === 'reference') {\n        focus(els[0]);\n      } else {\n        focus(els[els.length - 1]);\n      }\n    }\n  }), /*#__PURE__*/React.cloneElement(children, order.includes('floating') ? {\n    tabIndex: 0\n  } : {}), modal && endGuard && /*#__PURE__*/React.createElement(FocusGuard, {\n    onFocus: event => {\n      if (isTypeableCombobox()) {\n        return;\n      }\n\n      stopEvent(event);\n      focus(getTabbableElements()[0]);\n    }\n  }));\n}\n\nfunction usePrevious(value) {\n  const ref = useRef();\n  index(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\nfunction getDelay(value, prop, pointerType) {\n  if (pointerType && pointerType !== 'mouse') {\n    return 0;\n  }\n\n  if (typeof value === 'number') {\n    return value;\n  }\n\n  return value == null ? void 0 : value[prop];\n}\n\n/**\n * Adds hover event listeners that change the open state, like CSS :hover.\n * @see https://floating-ui.com/docs/useHover\n */\nconst useHover = function (context, _temp) {\n  let {\n    enabled = true,\n    delay = 0,\n    handleClose = null,\n    mouseOnly = false,\n    restMs = 0\n  } = _temp === void 0 ? {} : _temp;\n  const {\n    open,\n    onOpenChange,\n    dataRef,\n    events,\n    refs\n  } = context;\n  const tree = useFloatingTree();\n  const parentId = useFloatingParentNodeId();\n  const onOpenChangeRef = useLatestRef(onOpenChange);\n  const handleCloseRef = useLatestRef(handleClose);\n  const previousOpen = usePrevious(open);\n  const pointerTypeRef = React.useRef();\n  const timeoutRef = React.useRef();\n  const handlerRef = React.useRef();\n  const restTimeoutRef = React.useRef();\n  const blockMouseMoveRef = React.useRef(true);\n  const performedPointerEventsMutationRef = React.useRef(false);\n  React.useEffect(() => {\n    if (!enabled) {\n      return;\n    }\n\n    function onDismiss() {\n      clearTimeout(timeoutRef.current);\n      clearTimeout(restTimeoutRef.current);\n      blockMouseMoveRef.current = true;\n    }\n\n    events.on('dismiss', onDismiss);\n    return () => {\n      events.off('dismiss', onDismiss);\n    };\n  }, [enabled, events, refs]);\n  React.useEffect(() => {\n    if (!enabled || !handleCloseRef.current) {\n      return;\n    }\n\n    function onLeave() {\n      var _dataRef$current$open;\n\n      if ((_dataRef$current$open = dataRef.current.openEvent) != null && _dataRef$current$open.type.includes('mouse')) {\n        onOpenChangeRef.current(false);\n      }\n    }\n\n    const html = getDocument(refs.floating.current).documentElement;\n    html.addEventListener('mouseleave', onLeave);\n    return () => {\n      html.removeEventListener('mouseleave', onLeave);\n    };\n  }, [refs, onOpenChangeRef, enabled, handleCloseRef, dataRef]);\n  const closeWithDelay = React.useCallback(function (runElseBranch) {\n    if (runElseBranch === void 0) {\n      runElseBranch = true;\n    }\n\n    const closeDelay = getDelay(delay, 'close', pointerTypeRef.current);\n\n    if (closeDelay && !handlerRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = setTimeout(() => onOpenChangeRef.current(false), closeDelay);\n    } else if (runElseBranch) {\n      clearTimeout(timeoutRef.current);\n      onOpenChangeRef.current(false);\n    }\n  }, [delay, onOpenChangeRef]);\n  const cleanupPointerMoveHandler = React.useCallback(() => {\n    if (handlerRef.current) {\n      getDocument(refs.floating.current).removeEventListener('pointermove', handlerRef.current);\n      handlerRef.current = undefined;\n    }\n  }, [refs]);\n  const clearPointerEvents = React.useCallback(() => {\n    getDocument(refs.floating.current).body.style.pointerEvents = '';\n    performedPointerEventsMutationRef.current = false;\n  }, [refs]); // Registering the mouse events on the reference directly to bypass React's\n  // delegation system. If the cursor was on a disabled element and then entered\n  // the reference (no gap), `mouseenter` doesn't fire in the delegation system.\n\n  React.useEffect(() => {\n    if (!enabled) {\n      return;\n    }\n\n    function onMouseEnter(event) {\n      clearTimeout(timeoutRef.current);\n      blockMouseMoveRef.current = false;\n\n      if (open || mouseOnly && pointerTypeRef.current !== 'mouse' || restMs > 0 && getDelay(delay, 'open') === 0) {\n        return;\n      }\n\n      dataRef.current.openEvent = event;\n      const openDelay = getDelay(delay, 'open', pointerTypeRef.current);\n\n      if (openDelay) {\n        timeoutRef.current = setTimeout(() => {\n          onOpenChangeRef.current(true);\n        }, openDelay);\n      } else {\n        onOpenChangeRef.current(true);\n      }\n    }\n\n    function onMouseLeave(event) {\n      var _dataRef$current$open2, _dataRef$current$open3;\n\n      if (((_dataRef$current$open2 = dataRef.current.openEvent) == null ? void 0 : _dataRef$current$open2.type) === 'click' || ((_dataRef$current$open3 = dataRef.current.openEvent) == null ? void 0 : _dataRef$current$open3.type) === 'pointerdown') {\n        return;\n      }\n\n      const doc = getDocument(refs.floating.current);\n      clearTimeout(restTimeoutRef.current);\n\n      if (handleCloseRef.current) {\n        clearTimeout(timeoutRef.current);\n        handlerRef.current && doc.removeEventListener('pointermove', handlerRef.current);\n        handlerRef.current = handleCloseRef.current({ ...context,\n          tree,\n          x: event.clientX,\n          y: event.clientY,\n\n          onClose() {\n            cleanupPointerMoveHandler();\n            closeWithDelay();\n          }\n\n        });\n        doc.addEventListener('pointermove', handlerRef.current);\n        return;\n      }\n\n      closeWithDelay();\n    } // Ensure the floating element closes after scrolling even if the pointer\n    // did not move.\n    // https://github.com/floating-ui/floating-ui/discussions/1692\n\n\n    function onScrollMouseLeave(event) {\n      handleCloseRef.current == null ? void 0 : handleCloseRef.current({ ...context,\n        tree,\n        x: event.clientX,\n        y: event.clientY,\n        leave: true,\n\n        onClose() {\n          cleanupPointerMoveHandler();\n          closeWithDelay();\n        }\n\n      })(event);\n    }\n\n    const floating = refs.floating.current;\n    const reference = refs.domReference.current;\n\n    if (isElement(reference)) {\n      open && reference.addEventListener('mouseleave', onScrollMouseLeave);\n      floating == null ? void 0 : floating.addEventListener('mouseleave', onScrollMouseLeave);\n      reference.addEventListener('mousemove', onMouseEnter, {\n        once: true\n      });\n      reference.addEventListener('mouseenter', onMouseEnter);\n      reference.addEventListener('mouseleave', onMouseLeave);\n      return () => {\n        open && reference.removeEventListener('mouseleave', onScrollMouseLeave);\n        floating == null ? void 0 : floating.removeEventListener('mouseleave', onScrollMouseLeave);\n        reference.removeEventListener('mousemove', onMouseEnter);\n        reference.removeEventListener('mouseenter', onMouseEnter);\n        reference.removeEventListener('mouseleave', onMouseLeave);\n      };\n    }\n  }, [enabled, closeWithDelay, context, delay, handleCloseRef, dataRef, mouseOnly, onOpenChangeRef, open, tree, restMs, cleanupPointerMoveHandler, refs]); // Block pointer-events of every element other than the reference and floating\n  // while the floating element is open and has a `handleClose` handler. Also\n  // handles nested floating elements.\n  // https://github.com/floating-ui/floating-ui/issues/1722\n\n  index(() => {\n    if (!enabled) {\n      return;\n    }\n\n    if (open && handleCloseRef.current) {\n      getDocument(refs.floating.current).body.style.pointerEvents = 'none';\n      performedPointerEventsMutationRef.current = true;\n      const reference = refs.domReference.current;\n      const floating = refs.floating.current;\n\n      if (isHTMLElement(reference) && floating) {\n        var _tree$nodesRef$curren, _tree$nodesRef$curren2;\n\n        const parentFloating = tree == null ? void 0 : (_tree$nodesRef$curren = tree.nodesRef.current.find(node => node.id === parentId)) == null ? void 0 : (_tree$nodesRef$curren2 = _tree$nodesRef$curren.context) == null ? void 0 : _tree$nodesRef$curren2.refs.floating.current;\n\n        if (parentFloating) {\n          parentFloating.style.pointerEvents = '';\n        }\n\n        reference.style.pointerEvents = 'auto';\n        floating.style.pointerEvents = 'auto';\n        return () => {\n          reference.style.pointerEvents = '';\n          floating.style.pointerEvents = '';\n        };\n      }\n    }\n  }, [enabled, open, parentId, refs, tree, handleCloseRef, dataRef]);\n  index(() => {\n    if (previousOpen && !open) {\n      pointerTypeRef.current = undefined;\n      cleanupPointerMoveHandler();\n      clearPointerEvents();\n    }\n  });\n  React.useEffect(() => {\n    return () => {\n      cleanupPointerMoveHandler();\n      clearTimeout(timeoutRef.current);\n      clearTimeout(restTimeoutRef.current);\n\n      if (performedPointerEventsMutationRef.current) {\n        clearPointerEvents();\n      }\n    };\n  }, [cleanupPointerMoveHandler, clearPointerEvents]);\n\n  if (!enabled) {\n    return {};\n  }\n\n  function setPointerRef(event) {\n    pointerTypeRef.current = event.pointerType;\n  }\n\n  return {\n    reference: {\n      onPointerDown: setPointerRef,\n      onPointerEnter: setPointerRef,\n\n      onMouseMove() {\n        if (open || restMs === 0) {\n          return;\n        }\n\n        clearTimeout(restTimeoutRef.current);\n        restTimeoutRef.current = setTimeout(() => {\n          if (!blockMouseMoveRef.current) {\n            onOpenChange(true);\n          }\n        }, restMs);\n      }\n\n    },\n    floating: {\n      onMouseEnter() {\n        clearTimeout(timeoutRef.current);\n      },\n\n      onMouseLeave() {\n        closeWithDelay(false);\n      }\n\n    }\n  };\n};\n\nconst FloatingDelayGroupContext = /*#__PURE__*/React.createContext({\n  delay: 1000,\n  initialDelay: 1000,\n  currentId: null,\n  setCurrentId: () => {},\n  setState: () => {}\n});\nconst useDelayGroupContext = () => React.useContext(FloatingDelayGroupContext);\n/**\n * Provides context for a group of floating elements that should share a\n * `delay`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\n\nconst FloatingDelayGroup = _ref => {\n  let {\n    children,\n    delay\n  } = _ref;\n  const [state, setState] = React.useState({\n    delay,\n    initialDelay: delay,\n    currentId: null\n  });\n  const setCurrentId = React.useCallback(currentId => {\n    setState(state => ({ ...state,\n      currentId\n    }));\n  }, []);\n  return /*#__PURE__*/React.createElement(FloatingDelayGroupContext.Provider, {\n    value: React.useMemo(() => ({ ...state,\n      setState,\n      setCurrentId\n    }), [state, setState, setCurrentId])\n  }, children);\n};\nconst useDelayGroup = (_ref2, _ref3) => {\n  let {\n    open,\n    onOpenChange\n  } = _ref2;\n  let {\n    id\n  } = _ref3;\n  const {\n    currentId,\n    initialDelay,\n    setState\n  } = useDelayGroupContext();\n  const onOpenChangeRef = useLatestRef(onOpenChange);\n  React.useEffect(() => {\n    if (currentId && onOpenChangeRef.current) {\n      setState(state => ({ ...state,\n        delay: {\n          open: 1,\n          close: getDelay(initialDelay, 'close')\n        }\n      }));\n\n      if (currentId !== id) {\n        onOpenChangeRef.current(false);\n      }\n    }\n  }, [id, onOpenChangeRef, setState, currentId, initialDelay]);\n  React.useEffect(() => {\n    if (!open && currentId === id && onOpenChangeRef.current) {\n      onOpenChangeRef.current(false);\n      setState(state => ({ ...state,\n        delay: initialDelay,\n        currentId: null\n      }));\n    }\n  }, [open, setState, currentId, id, onOpenChangeRef, initialDelay]);\n};\n\n/**\n * Adds relevant screen reader props for a given element `role`.\n * @see https://floating-ui.com/docs/useRole\n */\nconst useRole = function (_ref, _temp) {\n  let {\n    open\n  } = _ref;\n  let {\n    enabled = true,\n    role = 'dialog'\n  } = _temp === void 0 ? {} : _temp;\n  const rootId = useId();\n  const referenceId = useId();\n  const floatingProps = {\n    id: rootId,\n    role\n  };\n\n  if (!enabled) {\n    return {};\n  }\n\n  if (role === 'tooltip') {\n    return {\n      reference: {\n        'aria-describedby': open ? rootId : undefined\n      },\n      floating: floatingProps\n    };\n  }\n\n  return {\n    reference: {\n      'aria-expanded': open ? 'true' : 'false',\n      'aria-haspopup': role,\n      'aria-controls': open ? rootId : undefined,\n      ...(role === 'listbox' && {\n        role: 'combobox'\n      }),\n      ...(role === 'menu' && {\n        id: referenceId\n      })\n    },\n    floating: { ...floatingProps,\n      ...(role === 'menu' && {\n        'aria-labelledby': referenceId\n      })\n    }\n  };\n};\n\n/**\n * Adds click event listeners that change the open state.\n * @see https://floating-ui.com/docs/useClick\n */\nconst useClick = function (_ref, _temp) {\n  let {\n    open,\n    onOpenChange,\n    dataRef,\n    refs\n  } = _ref;\n  let {\n    enabled = true,\n    pointerDown = false,\n    toggle = true,\n    ignoreMouse = false\n  } = _temp === void 0 ? {} : _temp;\n  const pointerTypeRef = React.useRef();\n\n  function isButton() {\n    var _refs$domReference$cu;\n\n    return ((_refs$domReference$cu = refs.domReference.current) == null ? void 0 : _refs$domReference$cu.tagName) === 'BUTTON';\n  }\n\n  function isSpaceIgnored() {\n    return isTypeableElement(refs.domReference.current);\n  }\n\n  if (!enabled) {\n    return {};\n  }\n\n  return {\n    reference: {\n      onPointerDown(event) {\n        // Ignore all buttons except for the \"main\" button.\n        // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n        if (event.button !== 0) {\n          return;\n        }\n\n        pointerTypeRef.current = event.pointerType;\n\n        if (pointerTypeRef.current === 'mouse' && ignoreMouse) {\n          return;\n        }\n\n        if (!pointerDown) {\n          return;\n        }\n\n        if (open) {\n          if (toggle && (dataRef.current.openEvent ? dataRef.current.openEvent.type === 'pointerdown' : true)) {\n            onOpenChange(false);\n          }\n        } else {\n          onOpenChange(true);\n        }\n\n        dataRef.current.openEvent = event.nativeEvent;\n      },\n\n      onClick(event) {\n        if (pointerDown && pointerTypeRef.current) {\n          pointerTypeRef.current = undefined;\n          return;\n        }\n\n        if (pointerTypeRef.current === 'mouse' && ignoreMouse) {\n          return;\n        }\n\n        if (open) {\n          if (toggle && (dataRef.current.openEvent ? dataRef.current.openEvent.type === 'click' : true)) {\n            onOpenChange(false);\n          }\n        } else {\n          onOpenChange(true);\n        }\n\n        dataRef.current.openEvent = event.nativeEvent;\n      },\n\n      onKeyDown(event) {\n        pointerTypeRef.current = undefined;\n\n        if (isButton()) {\n          return;\n        }\n\n        if (event.key === ' ' && !isSpaceIgnored()) {\n          // Prvent scrolling\n          event.preventDefault();\n        }\n\n        if (event.key === 'Enter') {\n          if (open) {\n            if (toggle) {\n              onOpenChange(false);\n            }\n          } else {\n            onOpenChange(true);\n          }\n        }\n      },\n\n      onKeyUp(event) {\n        if (isButton() || isSpaceIgnored()) {\n          return;\n        }\n\n        if (event.key === ' ') {\n          if (open) {\n            if (toggle) {\n              onOpenChange(false);\n            }\n          } else {\n            onOpenChange(true);\n          }\n        }\n      }\n\n    }\n  };\n};\n\n/**\n * Check whether the event.target is within the provided node. Uses event.composedPath if available for custom element support.\n *\n * @param event The event whose target/composedPath to check\n * @param node The node to check against\n * @returns Whether the event.target/composedPath is within the node.\n */\nfunction isEventTargetWithin(event, node) {\n  if (node == null) {\n    return false;\n  }\n\n  if ('composedPath' in event) {\n    return event.composedPath().includes(node);\n  } // TS thinks `event` is of type never as it assumes all browsers support composedPath, but browsers without shadow dom don't\n\n\n  const e = event;\n  return e.target != null && node.contains(e.target);\n}\n\n/**\n * Adds listeners that dismiss (close) the floating element.\n * @see https://floating-ui.com/docs/useDismiss\n */\nconst useDismiss = function (_ref, _temp) {\n  let {\n    open,\n    onOpenChange,\n    refs,\n    events,\n    nodeId\n  } = _ref;\n  let {\n    enabled = true,\n    escapeKey = true,\n    outsidePointerDown = true,\n    referencePointerDown = false,\n    ancestorScroll = false,\n    bubbles = true\n  } = _temp === void 0 ? {} : _temp;\n  const tree = useFloatingTree();\n  const onOpenChangeRef = useLatestRef(onOpenChange);\n  const isFocusInsideFloating = React.useCallback(() => {\n    var _refs$floating$curren;\n\n    return (_refs$floating$curren = refs.floating.current) == null ? void 0 : _refs$floating$curren.contains(activeElement(getDocument(refs.floating.current)));\n  }, [refs]);\n  React.useEffect(() => {\n    if (!open || !enabled) {\n      return;\n    }\n\n    function onKeyDown(event) {\n      if (event.key === 'Escape') {\n        if (!bubbles && !isFocusInsideFloating()) {\n          return;\n        }\n\n        events.emit('dismiss');\n        onOpenChangeRef.current(false);\n\n        if (isHTMLElement(refs.domReference.current)) {\n          refs.domReference.current.focus();\n        }\n      }\n    }\n\n    function onPointerDown(event) {\n      const targetIsInsideChildren = tree && getChildren(tree.nodesRef.current, nodeId).some(node => {\n        var _node$context;\n\n        return isEventTargetWithin(event, (_node$context = node.context) == null ? void 0 : _node$context.refs.floating.current);\n      });\n\n      if (isEventTargetWithin(event, refs.floating.current) || isEventTargetWithin(event, refs.domReference.current) || targetIsInsideChildren) {\n        return;\n      }\n\n      if (!bubbles && !isFocusInsideFloating()) {\n        return;\n      }\n\n      events.emit('dismiss');\n      onOpenChangeRef.current(false);\n    }\n\n    function onScroll() {\n      onOpenChangeRef.current(false);\n    }\n\n    const doc = getDocument(refs.floating.current);\n    escapeKey && doc.addEventListener('keydown', onKeyDown); // Use `mousedown` instead of `pointerdown` as it acts more like a click\n    // on touch devices than a `touchstart` (which can result in accidental\n    // dismissals too easily.)\n\n    outsidePointerDown && doc.addEventListener('mousedown', onPointerDown);\n    const ancestors = (ancestorScroll ? [...(isElement(refs.reference.current) ? getOverflowAncestors(refs.reference.current) : []), ...(isElement(refs.floating.current) ? getOverflowAncestors(refs.floating.current) : [])] : []).filter(ancestor => {\n      var _doc$defaultView;\n\n      return (// Ignore the visual viewport for scrolling dismissal (allow pinch-zoom)\n        ancestor !== ((_doc$defaultView = doc.defaultView) == null ? void 0 : _doc$defaultView.visualViewport)\n      );\n    });\n    ancestors.forEach(ancestor => ancestor.addEventListener('scroll', onScroll, {\n      passive: true\n    }));\n    return () => {\n      escapeKey && doc.removeEventListener('keydown', onKeyDown);\n      outsidePointerDown && doc.removeEventListener('mousedown', onPointerDown);\n      ancestors.forEach(ancestor => ancestor.removeEventListener('scroll', onScroll));\n    };\n  }, [escapeKey, outsidePointerDown, events, tree, nodeId, open, onOpenChangeRef, ancestorScroll, enabled, bubbles, isFocusInsideFloating, refs]);\n\n  if (!enabled) {\n    return {};\n  }\n\n  return {\n    reference: {\n      onPointerDown() {\n        if (referencePointerDown) {\n          events.emit('dismiss');\n          onOpenChange(false);\n        }\n      }\n\n    }\n  };\n};\n\n/**\n * Adds focus event listeners that change the open state, like CSS :focus.\n * @see https://floating-ui.com/docs/useFocus\n */\nconst useFocus = function (_ref, _temp) {\n  let {\n    open,\n    onOpenChange,\n    dataRef,\n    refs,\n    events\n  } = _ref;\n  let {\n    enabled = true,\n    keyboardOnly = true\n  } = _temp === void 0 ? {} : _temp;\n  const pointerTypeRef = React.useRef('');\n  const blockFocusRef = React.useRef(false);\n  React.useEffect(() => {\n    var _doc$defaultView;\n\n    if (!enabled) {\n      return;\n    }\n\n    const doc = getDocument(refs.floating.current);\n    const win = (_doc$defaultView = doc.defaultView) != null ? _doc$defaultView : window;\n\n    function onBlur() {\n      if (pointerTypeRef.current && refs.domReference.current === activeElement(doc)) {\n        blockFocusRef.current = !open;\n      }\n    }\n\n    function onFocus() {\n      setTimeout(() => {\n        blockFocusRef.current = false;\n        pointerTypeRef.current = '';\n      });\n    }\n\n    win.addEventListener('focus', onFocus);\n    win.addEventListener('blur', onBlur);\n    return () => {\n      win.removeEventListener('focus', onFocus);\n      win.removeEventListener('blur', onBlur);\n    };\n  }, [refs, open, enabled]);\n  React.useEffect(() => {\n    if (!enabled) {\n      return;\n    }\n\n    function onDismiss() {\n      blockFocusRef.current = true;\n    }\n\n    events.on('dismiss', onDismiss);\n    return () => {\n      events.off('dismiss', onDismiss);\n    };\n  }, [events, enabled]);\n\n  if (!enabled) {\n    return {};\n  }\n\n  return {\n    reference: {\n      onPointerDown(_ref2) {\n        let {\n          pointerType\n        } = _ref2;\n        pointerTypeRef.current = pointerType;\n        blockFocusRef.current = !!(pointerType && keyboardOnly);\n      },\n\n      onFocus(event) {\n        var _dataRef$current$open, _refs$domReference$cu, _dataRef$current$open2;\n\n        if (blockFocusRef.current) {\n          return;\n        } // Dismiss with click should ignore the subsequent `focus` trigger, but\n        // only if the click originated inside the reference element.\n\n\n        if (event.type === 'focus' && ((_dataRef$current$open = dataRef.current.openEvent) == null ? void 0 : _dataRef$current$open.type) === 'mousedown' && (_refs$domReference$cu = refs.domReference.current) != null && _refs$domReference$cu.contains((_dataRef$current$open2 = dataRef.current.openEvent) == null ? void 0 : _dataRef$current$open2.target)) {\n          return;\n        }\n\n        dataRef.current.openEvent = event.nativeEvent;\n        onOpenChange(true);\n      },\n\n      onBlur(event) {\n        var _refs$floating$curren, _refs$domReference$cu2;\n\n        const target = event.relatedTarget; // When focusing the reference element (e.g. regular click), then\n        // clicking into the floating element, prevent it from hiding.\n        // Note: it must be focusable, e.g. `tabindex=\"-1\"`.\n\n        if ((_refs$floating$curren = refs.floating.current) != null && _refs$floating$curren.contains(target) || (_refs$domReference$cu2 = refs.domReference.current) != null && _refs$domReference$cu2.contains(target)) {\n          return;\n        }\n\n        blockFocusRef.current = false;\n        onOpenChange(false);\n      }\n\n    }\n  };\n};\n\nconst ARROW_UP = 'ArrowUp';\nconst ARROW_DOWN = 'ArrowDown';\nconst ARROW_LEFT = 'ArrowLeft';\nconst ARROW_RIGHT = 'ArrowRight';\n\nfunction isIndexOutOfBounds(listRef, index) {\n  return index < 0 || index >= listRef.current.length;\n}\n\nfunction findNonDisabledIndex(listRef, _temp) {\n  let {\n    startingIndex = -1,\n    decrement = false,\n    disabledIndices\n  } = _temp === void 0 ? {} : _temp;\n  const list = listRef.current;\n  let index = startingIndex;\n\n  do {\n    var _list$index, _list$index2;\n\n    index = index + (decrement ? -1 : 1);\n  } while (index >= 0 && index <= list.length - 1 && (disabledIndices ? disabledIndices.includes(index) : list[index] == null || ((_list$index = list[index]) == null ? void 0 : _list$index.hasAttribute('disabled')) || ((_list$index2 = list[index]) == null ? void 0 : _list$index2.getAttribute('aria-disabled')) === 'true'));\n\n  return index;\n}\n\nfunction doSwitch(orientation, vertical, horizontal) {\n  switch (orientation) {\n    case 'vertical':\n      return vertical;\n\n    case 'horizontal':\n      return horizontal;\n\n    default:\n      return vertical || horizontal;\n  }\n}\n\nfunction isMainOrientationKey(key, orientation) {\n  const vertical = key === ARROW_UP || key === ARROW_DOWN;\n  const horizontal = key === ARROW_LEFT || key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal);\n}\n\nfunction isMainOrientationToEndKey(key, orientation, rtl) {\n  const vertical = key === ARROW_DOWN;\n  const horizontal = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal) || key === 'Enter' || key == ' ' || key === '';\n}\n\nfunction isCrossOrientationOpenKey(key, orientation, rtl) {\n  const vertical = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  const horizontal = key === ARROW_DOWN;\n  return doSwitch(orientation, vertical, horizontal);\n}\n\nfunction isCrossOrientationCloseKey(key, orientation, rtl) {\n  const vertical = rtl ? key === ARROW_RIGHT : key === ARROW_LEFT;\n  const horizontal = key === ARROW_UP;\n  return doSwitch(orientation, vertical, horizontal);\n}\n\nfunction getMinIndex(listRef, disabledIndices) {\n  return findNonDisabledIndex(listRef, {\n    disabledIndices\n  });\n}\n\nfunction getMaxIndex(listRef, disabledIndices) {\n  return findNonDisabledIndex(listRef, {\n    decrement: true,\n    startingIndex: listRef.current.length,\n    disabledIndices\n  });\n}\n\n/**\n * Adds focus-managed indexed navigation via arrow keys to a list of items\n * within the floating element.\n * @see https://floating-ui.com/docs/useListNavigation\n */\nconst useListNavigation = function (_ref, _temp2) {\n  let {\n    open,\n    onOpenChange,\n    refs\n  } = _ref;\n  let {\n    listRef,\n    activeIndex,\n    onNavigate,\n    enabled = true,\n    selectedIndex = null,\n    allowEscape = false,\n    loop = false,\n    nested = false,\n    rtl = false,\n    virtual = false,\n    focusItemOnOpen = 'auto',\n    focusItemOnHover = true,\n    openOnArrowKeyDown = true,\n    disabledIndices = openOnArrowKeyDown ? undefined : [],\n    orientation = 'vertical'\n  } = _temp2 === void 0 ? {\n    listRef: {\n      current: []\n    },\n    activeIndex: null,\n    onNavigate: () => {}\n  } : _temp2;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (allowEscape) {\n      if (!loop) {\n        console.warn(['Floating UI: `useListNavigation` looping must be enabled to allow', 'escaping.'].join(' '));\n      }\n\n      if (!virtual) {\n        console.warn(['Floating UI: `useListNavigation` must be virtual to allow', 'escaping.'].join(' '));\n      }\n    }\n  }\n\n  const parentId = useFloatingParentNodeId();\n  const tree = useFloatingTree();\n  const previousOpen = usePrevious(open);\n  const focusItemOnOpenRef = React.useRef(focusItemOnOpen);\n  const indexRef = React.useRef(selectedIndex != null ? selectedIndex : -1);\n  const keyRef = React.useRef(null);\n  const previousOnNavigateRef = useLatestRef(usePrevious(onNavigate));\n  const onNavigateRef = useLatestRef(onNavigate);\n  const disabledIndicesRef = useLatestRef(disabledIndices);\n  const blockPointerLeaveRef = React.useRef(false);\n  const frameRef = React.useRef(-1);\n  const [activeId, setActiveId] = React.useState();\n  const focusItem = React.useCallback((listRef, indexRef) => {\n    // `pointerDown` clicks occur before `focus`, so the button will steal the\n    // focus unless we wait a frame.\n    frameRef.current = requestAnimationFrame(() => {\n      if (virtual) {\n        var _listRef$current$inde;\n\n        setActiveId((_listRef$current$inde = listRef.current[indexRef.current]) == null ? void 0 : _listRef$current$inde.id);\n      } else {\n        var _listRef$current$inde2;\n\n        (_listRef$current$inde2 = listRef.current[indexRef.current]) == null ? void 0 : _listRef$current$inde2.focus({\n          preventScroll: true\n        });\n      }\n    });\n  }, [virtual]); // Sync `selectedIndex` to be the `activeIndex` upon opening the floating\n  // element. Also, reset `activeIndex` upon closing the floating element.\n\n  index(() => {\n    if (!enabled) {\n      return;\n    }\n\n    if (!previousOpen && open && focusItemOnOpenRef.current && selectedIndex != null) {\n      onNavigateRef.current(selectedIndex);\n    } // Unset `activeIndex`. Since the user can specify `onNavigate`\n    // conditionally (onNavigate: open ? setActiveIndex : setSelectedIndex)\n    // we store and call the previous function\n\n\n    if (previousOpen && !open) {\n      cancelAnimationFrame(frameRef.current);\n      indexRef.current = -1;\n      previousOnNavigateRef.current == null ? void 0 : previousOnNavigateRef.current(null);\n    }\n  }, [open, previousOpen, selectedIndex, listRef, onNavigateRef, previousOnNavigateRef, focusItem, enabled]); // Sync `activeIndex` to be the focused item while the floating element is\n  // open.\n\n  index(() => {\n    if (!enabled) {\n      return;\n    }\n\n    if (open) {\n      if (activeIndex == null) {\n        if (selectedIndex != null) {\n          return;\n        } // Reset while the floating element was open (e.g. the list changed).\n\n\n        if (previousOpen) {\n          indexRef.current = -1;\n          focusItem(listRef, indexRef);\n        } // Initial sync\n\n\n        if (!previousOpen && focusItemOnOpenRef.current && (keyRef.current != null || focusItemOnOpenRef.current === true && keyRef.current == null)) {\n          indexRef.current = keyRef.current == null || isMainOrientationToEndKey(keyRef.current, orientation, rtl) || nested ? getMinIndex(listRef, disabledIndicesRef.current) : getMaxIndex(listRef, disabledIndicesRef.current);\n          onNavigateRef.current(indexRef.current);\n          focusItem(listRef, indexRef);\n        }\n      } else if (!isIndexOutOfBounds(listRef, activeIndex)) {\n        indexRef.current = activeIndex;\n        focusItem(listRef, indexRef);\n      }\n    }\n  }, [open, previousOpen, activeIndex, selectedIndex, nested, listRef, onNavigateRef, focusItem, enabled, allowEscape, orientation, rtl, virtual, disabledIndicesRef]); // Return focus to the reference element when `selectedIndex` is a number and\n  // the floating element closes.\n\n  index(() => {\n    if (!enabled) {\n      return;\n    }\n\n    if (!open && previousOpen && selectedIndex != null && isHTMLElement(refs.domReference.current)) {\n      refs.domReference.current.focus();\n    }\n  }, [refs, selectedIndex, open, previousOpen, enabled]); // Ensure the parent floating element has focus when a nested child closes\n  // to allow arrow key navigation to work after the pointer leaves the child.\n\n  index(() => {\n    if (!enabled) {\n      return;\n    }\n\n    if (!open && previousOpen) {\n      var _tree$nodesRef$curren, _tree$nodesRef$curren2;\n\n      const parentFloating = tree == null ? void 0 : (_tree$nodesRef$curren = tree.nodesRef.current.find(node => node.id === parentId)) == null ? void 0 : (_tree$nodesRef$curren2 = _tree$nodesRef$curren.context) == null ? void 0 : _tree$nodesRef$curren2.refs.floating.current;\n\n      if (parentFloating && !parentFloating.contains(activeElement(getDocument(parentFloating)))) {\n        parentFloating.focus({\n          preventScroll: true\n        });\n      }\n    }\n  }, [enabled, open, previousOpen, tree, parentId]);\n  index(() => {\n    keyRef.current = null;\n  });\n\n  function onKeyDown(event) {\n    blockPointerLeaveRef.current = true;\n\n    if (nested && isCrossOrientationCloseKey(event.key, orientation, rtl)) {\n      stopEvent(event);\n      onOpenChange(false);\n\n      if (isHTMLElement(refs.domReference.current)) {\n        refs.domReference.current.focus();\n      }\n\n      return;\n    }\n\n    const currentIndex = indexRef.current;\n    const minIndex = getMinIndex(listRef, disabledIndices);\n    const maxIndex = getMaxIndex(listRef, disabledIndices);\n\n    if (event.key === 'Home') {\n      indexRef.current = minIndex;\n      onNavigate(indexRef.current);\n    }\n\n    if (event.key === 'End') {\n      indexRef.current = maxIndex;\n      onNavigate(indexRef.current);\n    }\n\n    if (isMainOrientationKey(event.key, orientation)) {\n      stopEvent(event); // Reset the index if no item is focused.\n\n      if (open && !virtual && activeElement(event.currentTarget.ownerDocument) === event.currentTarget) {\n        indexRef.current = isMainOrientationToEndKey(event.key, orientation, rtl) ? minIndex : maxIndex;\n        onNavigate(indexRef.current);\n        return;\n      }\n\n      if (isMainOrientationToEndKey(event.key, orientation, rtl)) {\n        if (loop) {\n          indexRef.current = currentIndex >= maxIndex ? allowEscape && currentIndex !== listRef.current.length ? -1 : minIndex : findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.min(maxIndex, findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          }));\n        }\n      } else {\n        if (loop) {\n          indexRef.current = currentIndex <= minIndex ? allowEscape && currentIndex !== -1 ? listRef.current.length : maxIndex : findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.max(minIndex, findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          }));\n        }\n      }\n\n      if (isIndexOutOfBounds(listRef, indexRef.current)) {\n        onNavigate(null);\n      } else {\n        onNavigate(indexRef.current);\n      }\n    }\n  }\n\n  if (!enabled) {\n    return {};\n  }\n\n  return {\n    reference: { ...(virtual && open && activeIndex != null && {\n        'aria-activedescendant': activeId\n      }),\n\n      onKeyDown(event) {\n        blockPointerLeaveRef.current = true;\n\n        if (virtual && open) {\n          return onKeyDown(event);\n        }\n\n        const isNavigationKey = event.key.indexOf('Arrow') === 0 || event.key === 'Enter' || event.key === ' ' || event.key === '';\n\n        if (isNavigationKey) {\n          keyRef.current = event.key;\n        }\n\n        if (nested) {\n          if (isCrossOrientationOpenKey(event.key, orientation, rtl)) {\n            stopEvent(event);\n\n            if (open) {\n              indexRef.current = getMinIndex(listRef, disabledIndices);\n              onNavigate(indexRef.current);\n            } else {\n              onOpenChange(true);\n            }\n          }\n\n          return;\n        }\n\n        if (isMainOrientationKey(event.key, orientation)) {\n          if (selectedIndex != null) {\n            indexRef.current = selectedIndex;\n          }\n\n          stopEvent(event);\n\n          if (!open && openOnArrowKeyDown) {\n            onOpenChange(true);\n          } else {\n            onKeyDown(event);\n          }\n\n          if (open) {\n            onNavigate(indexRef.current);\n          }\n        }\n      }\n\n    },\n    floating: {\n      'aria-orientation': orientation === 'both' ? undefined : orientation,\n      ...(virtual && activeIndex != null && {\n        'aria-activedescendant': activeId\n      }),\n      onKeyDown,\n\n      onPointerMove() {\n        blockPointerLeaveRef.current = false;\n      }\n\n    },\n    item: {\n      onFocus(_ref2) {\n        let {\n          currentTarget\n        } = _ref2;\n        const index = listRef.current.indexOf(currentTarget);\n\n        if (index !== -1) {\n          onNavigate(index);\n        }\n      },\n\n      onClick: _ref3 => {\n        let {\n          currentTarget\n        } = _ref3;\n        return currentTarget.focus({\n          preventScroll: true\n        });\n      },\n      // Safari\n      ...(focusItemOnHover && {\n        onMouseMove(_ref4) {\n          let {\n            currentTarget\n          } = _ref4;\n          const target = currentTarget;\n\n          if (target) {\n            const index = listRef.current.indexOf(target);\n\n            if (index !== -1) {\n              onNavigate(index);\n            }\n          }\n        },\n\n        onMouseLeave() {\n          if (!blockPointerLeaveRef.current) {\n            indexRef.current = -1;\n            focusItem(listRef, indexRef);\n            onNavigateRef.current(null);\n\n            if (!virtual) {\n              var _refs$floating$curren;\n\n              (_refs$floating$curren = refs.floating.current) == null ? void 0 : _refs$floating$curren.focus({\n                preventScroll: true\n              });\n            }\n          }\n        }\n\n      })\n    }\n  };\n};\n\n/**\n * Provides a matching callback that can be used to focus an item as the user\n * types, often used in tandem with `useListNavigation()`.\n * @see https://floating-ui.com/docs/useTypeahead\n */\nconst useTypeahead = function (_ref, _temp) {\n  var _ref2;\n\n  let {\n    open,\n    dataRef\n  } = _ref;\n  let {\n    listRef,\n    activeIndex,\n    onMatch = () => {},\n    enabled = true,\n    findMatch = null,\n    resetMs = 1000,\n    ignoreKeys = [],\n    selectedIndex = null\n  } = _temp === void 0 ? {\n    listRef: {\n      current: []\n    },\n    activeIndex: null\n  } : _temp;\n  const timeoutIdRef = React.useRef();\n  const stringRef = React.useRef('');\n  const prevIndexRef = React.useRef((_ref2 = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref2 : -1);\n  const matchIndexRef = React.useRef(null);\n  index(() => {\n    if (open) {\n      clearTimeout(timeoutIdRef.current);\n      matchIndexRef.current = null;\n      stringRef.current = '';\n    }\n  }, [open]);\n  index(() => {\n    // Sync arrow key navigation but not typeahead navigation\n    if (open && stringRef.current === '') {\n      var _ref3;\n\n      prevIndexRef.current = (_ref3 = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref3 : -1;\n    }\n  }, [open, selectedIndex, activeIndex]);\n\n  function onKeyDown(event) {\n    if (!event.currentTarget.contains(activeElement(getDocument(event.currentTarget)))) {\n      return;\n    }\n\n    if (stringRef.current.length > 0 && stringRef.current[0] !== ' ') {\n      dataRef.current.typing = true;\n\n      if (event.key === ' ') {\n        stopEvent(event);\n      }\n    }\n\n    const listContent = listRef.current;\n\n    if (listContent == null || ['Home', 'End', 'Escape', 'Enter', 'Tab', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ...ignoreKeys].includes(event.key)) {\n      return;\n    } // Bail out if the list contains a word like \"llama\" or \"aaron\". TODO:\n    // allow it in this case, too.\n\n\n    const allowRapidSuccessionOfFirstLetter = listContent.every(text => {\n      var _text$, _text$2;\n\n      return text ? ((_text$ = text[0]) == null ? void 0 : _text$.toLocaleLowerCase()) !== ((_text$2 = text[1]) == null ? void 0 : _text$2.toLocaleLowerCase()) : true;\n    }); // Allows the user to cycle through items that start with the same letter\n    // in rapid succession\n\n    if (allowRapidSuccessionOfFirstLetter && stringRef.current === event.key) {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n    }\n\n    stringRef.current += event.key;\n    clearTimeout(timeoutIdRef.current);\n    timeoutIdRef.current = setTimeout(() => {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n      dataRef.current.typing = false;\n    }, resetMs);\n    const prevIndex = prevIndexRef.current;\n    const orderedList = [...listContent.slice((prevIndex != null ? prevIndex : 0) + 1), ...listContent.slice(0, (prevIndex != null ? prevIndex : 0) + 1)];\n    const str = findMatch ? findMatch(orderedList, stringRef.current) : orderedList.find(text => (text == null ? void 0 : text.toLocaleLowerCase().indexOf(stringRef.current)) === 0);\n    const index = str ? listContent.indexOf(str) : -1;\n\n    if (index !== -1) {\n      onMatch(index);\n      matchIndexRef.current = index;\n    }\n  }\n\n  if (!enabled) {\n    return {};\n  }\n\n  return {\n    reference: {\n      onKeyDown\n    },\n    floating: {\n      onKeyDown\n    }\n  };\n};\n\nexport { FloatingDelayGroup, FloatingFocusManager, FloatingNode, FloatingOverlay, FloatingPortal, FloatingTree, safePolygon, useClick, useDelayGroup, useDelayGroupContext, useDismiss, useFloating, useFloatingNodeId, useFloatingParentNodeId, useFloatingPortalNode, useFloatingTree, useFocus, useHover, useId, useInteractions, useListNavigation, useRole, useTypeahead };\n","import { useFloating, offset, flip, shift, autoUpdate, useInteractions } from '@floating-ui/react-dom-interactions';\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, getOverflowAncestors, hide, inline, limitShift, offset, safePolygon, shift, size, useClick, useDelayGroup, useDelayGroupContext, useDismiss, useFloating, useFloatingNodeId, useFloatingParentNodeId, useFloatingPortalNode, useFloatingTree, useFocus, useHover, useId, useInteractions, useListNavigation, useRole, useTypeahead } from '@floating-ui/react-dom-interactions';\nimport React, { cloneElement, useRef, useState, useLayoutEffect } from 'react';\nimport { createElementAs, usePlateEditorState, isCollapsed, toDOMRange } from '@udecode/plate-core';\nimport { useReadOnly, useSelected } from 'slate-react';\n\nconst getDefaultBoundingClientRect = () => ({\n  width: 0,\n  height: 0,\n  x: 0,\n  y: 0,\n  top: -9999,\n  left: -9999,\n  right: 9999,\n  bottom: 9999\n});\nconst createVirtualElement = () => ({\n  getBoundingClientRect: getDefaultBoundingClientRect\n});\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n/**\n * Popover displayed over children, rendering `content`\n */\nconst Popover = ({\n  floatingOptions,\n  children,\n  content,\n  ...props\n}) => {\n  const {\n    x,\n    y,\n    reference,\n    floating,\n    strategy\n  } = useFloating({\n    middleware: [offset(12), flip({\n      padding: 96\n    }), shift()],\n    whileElementsMounted: autoUpdate,\n    ...floatingOptions\n  });\n  const {\n    getReferenceProps\n  } = useInteractions();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/cloneElement(children, getReferenceProps({\n    ref: reference,\n    ...children.props\n  })), (floatingOptions === null || floatingOptions === void 0 ? void 0 : floatingOptions.open) && createElementAs('div', {\n    ref: floating,\n    style: {\n      position: strategy,\n      top: y !== null && y !== void 0 ? y : 0,\n      left: x !== null && x !== void 0 ? x : 0,\n      zIndex: 1\n    },\n    contentEditable: false,\n    children: content,\n    ...props\n  }));\n};\n\n/**\n * Popover displayed over an element if:\n * - not read-only\n * - element selected\n */\n\nconst ElementPopover = ({\n  floatingOptions = {},\n  ...props\n}) => {\n  const readOnly = useReadOnly();\n  const selected = useSelected();\n  const editor = usePlateEditorState();\n  return /*#__PURE__*/React.createElement(Popover, _extends({\n    floatingOptions: {\n      open: !readOnly && selected && isCollapsed(editor.selection),\n      ...floatingOptions\n    }\n  }, props));\n};\n\n/**\n * Get bounding client rect by slate range\n */\n\nconst getRangeBoundingClientRect = (editor, at) => {\n  if (!at) return getDefaultBoundingClientRect();\n  const domRange = toDOMRange(editor, at);\n  if (!domRange) return getDefaultBoundingClientRect();\n  return domRange.getBoundingClientRect();\n};\n\n/**\n * Get bounding client rect of the window selection\n */\n\nconst getSelectionBoundingClientRect = () => {\n  const domSelection = window.getSelection();\n\n  if (!domSelection || domSelection.rangeCount < 1) {\n    return getDefaultBoundingClientRect();\n  }\n\n  const domRange = domSelection.getRangeAt(0);\n  return domRange.getBoundingClientRect();\n};\n\n/**\n * `useFloating` with a controlled virtual element. Used to follow cursor position.\n *\n * Default options:\n * - `whileElementsMounted: autoUpdate`\n *\n * Additional options:\n * - `getBoundingClientRect` to get the bounding client rect.\n * - `hidden` to hide the floating element\n *\n * Additional returns:\n * - `style` to apply to the floating element\n * - `virtualElementRef`\n *\n * @see useFloating\n * @see https://floating-ui.com/docs/react-dom#virtual-element\n */\nconst useVirtualFloating = ({\n  getBoundingClientRect = getSelectionBoundingClientRect,\n  ...floatingOptions\n}) => {\n  const virtualElementRef = useRef(createVirtualElement());\n  const [visible, setVisible] = useState(true);\n  const floatingResult = useFloating({\n    // update on scroll and resize\n    whileElementsMounted: autoUpdate,\n    ...floatingOptions\n  });\n  const {\n    reference,\n    middlewareData,\n    strategy,\n    x,\n    y,\n    update\n  } = floatingResult;\n  useLayoutEffect(() => {\n    virtualElementRef.current.getBoundingClientRect = getBoundingClientRect;\n  }, [getBoundingClientRect, update]);\n  useLayoutEffect(() => {\n    reference(virtualElementRef.current);\n  }, [reference]);\n  useLayoutEffect(() => {\n    if (!(middlewareData !== null && middlewareData !== void 0 && middlewareData.hide)) return;\n    const {\n      referenceHidden\n    } = middlewareData.hide;\n    setVisible(!referenceHidden);\n  }, [middlewareData.hide]);\n  return { ...floatingResult,\n    virtualElementRef,\n    style: {\n      position: strategy,\n      top: y !== null && y !== void 0 ? y : 0,\n      left: x !== null && x !== void 0 ? x : 0,\n      display: floatingOptions.open === false ? 'none' : undefined,\n      visibility: !visible ? 'hidden' : undefined\n    }\n  };\n};\n\nexport { ElementPopover, Popover, createVirtualElement, getDefaultBoundingClientRect, getRangeBoundingClientRect, getSelectionBoundingClientRect, useVirtualFloating };\n//# sourceMappingURL=index.es.js.map\n","import {\n  focusEditor,\n  getPluginOptions,\n  PlateEditor,\n  Value,\n} from '@udecode/plate-core';\nimport {\n  floatingLinkActions,\n  floatingLinkSelectors,\n} from '../components/FloatingLink/floatingLinkStore';\nimport { ELEMENT_LINK, LinkPlugin } from '../createLinkPlugin';\nimport { upsertLink } from './index';\n\n/**\n * Insert link if url is valid.\n * Text is url if empty.\n * Close floating link.\n * Focus editor.\n */\nexport const submitFloatingLink = <V extends Value>(editor: PlateEditor<V>) => {\n  if (!editor.selection) return;\n\n  const { isUrl, forceSubmit } = getPluginOptions<LinkPlugin, V>(\n    editor,\n    ELEMENT_LINK\n  );\n\n  const url = floatingLinkSelectors.url();\n  const isValid = isUrl?.(url) || forceSubmit;\n  if (!isValid) return;\n\n  const text = floatingLinkSelectors.text();\n  const target = floatingLinkSelectors.newTab() ? undefined : '_self';\n\n  floatingLinkActions.hide();\n\n  upsertLink(editor, {\n    url,\n    text,\n    target,\n    isUrl: (_url) => (forceSubmit || !isUrl ? true : isUrl(_url)),\n  });\n\n  setTimeout(() => {\n    focusEditor(editor, editor.selection!);\n  }, 0);\n\n  return true;\n};\n","import { useEditorRef, useHotkeys } from '@udecode/plate-core';\nimport { submitFloatingLink } from '../../transforms/submitFloatingLink';\nimport { useFloatingLinkSelectors } from './floatingLinkStore';\n\nexport const useFloatingLinkEnter = () => {\n  const editor = useEditorRef();\n\n  const open = useFloatingLinkSelectors().isOpen(editor.id);\n\n  useHotkeys(\n    '*',\n    (e) => {\n      if (e.key !== 'Enter') return;\n\n      if (submitFloatingLink(editor)) {\n        e.preventDefault();\n      }\n    },\n    {\n      enabled: open,\n      enableOnFormTags: ['INPUT'],\n    },\n    []\n  );\n};\n","import { focusEditor, useEditorRef, useHotkeys } from '@udecode/plate-core';\nimport {\n  floatingLinkActions,\n  floatingLinkSelectors,\n  useFloatingLinkSelectors,\n} from './floatingLinkStore';\n\nexport const useFloatingLinkEscape = () => {\n  const editor = useEditorRef();\n\n  const open = useFloatingLinkSelectors().isOpen(editor.id);\n\n  useHotkeys(\n    'escape',\n    (e) => {\n      if (!floatingLinkSelectors.mode()) return;\n\n      e.preventDefault();\n\n      if (\n        floatingLinkSelectors.mode() === 'edit' &&\n        floatingLinkSelectors.isEditing()\n      ) {\n        floatingLinkActions.show('edit', editor.id);\n        focusEditor(editor, editor.selection!);\n        return;\n      }\n\n      if (floatingLinkSelectors.mode() === 'insert') {\n        focusEditor(editor, editor.selection!);\n      }\n\n      floatingLinkActions.hide();\n    },\n    {\n      enabled: open,\n      enableOnFormTags: ['INPUT'],\n      enableOnContentEditable: true,\n    },\n    []\n  );\n};\n","import {\n  flip,\n  offset,\n  useVirtualFloating,\n  UseVirtualFloatingOptions,\n} from '@udecode/plate-floating';\nimport { floatingLinkActions } from './floatingLinkStore';\n\nexport const useVirtualFloatingLink = ({\n  editorId,\n  ...floatingOptions\n}: { editorId: string } & UseVirtualFloatingOptions) => {\n  return useVirtualFloating({\n    placement: 'bottom-start',\n    onOpenChange: (open) =>\n      floatingLinkActions.openEditorId(open ? editorId : null),\n    middleware: [\n      offset(12),\n      flip({\n        padding: 96,\n      }),\n    ],\n    ...floatingOptions,\n  });\n};\n","import { useCallback, useEffect } from 'react';\nimport {\n  getAboveNode,\n  getEndPoint,\n  getPluginOptions,\n  getPluginType,\n  getStartPoint,\n  HTMLPropsAs,\n  someNode,\n  useComposedRef,\n  useEditorRef,\n  useHotkeys,\n  usePlateSelectors,\n} from '@udecode/plate-core';\nimport {\n  getDefaultBoundingClientRect,\n  getRangeBoundingClientRect,\n} from '@udecode/plate-floating';\nimport { ELEMENT_LINK, LinkPlugin } from '../../createLinkPlugin';\nimport { triggerFloatingLinkEdit } from '../../utils/triggerFloatingLinkEdit';\nimport { FloatingLinkProps } from './FloatingLink';\nimport {\n  floatingLinkActions,\n  floatingLinkSelectors,\n  useFloatingLinkSelectors,\n} from './floatingLinkStore';\nimport { useFloatingLinkEnter } from './useFloatingLinkEnter';\nimport { useFloatingLinkEscape } from './useFloatingLinkEscape';\nimport { useVirtualFloatingLink } from './useVirtualFloatingLink';\n\nexport const useFloatingLinkEdit = ({\n  floatingOptions,\n  ...props\n}: FloatingLinkProps): HTMLPropsAs<'div'> => {\n  const editor = useEditorRef();\n  const keyEditor = usePlateSelectors().keyEditor();\n  const mode = useFloatingLinkSelectors().mode();\n  const open = useFloatingLinkSelectors().isOpen(editor.id);\n\n  const { triggerFloatingLinkHotkeys } = getPluginOptions<LinkPlugin>(\n    editor,\n    ELEMENT_LINK\n  );\n\n  const getBoundingClientRect = useCallback(() => {\n    const entry = getAboveNode(editor, {\n      match: { type: getPluginType(editor, ELEMENT_LINK) },\n    });\n\n    if (entry) {\n      const [, path] = entry;\n      return getRangeBoundingClientRect(editor, {\n        anchor: getStartPoint(editor, path),\n        focus: getEndPoint(editor, path),\n      });\n    }\n\n    return getDefaultBoundingClientRect();\n  }, [editor]);\n\n  const isOpen = open && mode === 'edit';\n\n  const { update, style, floating } = useVirtualFloatingLink({\n    editorId: editor.id,\n    open: isOpen,\n    getBoundingClientRect,\n    ...floatingOptions,\n  });\n\n  useEffect(() => {\n    if (\n      editor.selection &&\n      someNode(editor, {\n        match: { type: getPluginType(editor, ELEMENT_LINK) },\n      })\n    ) {\n      floatingLinkActions.show('edit', editor.id);\n      update();\n      return;\n    }\n\n    if (floatingLinkSelectors.mode() === 'edit') {\n      floatingLinkActions.hide();\n    }\n  }, [editor, keyEditor, update]);\n\n  useHotkeys(\n    triggerFloatingLinkHotkeys!,\n    (e) => {\n      if (\n        floatingLinkSelectors.mode() === 'edit' &&\n        triggerFloatingLinkEdit(editor)\n      ) {\n        e.preventDefault();\n      }\n    },\n    {\n      enableOnContentEditable: true,\n    },\n    []\n  );\n\n  useFloatingLinkEnter();\n\n  useFloatingLinkEscape();\n\n  return {\n    style: {\n      ...style,\n      zIndex: 1,\n    },\n    ...props,\n    ref: useComposedRef<HTMLElement | null>(props.ref, floating),\n  };\n};\n","import {\n  getEditorString,\n  getPluginType,\n  isRangeAcrossBlocks,\n  PlateEditor,\n  someNode,\n  Value,\n} from '@udecode/plate-core';\nimport {\n  floatingLinkActions,\n  floatingLinkSelectors,\n} from '../components/FloatingLink/floatingLinkStore';\nimport { ELEMENT_LINK } from '../createLinkPlugin';\n\n/**\n * Trigger floating link.\n *\n * Do not trigger when:\n * - selection is across blocks\n * - selection has more than one leaf node\n * - lowest selection is not text\n * - selection has a link node\n */\nexport const triggerFloatingLinkInsert = <V extends Value>(\n  editor: PlateEditor<V>,\n  {\n    focused,\n  }: {\n    focused?: boolean;\n  } = {}\n) => {\n  if (floatingLinkSelectors.mode()) return;\n\n  if (!focused) return;\n\n  if (isRangeAcrossBlocks(editor, { at: editor.selection })) return;\n\n  const hasLink = someNode(editor, {\n    match: { type: getPluginType(editor, ELEMENT_LINK) },\n  });\n  if (hasLink) return;\n\n  floatingLinkActions.text(getEditorString(editor, editor.selection));\n  floatingLinkActions.show('insert', editor.id);\n\n  return true;\n};\n","import { useEffect } from 'react';\nimport {\n  focusEditor,\n  getPluginOptions,\n  HTMLPropsAs,\n  useComposedRef,\n  useEditorRef,\n  useHotkeys,\n  useOnClickOutside,\n} from '@udecode/plate-core';\nimport { getSelectionBoundingClientRect } from '@udecode/plate-floating';\nimport { useFocused } from 'slate-react';\nimport { ELEMENT_LINK, LinkPlugin } from '../../createLinkPlugin';\nimport { triggerFloatingLinkInsert } from '../../utils/triggerFloatingLinkInsert';\nimport { FloatingLinkProps } from './FloatingLink';\nimport {\n  floatingLinkActions,\n  floatingLinkSelectors,\n  useFloatingLinkSelectors,\n} from './floatingLinkStore';\nimport { useFloatingLinkEscape } from './useFloatingLinkEscape';\nimport { useVirtualFloatingLink } from './useVirtualFloatingLink';\n\nexport const useFloatingLinkInsert = ({\n  floatingOptions,\n  ...props\n}: FloatingLinkProps): HTMLPropsAs<'div'> => {\n  const editor = useEditorRef();\n  const focused = useFocused();\n  const mode = useFloatingLinkSelectors().mode();\n  const open = useFloatingLinkSelectors().isOpen(editor.id);\n\n  const { triggerFloatingLinkHotkeys } = getPluginOptions<LinkPlugin>(\n    editor,\n    ELEMENT_LINK\n  );\n\n  useHotkeys(\n    triggerFloatingLinkHotkeys!,\n    (e) => {\n      if (triggerFloatingLinkInsert(editor, { focused })) {\n        e.preventDefault();\n      }\n    },\n    {\n      enableOnContentEditable: true,\n    },\n    [focused]\n  );\n\n  const ref = useOnClickOutside(\n    () => {\n      if (floatingLinkSelectors.mode() === 'insert') {\n        floatingLinkActions.hide();\n        focusEditor(editor, editor.selection!);\n      }\n    },\n    {\n      disabled: !open,\n    }\n  );\n\n  const { update, style, floating } = useVirtualFloatingLink({\n    editorId: editor.id,\n    open: open && mode === 'insert',\n    getBoundingClientRect: getSelectionBoundingClientRect,\n    whileElementsMounted: () => {},\n    ...floatingOptions,\n  });\n\n  // wait for update before focusing input\n  useEffect(() => {\n    if (open) {\n      update();\n      floatingLinkActions.updated(true);\n    } else {\n      floatingLinkActions.updated(false);\n    }\n  }, [open, update]);\n\n  useFloatingLinkEscape();\n\n  return {\n    style: {\n      ...style,\n      zIndex: 1,\n    },\n    ...props,\n    ref: useComposedRef<HTMLElement | null>(props.ref, floating, ref),\n  };\n};\n","import {\n  createComponentAs,\n  createElementAs,\n  HTMLPropsAs,\n} from '@udecode/plate-core';\nimport { UseVirtualFloatingOptions } from '@udecode/plate-floating';\nimport { FloatingLinkEditButton } from './FloatingLinkEditButton';\nimport { FloatingLinkNewTabInput } from './FloatingLinkNewTabInput';\nimport { FloatingLinkTextInput } from './FloatingLinkTextInput';\nimport { FloatingLinkUrlInput } from './FloatingLinkUrlInput';\nimport { OpenLinkButton } from './OpenLinkButton';\nimport { UnlinkButton } from './UnlinkButton';\nimport { useFloatingLinkEdit } from './useFloatingLinkEdit';\nimport { useFloatingLinkInsert } from './useFloatingLinkInsert';\n\nexport type FloatingLinkProps = HTMLPropsAs<'div'> & {\n  floatingOptions?: UseVirtualFloatingOptions;\n};\n\nexport const FloatingLinkEditRoot = createComponentAs<FloatingLinkProps>(\n  (props) => {\n    const htmlProps = useFloatingLinkEdit(props);\n\n    if (htmlProps.style?.display === 'none') {\n      return null;\n    }\n\n    return createElementAs('div', htmlProps);\n  }\n);\n\nexport const FloatingLinkInsertRoot = createComponentAs<FloatingLinkProps>(\n  (props) => {\n    const htmlProps = useFloatingLinkInsert(props);\n\n    if (htmlProps.style?.display === 'none') {\n      return null;\n    }\n\n    return createElementAs('div', htmlProps);\n  }\n);\n\nexport const FloatingLink = {\n  EditRoot: FloatingLinkEditRoot,\n  InsertRoot: FloatingLinkInsertRoot,\n  UrlInput: FloatingLinkUrlInput,\n  TextInput: FloatingLinkTextInput,\n  NewTabInput: FloatingLinkNewTabInput,\n  EditButton: FloatingLinkEditButton,\n  UnlinkButton,\n  OpenLinkButton,\n};\n","import { PlateEditor, Value } from '@udecode/plate-core';\nimport { floatingLinkSelectors } from '../components/index';\nimport { triggerFloatingLinkEdit } from './triggerFloatingLinkEdit';\nimport { triggerFloatingLinkInsert } from './triggerFloatingLinkInsert';\n\nexport const triggerFloatingLink = <V extends Value>(\n  editor: PlateEditor<V>,\n  {\n    focused,\n  }: {\n    focused?: boolean;\n  } = {}\n) => {\n  if (floatingLinkSelectors.mode() === 'edit') {\n    triggerFloatingLinkEdit(editor);\n    return;\n  }\n\n  triggerFloatingLinkInsert(editor, {\n    focused,\n  });\n};\n","import {\n  insertNodes,\n  InsertNodesOptions,\n  PlateEditor,\n  TText,\n  Value,\n} from '@udecode/plate-core';\nimport { TLinkElement } from '../types';\nimport { createLinkNode, CreateLinkNodeOptions } from '../utils/index';\n\n/**\n * Insert a link node.\n */\nexport const insertLink = <V extends Value>(\n  editor: PlateEditor<V>,\n  createLinkNodeOptions: CreateLinkNodeOptions,\n  options?: InsertNodesOptions<V>\n) => {\n  insertNodes<TLinkElement | TText>(\n    editor,\n    [createLinkNode(editor, createLinkNodeOptions)],\n    options as any\n  );\n};\n","import {\n  getAboveNode,\n  getPluginType,\n  isElement,\n  PlateEditor,\n  splitNodes,\n  unwrapNodes,\n  UnwrapNodesOptions,\n  Value,\n  withoutNormalizing,\n} from '@udecode/plate-core';\nimport { ELEMENT_LINK } from '../createLinkPlugin';\n\n/**\n * Unwrap link node.\n */\nexport const unwrapLink = <V extends Value>(\n  editor: PlateEditor<V>,\n  options?: UnwrapNodesOptions & {\n    split?: boolean;\n  }\n) => {\n  return withoutNormalizing(editor, () => {\n    if (options?.split) {\n      const linkAboveAnchor = getAboveNode(editor, {\n        at: editor.selection?.anchor,\n        match: { type: getPluginType(editor, ELEMENT_LINK) },\n      });\n\n      // anchor in link\n      if (linkAboveAnchor) {\n        splitNodes(editor, {\n          at: editor.selection?.anchor,\n          match: (n) =>\n            isElement(n) && n.type === getPluginType(editor, ELEMENT_LINK),\n        });\n        unwrapLink(editor, {\n          at: editor.selection?.anchor,\n        });\n        return true;\n      }\n      const linkAboveFocus = getAboveNode(editor, {\n        at: editor.selection?.focus,\n        match: { type: getPluginType(editor, ELEMENT_LINK) },\n      });\n\n      // focus in link\n      if (linkAboveFocus) {\n        splitNodes(editor, {\n          at: editor.selection?.focus,\n          match: (n) =>\n            isElement(n) && n.type === getPluginType(editor, ELEMENT_LINK),\n        });\n        unwrapLink(editor, {\n          at: editor.selection?.focus,\n        });\n        return true;\n      }\n    }\n\n    unwrapNodes(editor, {\n      match: { type: getPluginType(editor, ELEMENT_LINK) },\n      ...options,\n    });\n  });\n};\n","import {\n  getAboveNode,\n  getEditorString,\n  getPluginType,\n  PlateEditor,\n  replaceNodeChildren,\n  TText,\n  Value,\n} from '@udecode/plate-core';\nimport { ELEMENT_LINK } from '../createLinkPlugin';\nimport { TLinkElement } from '../types';\nimport { UpsertLinkOptions } from './upsertLink';\n\n/**\n * If the text is different than the link above text, replace link children by a new text.\n * The new text has the same marks than the first text replaced.\n */\nexport const upsertLinkText = <V extends Value>(\n  editor: PlateEditor<V>,\n  { text }: UpsertLinkOptions<V>\n) => {\n  const newLink = getAboveNode<TLinkElement>(editor, {\n    match: { type: getPluginType(editor, ELEMENT_LINK) },\n  });\n\n  if (newLink) {\n    const [newLinkNode, newLinkPath] = newLink;\n\n    if (text?.length && text !== getEditorString(editor, newLinkPath)) {\n      const firstText = newLinkNode.children[0];\n\n      // remove link children\n      replaceNodeChildren<TText>(editor, {\n        at: newLinkPath,\n        nodes: { ...firstText, text },\n        insertOptions: {\n          select: true,\n        },\n      });\n    }\n  }\n};\n","import {\n  getPluginType,\n  PlateEditor,\n  Value,\n  wrapNodes,\n  WrapNodesOptions,\n} from '@udecode/plate-core';\nimport { ELEMENT_LINK } from '../createLinkPlugin';\nimport { TLinkElement } from '../types';\n\nexport interface WrapLinkOptions<V extends Value = Value>\n  extends WrapNodesOptions<V> {\n  url: string;\n  target?: string;\n}\n\n/**\n * Wrap a link node with split.\n */\nexport const wrapLink = <V extends Value>(\n  editor: PlateEditor<V>,\n  { url, target, ...options }: WrapLinkOptions<V>\n) => {\n  wrapNodes<TLinkElement, Value>(\n    editor,\n    {\n      type: getPluginType(editor, ELEMENT_LINK),\n      url,\n      target,\n      children: [],\n    },\n    { split: true, ...options } as any\n  );\n};\n","import {\n  findNode,\n  getAboveNode,\n  getEditorString,\n  getNodeLeaf,\n  getNodeProps,\n  getPluginOptions,\n  getPluginType,\n  InsertNodesOptions,\n  isDefined,\n  isExpanded,\n  PlateEditor,\n  removeNodes,\n  setNodes,\n  UnwrapNodesOptions,\n  Value,\n  WrapNodesOptions,\n} from '@udecode/plate-core';\nimport { ELEMENT_LINK, LinkPlugin } from '../createLinkPlugin';\nimport { TLinkElement } from '../types';\nimport { CreateLinkNodeOptions } from '../utils/index';\nimport { insertLink } from './insertLink';\nimport { unwrapLink } from './unwrapLink';\nimport { upsertLinkText } from './upsertLinkText';\nimport { wrapLink } from './wrapLink';\n\nexport type UpsertLinkOptions<\n  V extends Value = Value\n> = CreateLinkNodeOptions & {\n  /**\n   * If true, insert text when selection is in url.\n   */\n  insertTextInLink?: boolean;\n  insertNodesOptions?: InsertNodesOptions<V>;\n  unwrapNodesOptions?: UnwrapNodesOptions<V>;\n  wrapNodesOptions?: WrapNodesOptions<V>;\n  isUrl?: (url: string) => boolean;\n};\n\n/**\n * If selection in a link or is not url:\n * - insert text with url, exit\n * If selection is expanded or `update` in a link:\n * - remove link node, get link text\n * Then:\n * - insert link node\n */\nexport const upsertLink = <V extends Value>(\n  editor: PlateEditor<V>,\n  {\n    url,\n    text,\n    target,\n    insertTextInLink,\n    insertNodesOptions,\n    isUrl = getPluginOptions<LinkPlugin, V>(editor, ELEMENT_LINK).isUrl,\n  }: UpsertLinkOptions<V>\n) => {\n  const at = editor.selection;\n\n  if (!at) return;\n\n  const linkAbove = getAboveNode<TLinkElement>(editor, {\n    at,\n    match: { type: getPluginType(editor, ELEMENT_LINK) },\n  });\n\n  // anchor and focus in link -> insert text\n  if (insertTextInLink && linkAbove) {\n    // we don't want to insert marks in links\n    editor.insertText(url);\n    return true;\n  }\n\n  if (!isUrl?.(url)) return;\n\n  if (isDefined(text) && !text.length) {\n    text = url;\n  }\n\n  // edit the link url and/or target\n  if (linkAbove) {\n    if (url !== linkAbove[0]?.url || target !== linkAbove[0]?.target) {\n      setNodes<TLinkElement>(\n        editor,\n        { url, target },\n        {\n          at: linkAbove[1],\n        }\n      );\n    }\n\n    upsertLinkText(editor, { url, text, target });\n\n    return true;\n  }\n\n  // selection contains at one edge edge or between the edges\n  const linkEntry = findNode<TLinkElement>(editor, {\n    at,\n    match: { type: getPluginType(editor, ELEMENT_LINK) },\n  });\n\n  const [linkNode, linkPath] = linkEntry ?? [];\n\n  let shouldReplaceText = false;\n\n  if (linkPath && text?.length) {\n    const linkText = getEditorString(editor, linkPath);\n\n    if (text !== linkText) {\n      shouldReplaceText = true;\n    }\n  }\n\n  if (isExpanded(at)) {\n    // anchor and focus in link\n    if (linkAbove) {\n      unwrapLink(editor, {\n        at: linkAbove[1],\n      });\n    } else {\n      unwrapLink(editor, {\n        split: true,\n      });\n    }\n\n    wrapLink(editor, {\n      url,\n      target,\n    });\n\n    upsertLinkText(editor, { url, target, text });\n\n    return true;\n  }\n\n  if (shouldReplaceText) {\n    removeNodes(editor, {\n      at: linkPath,\n    });\n  }\n\n  const props = getNodeProps(linkNode ?? ({} as any));\n\n  const path = editor.selection?.focus.path;\n  if (!path) return;\n\n  // link text should have the focused leaf marks\n  const leaf = getNodeLeaf(editor, path);\n\n  // if text is empty, text is url\n  if (!text?.length) {\n    text = url;\n  }\n\n  insertLink(\n    editor,\n    {\n      ...props,\n      url,\n      target,\n      children: [\n        {\n          ...leaf,\n          text,\n        },\n      ],\n    },\n    insertNodesOptions\n  );\n  return true;\n};\n","import {\n  collapseSelection,\n  getAboveNode,\n  getEditorString,\n  getNextNodeStartPoint,\n  getPluginType,\n  getPreviousNodeEndPoint,\n  getRangeBefore,\n  getRangeFromBlockStart,\n  insertNodes,\n  isCollapsed,\n  isEndPoint,\n  isStartPoint,\n  mockPlugin,\n  PlateEditor,\n  select,\n  someNode,\n  Value,\n  withoutNormalizing,\n  WithPlatePlugin,\n} from '@udecode/plate-core';\nimport { withRemoveEmptyNodes } from '@udecode/plate-normalizers';\nimport { Path, Point, Range } from 'slate';\nimport { upsertLink } from './transforms/index';\nimport { ELEMENT_LINK, LinkPlugin } from './createLinkPlugin';\n\n/**\n * Insert space after a url to wrap a link.\n * Lookup from the block start to the cursor to check if there is an url.\n * If not found, lookup before the cursor for a space character to check the url.\n *\n * On insert data:\n * Paste a string inside a link element will edit its children text but not its url.\n *\n */\n\nexport const withLink = <\n  V extends Value = Value,\n  E extends PlateEditor<V> = PlateEditor<V>\n>(\n  editor: E,\n  {\n    type,\n    options: { isUrl, getUrlHref, rangeBeforeOptions },\n  }: WithPlatePlugin<LinkPlugin, V, E>\n) => {\n  const { insertData, insertText, apply, normalizeNode, insertBreak } = editor;\n\n  const wrapLink = () => {\n    withoutNormalizing(editor, () => {\n      const selection = editor.selection!;\n\n      // get the range from first space before the cursor\n      let beforeWordRange = getRangeBefore(\n        editor,\n        selection,\n        rangeBeforeOptions\n      );\n\n      // if no space found before, get the range from block start\n      if (!beforeWordRange) {\n        beforeWordRange = getRangeFromBlockStart(editor);\n      }\n\n      // if no word found before the cursor, exit\n      if (!beforeWordRange) return;\n\n      const hasLink = someNode(editor, {\n        at: beforeWordRange,\n        match: { type: getPluginType(editor, ELEMENT_LINK) },\n      });\n\n      // if word before the cursor has a link, exit\n      if (hasLink) return;\n\n      let beforeWordText = getEditorString(editor, beforeWordRange);\n      beforeWordText = getUrlHref?.(beforeWordText) ?? beforeWordText;\n\n      // if word before is not an url, exit\n      if (!isUrl!(beforeWordText)) return;\n\n      // select the word to wrap link\n      select(editor, beforeWordRange);\n\n      // wrap link\n      upsertLink(editor, {\n        url: beforeWordText,\n      });\n\n      // collapse selection\n      collapseSelection(editor, { edge: 'end' });\n    });\n  };\n\n  editor.insertBreak = () => {\n    if (!isCollapsed(editor.selection)) return insertBreak();\n    wrapLink();\n    insertBreak();\n  };\n\n  editor.insertText = (text) => {\n    if (text === ' ' && isCollapsed(editor.selection)) {\n      wrapLink();\n    }\n\n    insertText(text);\n  };\n\n  editor.insertData = (data: DataTransfer) => {\n    const text = data.getData('text/plain');\n    const textHref = getUrlHref?.(text);\n\n    if (text) {\n      const inserted = upsertLink(editor, {\n        url: textHref || text,\n        insertTextInLink: true,\n      });\n      if (inserted) return;\n    }\n\n    insertData(data);\n  };\n\n  // TODO: plugin\n  editor.apply = (operation) => {\n    if (operation.type === 'set_selection') {\n      const range = operation.newProperties as Range | null;\n\n      if (range && range.focus && range.anchor && isCollapsed(range)) {\n        const entry = getAboveNode(editor, {\n          at: range,\n          match: { type: getPluginType(editor, ELEMENT_LINK) },\n        });\n\n        if (entry) {\n          const [, path] = entry;\n\n          let newPoint: Point | undefined;\n\n          if (isStartPoint(editor, range.focus, path)) {\n            newPoint = getPreviousNodeEndPoint(editor, path);\n          }\n\n          if (isEndPoint(editor, range.focus, path)) {\n            newPoint = getNextNodeStartPoint(editor, path);\n          }\n\n          if (newPoint) {\n            operation.newProperties = {\n              anchor: newPoint,\n              focus: newPoint,\n            };\n          }\n        }\n      }\n    }\n\n    apply(operation);\n  };\n\n  // TODO: plugin\n  editor.normalizeNode = ([node, path]) => {\n    if (node.type === getPluginType(editor, ELEMENT_LINK)) {\n      const range = editor.selection as Range | null;\n\n      if (range && isCollapsed(range)) {\n        if (isEndPoint(editor, range.focus, path)) {\n          const nextPoint = getNextNodeStartPoint(editor, path);\n\n          // select next text node if any\n          if (nextPoint) {\n            select(editor, nextPoint);\n          } else {\n            // insert text node then select\n            const nextPath = Path.next(path);\n            insertNodes(editor, { text: '' } as any, { at: nextPath });\n            select(editor, nextPath);\n          }\n        }\n      }\n    }\n\n    normalizeNode([node, path]);\n  };\n\n  editor = withRemoveEmptyNodes<V, E>(\n    editor,\n    mockPlugin<{}, V, E>({\n      options: { types: type },\n    })\n  );\n\n  return editor;\n};\n","import {\n  createPluginFactory,\n  isUrl as isUrlProtocol,\n  RangeBeforeOptions,\n} from '@udecode/plate-core';\nimport { withLink } from './withLink';\n\nexport const ELEMENT_LINK = 'a';\n\nexport interface LinkPlugin {\n  forceSubmit?: boolean;\n\n  /**\n   * Allow custom config for rangeBeforeOptions.\n   * @example default\n   * {\n   *   matchString: ' ',\n   *   skipInvalid: true,\n   *   afterMatch: true,\n   * }\n   */\n  rangeBeforeOptions?: RangeBeforeOptions;\n\n  /**\n   * Hotkeys to trigger floating link.\n   * @default 'meta+k, ctrl+k'\n   */\n  triggerFloatingLinkHotkeys?: string | string[];\n\n  /**\n   * Callback to validate an url.\n   * @default isUrl\n   */\n  isUrl?: (text: string) => boolean;\n\n  /**\n   * Callback to optionally get the href for a url\n   * @returns href: an optional link to be used that is different from the text content (example https://google.com for google.com)\n   */\n  getUrlHref?: (url: string) => string | undefined;\n\n  /**\n   * On keyboard shortcut or toolbar mousedown, get the link url by calling this promise. The\n   * default behavior is to use the browser's native `prompt`.\n   */\n  getLinkUrl?: (prevUrl: string | null) => Promise<string | null>;\n}\n\n/**\n * Enables support for hyperlinks.\n */\nexport const createLinkPlugin = createPluginFactory<LinkPlugin>({\n  key: ELEMENT_LINK,\n  isElement: true,\n  isInline: true,\n  props: ({ element }) => ({\n    nodeProps: { href: element?.url, target: element?.target },\n  }),\n  withOverrides: withLink,\n  options: {\n    isUrl: isUrlProtocol,\n    rangeBeforeOptions: {\n      matchString: ' ',\n      skipInvalid: true,\n      afterMatch: true,\n    },\n    triggerFloatingLinkHotkeys: 'meta+k, ctrl+k',\n  },\n  then: (editor, { type }) => ({\n    deserializeHtml: {\n      rules: [\n        {\n          validNodeName: 'A',\n        },\n      ],\n      getNode: (el) => ({\n        type,\n        url: el.getAttribute('href'),\n        target: el.getAttribute('target') || '_blank',\n      }),\n    },\n  }),\n});\n"],"names":["createLinkNode","editor","url","text","target","children","type","getPluginType","ELEMENT_LINK","LaunchIcon","props","React","useLink","_props","useElementProps","elementToAttributes","element","href","onMouseOver","e","stopPropagation","LinkRoot","createComponentAs","htmlProps","createElementAs","Link","Root","LinkIcon","LinkOffIcon","ShortTextIcon","floatingLinkStore","createStore","openEditorId","mouseDown","updated","newTab","mode","isEditing","extendActions","set","reset","show","editorId","hide","extendSelectors","state","isOpen","floatingLinkActions","floatingLinkSelectors","get","useFloatingLinkSelectors","use","triggerFloatingLinkEdit","entry","findNode","match","link","path","getEditorString","undefined","useFloatingLinkEditButton","useEditorRef","onClick","useCallback","FloatingLinkEditButton","useFloatingLinkNewTabInput","ref","useRef","checked","setChecked","useState","useEffect","current","setTimeout","focus","onChange","mergeProps","useComposedRef","FloatingLinkNewTabInput","useFloatingLinkTextInput","value","defaultValue","FloatingLinkTextInput","useFloatingLinkUrlInput","FloatingLinkUrlInput","useOpenLinkButton","selection","usePlateSelection","useMemo","OpenLinkButton","useUnlinkButton","unwrapLink","focusEditor","UnlinkButton","Button","global","platform","computePosition","getWindow","isElement","index","useFloating","getDefaultBoundingClientRect","width","height","x","y","top","left","right","bottom","createVirtualElement","getBoundingClientRect","submitFloatingLink","isUrl","forceSubmit","getPluginOptions","isValid","upsertLink","_url","useFloatingLinkEnter","open","id","useHotkeys","key","preventDefault","enabled","enableOnFormTags","useFloatingLinkEscape","enableOnContentEditable","useVirtualFloatingLink","floatingOptions","useVirtualFloating","placement","onOpenChange","middleware","offset","flip","padding","useFloatingLinkEdit","keyEditor","usePlateSelectors","triggerFloatingLinkHotkeys","getAboveNode","getRangeBoundingClientRect","anchor","getStartPoint","getEndPoint","update","style","floating","someNode","zIndex","triggerFloatingLinkInsert","focused","isRangeAcrossBlocks","at","hasLink","useFloatingLinkInsert","useFocused","useOnClickOutside","disabled","getSelectionBoundingClientRect","whileElementsMounted","FloatingLinkEditRoot","display","FloatingLinkInsertRoot","FloatingLink","EditRoot","InsertRoot","UrlInput","TextInput","NewTabInput","EditButton","triggerFloatingLink","insertLink","createLinkNodeOptions","options","insertNodes","withoutNormalizing","split","linkAboveAnchor","splitNodes","n","linkAboveFocus","unwrapNodes","upsertLinkText","newLink","newLinkNode","newLinkPath","length","firstText","replaceNodeChildren","nodes","insertOptions","select","wrapLink","wrapNodes","insertTextInLink","insertNodesOptions","linkAbove","insertText","isDefined","setNodes","linkEntry","linkNode","linkPath","shouldReplaceText","linkText","isExpanded","removeNodes","getNodeProps","leaf","getNodeLeaf","withLink","getUrlHref","rangeBeforeOptions","insertData","apply","normalizeNode","insertBreak","beforeWordRange","getRangeBefore","getRangeFromBlockStart","beforeWordText","collapseSelection","edge","isCollapsed","data","getData","textHref","inserted","operation","range","newProperties","newPoint","isStartPoint","getPreviousNodeEndPoint","isEndPoint","getNextNodeStartPoint","node","nextPoint","nextPath","Path","next","withRemoveEmptyNodes","mockPlugin","types","createLinkPlugin","createPluginFactory","isInline","nodeProps","withOverrides","isUrlProtocol","matchString","skipInvalid","afterMatch","then","deserializeHtml","rules","validNodeName","getNode","el","getAttribute"],"mappings":"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"}