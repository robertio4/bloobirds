{"version":3,"file":"index.js","sources":["../src/ListToolbarButton/ListToolbarButton.tsx","../src/TodoListElement/TodoListElement.styles.ts","../../../../../node_modules/clsx/dist/clsx.m.js","../src/TodoListElement/TodoListElement.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  focusEditor,\n  useEventPlateId,\n  usePlateEditorState,\n} from '@udecode/plate-core';\nimport { ELEMENT_UL, getListItemEntry, toggleList } from '@udecode/plate-list';\nimport {\n  BlockToolbarButton,\n  ToolbarButtonProps,\n} from '@udecode/plate-ui-toolbar';\n\nexport const ListToolbarButton = ({\n  id,\n  type = ELEMENT_UL,\n  ...props\n}: ToolbarButtonProps & { type?: string }) => {\n  const editor = usePlateEditorState(useEventPlateId(id));\n\n  const res = !!editor?.selection && getListItemEntry(editor);\n\n  return (\n    <BlockToolbarButton\n      active={!!res && res.list[0].type === type}\n      type={type}\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        toggleList(editor, { type });\n        focusEditor(editor);\n      }}\n      {...props}\n    />\n  );\n};\n","import { Value } from '@udecode/plate-core';\nimport { createStyles } from '@udecode/plate-styled-components';\nimport tw from 'twin.macro';\nimport { TodoListElementStyleProps } from './TodoListElement.types';\n\nexport const getTodoListElementStyles = <V extends Value>(\n  props: TodoListElementStyleProps<V>\n) => {\n  return createStyles(\n    { prefixClassNames: 'TodoListElement', ...props },\n    {\n      root: tw`flex flex-row py-1`,\n      ...(props.checked && { rootChecked: {} }),\n      checkboxWrapper: tw`flex items-center justify-center select-none mr-1.5`,\n      checkbox: tw`w-4 h-4 m-0`,\n      text: [\n        tw`flex-1 focus:outline-none`,\n        props.checked && tw`line-through opacity[0.666]`,\n      ],\n    }\n  );\n};\n","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","import React from 'react';\nimport { findNodePath, setNodes, Value } from '@udecode/plate-core';\nimport { TTodoListItemElement } from '@udecode/plate-list';\nimport { getRootProps } from '@udecode/plate-styled-components';\nimport clsx from 'clsx';\nimport { useReadOnly } from 'slate-react';\nimport { getTodoListElementStyles } from './TodoListElement.styles';\nimport { TodoListElementProps } from './TodoListElement.types';\n\nexport const TodoListElement = <V extends Value>(\n  props: TodoListElementProps<V>\n) => {\n  const { attributes, children, nodeProps, element, editor } = props;\n\n  const rootProps = getRootProps(props);\n\n  const readOnly = useReadOnly();\n\n  const { checked } = element;\n\n  const styles = getTodoListElementStyles({ ...props, checked });\n\n  return (\n    <div\n      {...attributes}\n      css={styles.root.css}\n      {...rootProps}\n      className={clsx(\n        styles.root.className,\n        styles.rootChecked?.className,\n        rootProps?.className\n      )}\n    >\n      <div\n        contentEditable={false}\n        css={styles.checkboxWrapper?.css}\n        className={styles.checkboxWrapper?.className}\n      >\n        <input\n          data-testid=\"TodoListElementCheckbox\"\n          css={styles.checkbox?.css}\n          className={styles.checkbox?.className}\n          type=\"checkbox\"\n          checked={!!checked}\n          onChange={(e) => {\n            if (readOnly) return;\n            const path = findNodePath(editor, element);\n            if (!path) return;\n\n            setNodes<TTodoListItemElement>(\n              editor,\n              { checked: e.target.checked },\n              {\n                at: path,\n              }\n            );\n          }}\n          {...nodeProps}\n        />\n      </div>\n      <span\n        css={styles.text?.css}\n        className={styles.text?.className}\n        contentEditable={!readOnly}\n        suppressContentEditableWarning\n      >\n        {children}\n      </span>\n    </div>\n  );\n};\n"],"names":["ListToolbarButton","id","type","ELEMENT_UL","props","editor","usePlateEditorState","useEventPlateId","res","selection","getListItemEntry","React","BlockToolbarButton","list","e","preventDefault","stopPropagation","toggleList","focusEditor","getTodoListElementStyles","createStyles","prefixClassNames","root","checked","rootChecked","checkboxWrapper","checkbox","text","TodoListElement","attributes","children","nodeProps","element","rootProps","getRootProps","readOnly","useReadOnly","styles","clsx","className","css","path","findNodePath","setNodes","target","at"],"mappings":"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"}