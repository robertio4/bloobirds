{"version":3,"file":"index.es.js","sources":["../src/components/Placeholder.styles.ts","../src/components/Placeholder.tsx"],"sourcesContent":["import { Value } from '@udecode/plate-core';\nimport { createStyles } from '@udecode/plate-styled-components';\nimport { css } from 'styled-components';\nimport tw from 'twin.macro';\nimport { PlaceholderProps } from './Placeholder.types';\n\nexport const getPlaceholderStyles = <V extends Value>(\n  props: PlaceholderProps<V> & { enabled?: boolean }\n) =>\n  createStyles(\n    { prefixClassNames: 'Placeholder', ...props },\n    {\n      root: props.enabled\n        ? css`\n            ::before {\n              content: attr(placeholder);\n              opacity: 0.3;\n              ${tw`block absolute cursor-text`}\n            }\n          `\n        : undefined,\n    }\n  );\n","import React from 'react';\nimport {\n  createNodeHOC,\n  createNodesHOC,\n  isCollapsed,\n  isElementEmpty,\n  usePlateEditorState,\n  Value,\n} from '@udecode/plate-core';\nimport { useFocused, useSelected } from 'slate-react';\nimport { getPlaceholderStyles } from './Placeholder.styles';\nimport { PlaceholderProps } from './Placeholder.types';\n\nexport const Placeholder = <V extends Value>(props: PlaceholderProps<V>) => {\n  const {\n    children,\n    element,\n    placeholder,\n    hideOnBlur = true,\n    nodeProps,\n  } = props;\n\n  const focused = useFocused();\n  const selected = useSelected();\n  const editor = usePlateEditorState();\n\n  const isEmptyBlock = isElementEmpty(editor, element);\n\n  const enabled =\n    isEmptyBlock &&\n    (!hideOnBlur ||\n      (isCollapsed(editor.selection) && hideOnBlur && focused && selected));\n\n  return React.Children.map(children, (child) => {\n    return React.cloneElement(child, {\n      className: child.props.className,\n      nodeProps: {\n        ...nodeProps,\n        styles: getPlaceholderStyles({ enabled, ...props }),\n        placeholder,\n      },\n    });\n  });\n};\n\nexport const withPlaceholder = createNodeHOC(Placeholder);\nexport const withPlaceholders = createNodesHOC(Placeholder);\n"],"names":["getPlaceholderStyles","props","createStyles","prefixClassNames","root","enabled","css","undefined","Placeholder","children","element","placeholder","hideOnBlur","nodeProps","focused","useFocused","selected","useSelected","editor","usePlateEditorState","isEmptyBlock","isElementEmpty","isCollapsed","selection","React","Children","map","child","cloneElement","className","styles","withPlaceholder","createNodeHOC","withPlaceholders","createNodesHOC"],"mappings":";;;;;;MAMaA,oBAAoB,GAC/BC,KADkC,IAGlCC,YAAY,CACV;AAAEC,EAAAA,gBAAgB,EAAE,aAApB;EAAmC,GAAGF,KAAAA;AAAtC,CADU,EAEV;AACEG,EAAAA,IAAI,EAAEH,KAAK,CAACI,OAAN,GACFC,GADE,CAKM,CAAA,iDAAA,EAAA,GAAA,CAAA,EAAA;AAAA,IAAA,SAAA,EAAA,OAAA;AAAA,IAAA,UAAA,EAAA,UAAA;AAAA,IAAA,QAAA,EAAA,MAAA;AAAA,GALN,CAQFC,GAAAA,SAAAA;AATN,CAFU;;ACIDC,MAAAA,WAAW,GAAqBP,KAAlB,IAAiD;EAC1E,MAAM;IACJQ,QADI;IAEJC,OAFI;IAGJC,WAHI;AAIJC,IAAAA,UAAU,GAAG,IAJT;AAKJC,IAAAA,SAAAA;AALI,GAAA,GAMFZ,KANJ,CAAA;EAQA,MAAMa,OAAO,GAAGC,UAAU,EAA1B,CAAA;EACA,MAAMC,QAAQ,GAAGC,WAAW,EAA5B,CAAA;EACA,MAAMC,MAAM,GAAGC,mBAAmB,EAAlC,CAAA;AAEA,EAAA,MAAMC,YAAY,GAAGC,cAAc,CAACH,MAAD,EAASR,OAAT,CAAnC,CAAA;AAEA,EAAA,MAAML,OAAO,GACXe,YAAY,KACX,CAACR,UAAD,IACEU,WAAW,CAACJ,MAAM,CAACK,SAAR,CAAX,IAAiCX,UAAjC,IAA+CE,OAA/C,IAA0DE,QAFjD,CADd,CAAA;EAKA,OAAOQ,KAAK,CAACC,QAAN,CAAeC,GAAf,CAAmBjB,QAAnB,EAA8BkB,KAAD,IAAW;AAC7C,IAAA,oBAAOH,KAAK,CAACI,YAAN,CAAmBD,KAAnB,EAA0B;AAC/BE,MAAAA,SAAS,EAAEF,KAAK,CAAC1B,KAAN,CAAY4B,SADQ;MAE/BhB,SAAS,EAAE,EACT,GAAGA,SADM;QAETiB,MAAM,EAAE9B,oBAAoB,CAAC;UAAEK,OAAF;UAAW,GAAGJ,KAAAA;AAAd,SAAD,CAFnB;AAGTU,QAAAA,WAAAA;AAHS,OAAA;AAFoB,KAA1B,CAAP,CAAA;AAQD,GATM,CAAP,CAAA;AAUD,EA9BM;MAgCMoB,eAAe,GAAGC,aAAa,CAACxB,WAAD,EAArC;MACMyB,gBAAgB,GAAGC,cAAc,CAAC1B,WAAD;;;;"}