{"version":3,"file":"httpcontext.js","sources":["../../../../src/integrations/httpcontext.ts"],"sourcesContent":["import { convertIntegrationFnToClass } from '@sentry/core';\nimport type { IntegrationFn } from '@sentry/types';\n\nimport { WINDOW } from '../helpers';\n\nconst INTEGRATION_NAME = 'HttpContext';\n\nconst httpContextIntegration: IntegrationFn = () => {\n  return {\n    name: INTEGRATION_NAME,\n    preprocessEvent(event) {\n      // if none of the information we want exists, don't bother\n      if (!WINDOW.navigator && !WINDOW.location && !WINDOW.document) {\n        return;\n      }\n\n      // grab as much info as exists and add it to the event\n      const url = (event.request && event.request.url) || (WINDOW.location && WINDOW.location.href);\n      const { referrer } = WINDOW.document || {};\n      const { userAgent } = WINDOW.navigator || {};\n\n      const headers = {\n        ...(event.request && event.request.headers),\n        ...(referrer && { Referer: referrer }),\n        ...(userAgent && { 'User-Agent': userAgent }),\n      };\n      const request = { ...event.request, ...(url && { url }), headers };\n\n      event.request = request;\n    },\n  };\n};\n\n/** HttpContext integration collects information about HTTP request headers */\n// eslint-disable-next-line deprecation/deprecation\nexport const HttpContext = convertIntegrationFnToClass(INTEGRATION_NAME, httpContextIntegration);\n"],"names":[],"mappings":";;;AAKA,MAAA,gBAAA,GAAA,aAAA,CAAA;AACA;AACA,MAAA,sBAAA,GAAA,MAAA;AACA,EAAA,OAAA;AACA,IAAA,IAAA,EAAA,gBAAA;AACA,IAAA,eAAA,CAAA,KAAA,EAAA;AACA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,SAAA,IAAA,CAAA,MAAA,CAAA,QAAA,IAAA,CAAA,MAAA,CAAA,QAAA,EAAA;AACA,QAAA,OAAA;AACA,OAAA;AACA;AACA;AACA,MAAA,MAAA,GAAA,GAAA,CAAA,KAAA,CAAA,OAAA,IAAA,KAAA,CAAA,OAAA,CAAA,GAAA,MAAA,MAAA,CAAA,QAAA,IAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,CAAA;AACA,MAAA,MAAA,EAAA,QAAA,EAAA,GAAA,MAAA,CAAA,QAAA,IAAA,EAAA,CAAA;AACA,MAAA,MAAA,EAAA,SAAA,EAAA,GAAA,MAAA,CAAA,SAAA,IAAA,EAAA,CAAA;AACA;AACA,MAAA,MAAA,OAAA,GAAA;AACA,QAAA,IAAA,KAAA,CAAA,OAAA,IAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,QAAA,IAAA,QAAA,IAAA,EAAA,OAAA,EAAA,QAAA,EAAA,CAAA;AACA,QAAA,IAAA,SAAA,IAAA,EAAA,YAAA,EAAA,SAAA,EAAA,CAAA;AACA,OAAA,CAAA;AACA,MAAA,MAAA,OAAA,GAAA,EAAA,GAAA,KAAA,CAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,CAAA,EAAA,OAAA,EAAA,CAAA;AACA;AACA,MAAA,KAAA,CAAA,OAAA,GAAA,OAAA,CAAA;AACA,KAAA;AACA,GAAA,CAAA;AACA,CAAA,CAAA;AACA;AACA;AACA;AACA,MAAA,WAAA,GAAA,2BAAA,CAAA,gBAAA,EAAA,sBAAA;;;;"}