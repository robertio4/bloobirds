{"version":3,"file":"linkederrors.js","sources":["../../../../src/integrations/linkederrors.ts"],"sourcesContent":["import { convertIntegrationFnToClass } from '@sentry/core';\nimport type { IntegrationFn } from '@sentry/types';\nimport { applyAggregateErrorsToEvent } from '@sentry/utils';\nimport { exceptionFromError } from '../eventbuilder';\n\ninterface LinkedErrorsOptions {\n  key?: string;\n  limit?: number;\n}\n\nconst DEFAULT_KEY = 'cause';\nconst DEFAULT_LIMIT = 5;\n\nconst INTEGRATION_NAME = 'LinkedErrors';\n\nconst linkedErrorsIntegration: IntegrationFn = (options: LinkedErrorsOptions = {}) => {\n  const limit = options.limit || DEFAULT_LIMIT;\n  const key = options.key || DEFAULT_KEY;\n\n  return {\n    name: INTEGRATION_NAME,\n    preprocessEvent(event, hint, client) {\n      const options = client.getOptions();\n\n      applyAggregateErrorsToEvent(\n        // This differs from the LinkedErrors integration in core by using a different exceptionFromError function\n        exceptionFromError,\n        options.stackParser,\n        options.maxValueLength,\n        key,\n        limit,\n        event,\n        hint,\n      );\n    },\n  };\n};\n\n/** Aggregrate linked errors in an event. */\n// eslint-disable-next-line deprecation/deprecation\nexport const LinkedErrors = convertIntegrationFnToClass(INTEGRATION_NAME, linkedErrorsIntegration);\n"],"names":["applyAggregateErrorsToEvent","exceptionFromError","convertIntegrationFnToClass"],"mappings":";;;;;;AAUA,MAAA,WAAA,GAAA,OAAA,CAAA;AACA,MAAA,aAAA,GAAA,CAAA,CAAA;AACA;AACA,MAAA,gBAAA,GAAA,cAAA,CAAA;AACA;AACA,MAAA,uBAAA,GAAA,CAAA,OAAA,GAAA,EAAA,KAAA;AACA,EAAA,MAAA,KAAA,GAAA,OAAA,CAAA,KAAA,IAAA,aAAA,CAAA;AACA,EAAA,MAAA,GAAA,GAAA,OAAA,CAAA,GAAA,IAAA,WAAA,CAAA;AACA;AACA,EAAA,OAAA;AACA,IAAA,IAAA,EAAA,gBAAA;AACA,IAAA,eAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAA;AACA,MAAA,MAAA,OAAA,GAAA,MAAA,CAAA,UAAA,EAAA,CAAA;AACA;AACA,MAAAA,iCAAA;AACA;AACA,QAAAC,+BAAA;AACA,QAAA,OAAA,CAAA,WAAA;AACA,QAAA,OAAA,CAAA,cAAA;AACA,QAAA,GAAA;AACA,QAAA,KAAA;AACA,QAAA,KAAA;AACA,QAAA,IAAA;AACA,OAAA,CAAA;AACA,KAAA;AACA,GAAA,CAAA;AACA,CAAA,CAAA;AACA;AACA;AACA;AACA,MAAA,YAAA,GAAAC,gCAAA,CAAA,gBAAA,EAAA,uBAAA;;;;"}