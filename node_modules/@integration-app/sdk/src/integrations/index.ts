import { PaginationQuery, PaginationResponse } from '../entity-repository'
import { Connection } from '../connections'

export enum ConnectionMode {
  POPUP = 'popup',
  IFRAME = 'iframe',
}

export interface IntegrationAuth {
  clientId: string

  clientSecret: string

  authorizeUri: string

  tokenUri: string
}

export interface Integration {
  /**
   * Unique immutable id.
   */
  id: string

  /**
   * Integration key unique across its app.
   */
  key: string

  /**
   * User-readable name.
   */
  name: string

  baseUri: string

  auth: IntegrationAuth

  logoUri: string

  connectionMode?: ConnectionMode

  connection?: Connection

  archivedAt?: Date
}

export class FindIntegrationsQuery extends PaginationQuery {}

export class FindIntegrationsResponse extends PaginationResponse<Integration> {}
