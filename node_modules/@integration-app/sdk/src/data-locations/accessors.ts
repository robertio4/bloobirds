import { IntegrationAppClient } from '../client'
import { DataLocationSelector } from './api'
import qs from 'query-string'

export class DataLocationAccessor {
  constructor(
    private client: IntegrationAppClient,
    private selector: DataLocationSelector,
  ) {}

  async get() {
    return this.client.get(this.getPath())
  }

  async list() {
    return this.client.get(this.getPath('list'))
  }

  private getPath(subpath = '') {
    return `/data-location${subpath ? `/${subpath}` : ''}?${qs.stringify(
      this.selector,
    )}`
  }
}
