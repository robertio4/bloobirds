import { Static, Type } from '@sinclair/typebox'
import { UnifiedDataModel } from './base'

const FIELDS_SCHEMA = Type.Partial(
  Type.Object({
    name: Type.String(),
    description: Type.String(),
    code: Type.String(),
    type: Type.String(),
    isActive: Type.Boolean(),
    createdTime: Type.String({
      format: 'date-time',
    }),
    createdBy: Type.String({
      referenceUdm: 'users',
    }),
    updatedTime: Type.String({
      format: 'date-time',
    }),
    updatedBy: Type.String({
      referenceUdm: 'users',
    }),
  }),
)

export type UnifiedProductFields = Static<typeof FIELDS_SCHEMA>

const MODIFIABLE_FIELDS = ['name', 'description', 'code', 'type', 'isActive']

const udm: UnifiedDataModel = {
  singularName: 'product',
  pluralName: 'products',
  fieldsSchema: FIELDS_SCHEMA,
  find: {
    queryFields: ['name'],
  },
  create: {
    fields: MODIFIABLE_FIELDS,
  },
  update: {
    fields: MODIFIABLE_FIELDS,
  },
}

export default udm
