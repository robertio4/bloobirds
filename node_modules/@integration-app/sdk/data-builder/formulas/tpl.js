"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DataBuilderFormulaTpl = void 0;
const _1 = require(".");
const base_1 = require("./base");
class DataBuilderFormulaTpl extends base_1.DataBuilderFormulaBase {
    constructor(args) {
        super(_1.DataBuilderFormulaType.TPL, args);
        this.args = args;
    }
    getValue(context) {
        var _a, _b, _c;
        let result = (_a = this.args) === null || _a === void 0 ? void 0 : _a.template;
        if (typeof result !== 'string') {
            return result;
        }
        for (const key of Object.keys((_c = (_b = this.args) === null || _b === void 0 ? void 0 : _b.values) !== null && _c !== void 0 ? _c : {})) {
            const value = (0, _1.processValue)(this.args.values[key], context);
            result = result.replace(new RegExp(`\\{${key}\\}`, 'g'), value !== null && value !== void 0 ? value : '');
        }
        return result;
    }
    getSchema() {
        return {
            type: 'string',
        };
    }
}
exports.DataBuilderFormulaTpl = DataBuilderFormulaTpl;
//# sourceMappingURL=tpl.js.map