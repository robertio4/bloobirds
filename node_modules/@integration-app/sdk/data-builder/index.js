"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.valueToString = exports.buildDataSchema = exports.buildData = void 0;
const context_1 = require("./context");
const formulas_1 = require("./formulas");
function buildData(value, variables) {
    const context = new context_1.DataBuilderContext(variables);
    const result = (0, formulas_1.processValue)(value, context);
    (0, formulas_1.processCopy)(result);
    return result;
}
exports.buildData = buildData;
function buildDataSchema(value, variablesSchema) {
    return (0, formulas_1.getSchemaFromValue)(value, variablesSchema);
}
exports.buildDataSchema = buildDataSchema;
function valueToString(value, variablesSchema) {
    const formula = (0, formulas_1.getFormula)(value);
    if (formula) {
        return formula.toString(variablesSchema);
    }
    else if (value === null || value === void 0 ? void 0 : value.toString) {
        return value.toString();
    }
    else {
        return '';
    }
}
exports.valueToString = valueToString;
//# sourceMappingURL=index.js.map